const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-b309e1nc.js","assets/charts-0jYrCXCa.js","assets/qr-BITZ6EfA.js","assets/index-BHD_3q4q.css"])))=>i.map(i=>d[i]);
import{_ as e}from"./qr-BITZ6EfA.js";import{c as t,j as s,h as a,T as r,X as l,q as i,s as n,K as o,M as d,w as c,e as x,N as m,E as u,O as p,u as b,P as h,Z as g,Q as f,R as j,a as v,D as N,V as w,r as y,l as k,v as C,W as S,n as _,o as E,Y as P,_ as F}from"./index-b309e1nc.js";import{b as U}from"./charts-0jYrCXCa.js";import{g as z}from"./ticketService-O5k76BGT.js";import{M as R}from"./maximize-2-upWm9pCa.js";import{M}from"./map-pin-Zr57KGRe.js";import{C as A}from"./clock-Cnt1qgag.js";import{C as T}from"./circle-x-6_o0yPnH.js";import{C as $}from"./circle-check-big-BVKQvehI.js";import{SimplifiedSocialMediaManager as D}from"./SimplifiedSocialMediaManager-CNnq1CE-.js";import{C as B}from"./circle-alert-_cpfBv0g.js";import{L as I}from"./loader-GWe7--jB.js";import{C as L}from"./copy-Qt2RpJVI.js";import{S as q}from"./share-2-ytQz_KfA.js";import{M as O}from"./message-square-CNN38snK.js";import{R as Y}from"./refresh-cw-hkacKNH8.js";import{U as W}from"./upload-uczA5OcS.js";import{I as V}from"./image-C72TOZrH.js";import"./browser-D7w79axB.js";import"./circle-check-CSkpwwxu.js";
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=t("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]),Q=t("OctagonX",[["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),G=t("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),J=({ticket:e,onExpand:t})=>{const[l,i]=U.useState(null),[n,o]=U.useState(!0);U.useEffect(()=>{(async()=>{try{const t=await z(e.id,e.event_id,e.user_id);i(t)}catch(t){}finally{o(!1)}})()},[e.id,e.event_id,e.user_id]);const d=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return s.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-2xl overflow-hidden hover:border-indigo-500/30 transition-all relative group",children:[t&&s.jsx("button",{onClick:e=>{e.stopPropagation(),t&&t()},className:"absolute top-3 left-3 z-20 p-2.5 bg-indigo-600/90 hover:bg-indigo-500 text-white rounded-lg transition-all shadow-lg border border-indigo-500",title:"View full ticket",children:s.jsx(R,{className:"w-5 h-5"})}),s.jsxs("div",{className:"relative h-32 bg-gradient-to-br from-indigo-600 to-purple-600 overflow-hidden",children:[e.event.imageUrl&&s.jsx("img",{src:e.event.imageUrl,alt:e.event.name,className:"absolute inset-0 w-full h-full object-cover opacity-60"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent"}),s.jsx("div",{className:"absolute top-3 right-3",children:s.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full border text-xs font-bold uppercase tracking-wider ${(()=>{switch(e.status){case"valid":return"text-emerald-500 bg-emerald-500/10 border-emerald-500/20";case"used":default:return"text-slate-500 bg-slate-500/10 border-slate-500/20";case"cancelled":return"text-red-500 bg-red-500/10 border-red-500/20";case"expired":return"text-orange-500 bg-orange-500/10 border-orange-500/20"}})()}`,children:[(()=>{switch(e.status){case"valid":case"used":return s.jsx($,{className:"w-4 h-4"});case"cancelled":return s.jsx(T,{className:"w-4 h-4"});case"expired":return s.jsx(A,{className:"w-4 h-4"});default:return s.jsx(r,{className:"w-4 h-4"})}})(),e.status]})}),s.jsx("div",{className:"absolute bottom-3 left-3 right-3",children:s.jsx("h3",{className:"text-white font-bold text-lg leading-tight line-clamp-2",children:e.event.name})})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-400",children:[s.jsx(a,{className:"w-4 h-4"}),s.jsxs("span",{children:[d(e.event.date)," at ",e.event.time]})]}),e.event.location&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-400",children:[s.jsx(M,{className:"w-4 h-4"}),s.jsx("span",{className:"line-clamp-1",children:e.event.location.address||e.event.location.city})]})]}),"valid"===e.status&&s.jsxs("div",{className:"bg-white p-3 rounded-xl",children:[n?s.jsx("div",{className:"w-full aspect-square flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):l?s.jsx("img",{src:l,alt:"Ticket QR Code",className:"w-full h-auto"}):s.jsx("div",{className:"w-full aspect-square flex items-center justify-center text-slate-400 text-sm",children:"QR Code Error"}),s.jsxs("p",{className:"text-center text-xs text-slate-600 mt-2 font-mono",children:[e.qr_code.substring(0,20),"..."]})]}),"used"===e.status&&e.used_at&&s.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-3 text-sm",children:s.jsxs("p",{className:"text-slate-400",children:["Scanned on ",new Date(e.used_at).toLocaleString()]})}),"cancelled"===e.status&&s.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-sm",children:s.jsx("p",{className:"text-red-400",children:"This ticket has been cancelled and is no longer valid."})}),s.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-slate-800",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider",children:"Ticket Type"}),s.jsx("p",{className:"text-sm font-bold text-white capitalize",children:e.ticket_type})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider",children:"Price"}),s.jsx("p",{className:"text-sm font-bold text-white",children:(c=e.price_paid,0===c?"FREE":`â‚¬${c.toFixed(2)}`)})]})]}),s.jsxs("div",{className:"text-xs text-slate-500 text-center",children:["Purchased on ",d(e.purchase_date)]})]})]});var c},K=({user:e,onClose:t})=>{const[a,r]=U.useState("bug"),[o,d]=U.useState("normal"),[c,x]=U.useState(""),[m,u]=U.useState(""),[p,b]=U.useState(""),[h,g]=U.useState(""),[f,j]=U.useState(""),[v,N]=U.useState(()=>"undefined"!=typeof navigator?navigator.userAgent:""),[w,y]=U.useState(!1),[k,C]=U.useState(null);return s.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-950 border border-indigo-500/30 rounded-[32px] p-8 shadow-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-indigo-600/20 border border-indigo-500/50 rounded-2xl flex items-center justify-center",children:s.jsx(H,{className:"w-6 h-6 text-indigo-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-black text-white",children:"Beta Tester Report"}),s.jsx("p",{className:"text-xs text-slate-400 font-semibold",children:"Direct line to the dev team"})]})]}),t&&s.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-800 rounded-xl transition-colors text-slate-400",children:s.jsx(l,{size:20})})]}),s.jsxs("div",{className:"mb-6 p-3 bg-indigo-500/10 border border-indigo-500/30 rounded-xl flex items-center gap-2",children:[s.jsx($,{className:"w-4 h-4 text-indigo-400"}),s.jsx("p",{className:"text-xs text-indigo-300 font-semibold",children:"You are a verified beta tester. Your feedback helps shape EventNexus!"})]}),k&&s.jsxs("div",{className:"mb-6 p-4 rounded-xl flex gap-3 "+("error"===k.type?"bg-red-500/20 border border-red-500/50 text-red-300":"bg-green-500/20 border border-green-500/50 text-green-300"),children:[s.jsx(B,{size:20,className:"flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm font-semibold",children:k.text})]}),s.jsxs("form",{onSubmit:async s=>{if(s.preventDefault(),c.trim()&&m.trim()){y(!0),C(null);try{const{error:s}=await n.from("admin_inbox").insert([{from_email:e.email,from_name:`${e.name} (Beta Tester)`,to_email:"admin@eventnexus.eu",subject:`[${a.toUpperCase()}] ${c}`,body_text:`\nBeta Tester: ${e.name} (${e.email})\nUser ID: ${e.id}\nPriority: ${o}\nType: ${a}\n\n${m}\n\nRepro Steps:\n${p||"Not provided"}\n\nConsole Logs / Errors:\n${h||"Not provided"}\n\nScreenshot / Screen recording URL:\n${f||"Not provided"}\n\nEnvironment:\n${v||"Not provided"}\n\n---\nSubmitted via Beta Tester Report Tool\n          `.trim(),body_html:null,attachments:[],status:"unread",priority:o,created_at:(new Date).toISOString()}]);if(s)throw s;C({type:"success",text:"âœ… Thank you! Your report has been sent to the admin team."}),setTimeout(()=>{x(""),u(""),b(""),g(""),j(""),r("bug"),d("normal"),C(null),t&&t()},2e3)}catch(l){C({type:"error",text:"Failed to submit report. Please try again or email support@mail.eventnexus.eu"})}finally{y(!1)}}else C({type:"error",text:"Please fill in all fields"})},className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Report Type"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"bug",label:"ğŸ› Bug",desc:"Something broken"},{value:"feedback",label:"ğŸ’¬ Feedback",desc:"General thoughts"},{value:"feature",label:"ğŸ’¡ Feature",desc:"New idea"}].map(e=>s.jsxs("button",{type:"button",onClick:()=>r(e.value),className:"p-3 rounded-xl border-2 transition-all text-left "+(a===e.value?"border-indigo-500 bg-indigo-500/10":"border-slate-700 bg-slate-800/50 hover:border-slate-600"),children:[s.jsx("p",{className:"text-sm font-bold text-white",children:e.label}),s.jsx("p",{className:"text-xs text-slate-400",children:e.desc})]},e.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Priority"}),s.jsxs("select",{value:o,onChange:e=>d(e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20",children:[s.jsx("option",{value:"low",children:"Low - Minor issue"}),s.jsx("option",{value:"normal",children:"Normal - Standard issue"}),s.jsx("option",{value:"high",children:"High - Important issue"}),s.jsx("option",{value:"urgent",children:"Urgent - Critical issue"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Subject"}),s.jsx("input",{type:"text",value:c,onChange:e=>x(e.target.value),placeholder:"Brief summary of the issue/feedback",className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Description"}),s.jsx("textarea",{value:m,onChange:e=>u(e.target.value),placeholder:"bug"===a?"Steps to reproduce:\n1. Go to...\n2. Click on...\n3. See error...\n\nExpected: ...\nActual: ...":"feedback"===a?"Share your thoughts about the platform...":"Describe the feature you'd like to see...",rows:8,className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 resize-none",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Steps to Reproduce (optional)"}),s.jsx("textarea",{value:p,onChange:e=>b(e.target.value),placeholder:"1. ...\n2. ...\n3. ...\nExpected: ...\nActual: ...",rows:5,className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 resize-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Console errors or logs (optional)"}),s.jsx("textarea",{value:h,onChange:e=>g(e.target.value),placeholder:"Paste relevant console output or stack trace here",rows:4,className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 resize-none font-mono text-xs"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Screenshot / screen recording URL (optional)"}),s.jsx("input",{type:"url",value:f,onChange:e=>j(e.target.value),placeholder:"https://...",className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Environment (browser / device)"}),s.jsx("input",{type:"text",value:v,onChange:e=>N(e.target.value),placeholder:"Browser, OS, device",className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20"})]}),s.jsx("button",{type:"submit",disabled:w,className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 disabled:from-slate-600 disabled:to-slate-600 px-6 py-4 rounded-xl font-bold text-white transition-all flex items-center justify-center gap-2 shadow-xl",children:w?s.jsxs(s.Fragment,{children:[s.jsx(I,{size:20,className:"animate-spin"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(i,{size:20}),"Send to Admin Team"]})})]}),s.jsx("div",{className:"mt-6 p-4 bg-slate-800/50 border border-slate-700 rounded-xl",children:s.jsxs("p",{className:"text-xs text-slate-400 leading-relaxed",children:[s.jsx("strong",{className:"text-slate-300",children:"Note:"})," All beta tester reports are sent directly to the Admin Inbox and reviewed within 24 hours. For urgent issues, you can also email"," ",s.jsx("a",{href:"mailto:support@mail.eventnexus.eu",className:"text-indigo-400 hover:text-indigo-300",children:"support@mail.eventnexus.eu"})]})})]})},X=({user:e})=>{const[t,a]=U.useState(null),[r,l]=U.useState(!1),[i,n]=U.useState(!0);U.useEffect(()=>{b()},[e.id]);const b=async()=>{try{const t=await o(e.id);a(t)}catch(t){}finally{n(!1)}},h=t?`${window.location.origin}/#/beta?ref=${t.code}`:"",g=e=>{const t=encodeURIComponent("Join me on EventNexus! Discover amazing events near you. We both get 50 bonus credits ğŸ‰"),s=encodeURIComponent(h),a={twitter:`https://twitter.com/intent/tweet?text=${t}&url=${s}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${s}`,whatsapp:`https://wa.me/?text=${t}%20${s}`,email:`mailto:?subject=Join me on EventNexus&body=${t}%0A%0A${h}`};a[e]&&window.open(a[e],"_blank","width=600,height=400")};return i?s.jsx("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-8",children:s.jsxs("div",{className:"animate-pulse space-y-4",children:[s.jsx("div",{className:"h-8 bg-slate-800 rounded-xl w-1/3"}),s.jsx("div",{className:"h-4 bg-slate-800 rounded-lg w-2/3"}),s.jsx("div",{className:"h-20 bg-slate-800 rounded-2xl"})]})}):s.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-900/50 border border-slate-800 rounded-3xl p-8 space-y-6",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-3xl font-black tracking-tight text-white mb-2",children:"Invite Friends"}),s.jsx("p",{className:"text-slate-400 font-medium",children:"Share EventNexus and earn rewards together"})]}),s.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg shadow-indigo-600/30",children:s.jsx(d,{className:"w-7 h-7 text-white"})})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-2xl p-4 text-center",children:[s.jsx(c,{className:"w-6 h-6 text-indigo-400 mx-auto mb-2"}),s.jsx("div",{className:"text-2xl font-black text-white",children:(null==t?void 0:t.totalReferrals)||0}),s.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider mt-1",children:"Referrals"})]}),s.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-2xl p-4 text-center",children:[s.jsx(x,{className:"w-6 h-6 text-orange-400 mx-auto mb-2"}),s.jsx("div",{className:"text-2xl font-black text-white",children:(null==t?void 0:t.creditsEarned)||0}),s.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider mt-1",children:"Credits Earned"})]}),s.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-2xl p-4 text-center",children:[s.jsx(d,{className:"w-6 h-6 text-emerald-400 mx-auto mb-2"}),s.jsx("div",{className:"text-2xl font-black text-white",children:(null==t?void 0:t.pendingReferrals)||0}),s.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider mt-1",children:"Pending"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-indigo-600/20 to-purple-600/20 border border-indigo-500/30 rounded-2xl p-6 space-y-3",children:[s.jsx("h4",{className:"text-sm font-black text-indigo-300 uppercase tracking-widest",children:"How it Works"}),s.jsxs("div",{className:"space-y-2 text-sm text-slate-300",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-lg bg-indigo-600 flex items-center justify-center shrink-0 mt-0.5",children:s.jsx("span",{className:"text-xs font-black text-white",children:"1"})}),s.jsx("p",{children:"Share your unique referral link with friends"})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-lg bg-indigo-600 flex items-center justify-center shrink-0 mt-0.5",children:s.jsx("span",{className:"text-xs font-black text-white",children:"2"})}),s.jsxs("p",{children:["They sign up and get ",s.jsx("span",{className:"text-orange-400 font-bold",children:"50 bonus credits"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-lg bg-indigo-600 flex items-center justify-center shrink-0 mt-0.5",children:s.jsx("span",{className:"text-xs font-black text-white",children:"3"})}),s.jsxs("p",{children:["You receive ",s.jsx("span",{className:"text-orange-400 font-bold",children:"50 bonus credits"})," too!"]})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Your Referral Link"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"flex-1 bg-slate-800 border border-slate-700 rounded-2xl px-4 py-3 text-sm text-slate-300 font-mono truncate",children:h}),s.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(h),l(!0),setTimeout(()=>l(!1),2e3)}catch(e){}},className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 rounded-2xl text-white font-black text-sm transition-all flex items-center gap-2 shadow-lg shadow-indigo-600/30",children:r?s.jsxs(s.Fragment,{children:[s.jsx(m,{className:"w-4 h-4"}),"Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(L,{className:"w-4 h-4"}),"Copy"]})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Share Via"}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[s.jsxs("button",{onClick:()=>g("twitter"),className:"bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-2xl px-4 py-3 text-sm font-bold text-slate-300 transition-all flex items-center justify-center gap-2",children:[s.jsx(q,{className:"w-4 h-4"}),"Twitter"]}),s.jsxs("button",{onClick:()=>g("facebook"),className:"bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-2xl px-4 py-3 text-sm font-bold text-slate-300 transition-all flex items-center justify-center gap-2",children:[s.jsx(u,{className:"w-4 h-4"}),"Facebook"]}),s.jsxs("button",{onClick:()=>g("whatsapp"),className:"bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-2xl px-4 py-3 text-sm font-bold text-slate-300 transition-all flex items-center justify-center gap-2",children:[s.jsx(O,{className:"w-4 h-4"}),"WhatsApp"]}),s.jsxs("button",{onClick:()=>g("email"),className:"bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-2xl px-4 py-3 text-sm font-bold text-slate-300 transition-all flex items-center justify-center gap-2",children:[s.jsx(p,{className:"w-4 h-4"}),"Email"]})]})]})]})},Z=({user:t,onLogout:i,onUpdateUser:o,onRefreshUser:d})=>{var c,x,p,z,R,A,T;const $=b(),I=U.useRef(null),[L,q]=U.useState(!1),[O,Z]=U.useState(!1),[ee,te]=U.useState(!1),[se,ae]=U.useState([]),[re,le]=U.useState([]),[ie,ne]=U.useState(!1),[oe,de]=U.useState(!1),[ce,xe]=U.useState(!1),[me,ue]=U.useState(null),[pe,be]=U.useState(null),[he,ge]=U.useState(!1),[fe,je]=U.useState({name:t.name,bio:t.bio,avatar:t.avatar,location:t.location,agencySlug:t.agencySlug||t.agency_slug,branding:t.branding});U.useEffect(()=>{(async()=>{const e=await w(t.id);ae(e||[])})(),(async()=>{const e=await y(t.id);le(e||[])})(),(async()=>{const e=await k(t.id);e&&be(e)})()},[t.id]),U.useEffect(()=>{d&&d()},[]),U.useEffect(()=>{(async()=>{const e=new URLSearchParams(window.location.search).get("connect");if("success"===e||"refresh"===e){ge(!0);try{const e=await C(t.id);(null==e?void 0:e.success)&&(be({hasAccount:e.hasAccount,onboardingComplete:e.onboardingComplete,chargesEnabled:e.chargesEnabled,payoutsEnabled:e.payoutsEnabled}),e.onboardingComplete&&alert("âœ… Payment setup complete! You can now receive payouts from ticket sales."),setTimeout(async()=>{const e=await k(t.id);e&&be(e)},2e3))}catch(s){alert("Failed to verify payment setup status. Please try refreshing the page.")}finally{ge(!1),window.history.replaceState({},document.title,window.location.pathname)}}})()},[t.id]);const ve=async e=>new Promise((t,s)=>{const a=new FileReader;a.onload=a=>{var r;const l=new Image;l.onload=()=>{let a=l.width,r=l.height;a>r?a>800&&(r*=800/a,a=800):r>800&&(a*=800/r,r=800);const i=document.createElement("canvas");i.width=a,i.height=r;const n=i.getContext("2d");if(!n)return void s(new Error("Failed to get canvas context"));n.imageSmoothingEnabled=!0,n.imageSmoothingQuality="high",n.drawImage(l,0,0,a,r);const o=a=>{i.toBlob(r=>{if(!r)return void s(new Error("Failed to compress image"));if(r.size>512e3&&a>.5)return void o(a-.1);const l=new File([r],e.name,{type:"image/jpeg",lastModified:Date.now()});t(l)},"image/jpeg",a)};o(.9)},l.onerror=()=>s(new Error("Failed to load image")),l.src=null==(r=a.target)?void 0:r.result},a.onerror=()=>s(new Error("Failed to read file")),a.readAsDataURL(e)}),Ne=async e=>new Promise((t,s)=>{const a=new FileReader;a.onload=a=>{var r;const l=new Image;l.onload=()=>{const a=1200;let r=l.width,i=l.height;r>i?r>a&&(i*=a/r,r=a):i>400&&(r*=400/i,i=400);const n=document.createElement("canvas");n.width=r,n.height=i;const o=n.getContext("2d");if(!o)return void s(new Error("Failed to get canvas context"));o.imageSmoothingEnabled=!0,o.imageSmoothingQuality="high",o.drawImage(l,0,0,r,i);const d=a=>{n.toBlob(r=>{if(!r)return void s(new Error("Failed to compress banner"));if(r.size>819200&&a>.5)return void d(a-.1);const l=new File([r],e.name,{type:"image/jpeg",lastModified:Date.now()});t(l)},"image/jpeg",a)};d(.9)},l.onerror=()=>s(new Error("Failed to load image")),l.src=null==(r=a.target)?void 0:r.result},a.onerror=()=>s(new Error("Failed to read file")),a.readAsDataURL(e)}),we="free"!==(t.subscription_tier||t.subscription);return s.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-12",children:[s.jsxs("div",{className:"relative mb-16",children:[s.jsxs("div",{className:"h-64 rounded-[40px] border border-slate-800 overflow-hidden relative",style:{background:(null==(c=t.branding)?void 0:c.primaryColor)?`linear-gradient(to bottom right, ${t.branding.primaryColor}22, #020617)`:"linear-gradient(to bottom right, #1e293b, #020617)"},children:[(null==(x=t.branding)?void 0:x.bannerUrl)&&s.jsx("img",{src:t.branding.bannerUrl,className:"absolute inset-0 w-full h-full object-cover opacity-40 mix-blend-overlay",alt:""}),s.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(circle, #6366f1 1px, transparent 1px)",backgroundSize:"24px 24px"}})]}),s.jsxs("div",{className:"absolute -bottom-12 left-8 flex flex-col sm:flex-row items-center sm:items-end gap-6 text-center sm:text-left",children:[s.jsxs("div",{className:"relative group",children:[s.jsx("div",{className:"absolute inset-0 bg-indigo-500 rounded-[32px] blur-xl opacity-0 group-hover:opacity-20 transition-opacity"}),s.jsx("img",{src:t.avatar,className:"w-32 h-32 rounded-[32px] border-4 border-slate-950 shadow-2xl relative z-10",alt:"avatar"}),s.jsx("div",{className:"absolute -bottom-2 -right-2 bg-indigo-600 p-2.5 rounded-2xl border-4 border-slate-950 z-20 shadow-xl",children:s.jsx(h,{className:"w-5 h-5 text-white"})})]}),s.jsxs("div",{className:"mb-4 space-y-1",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-black tracking-tighter",children:t.name}),s.jsxs("div",{className:"flex flex-wrap items-center justify-center sm:justify-start gap-2 md:gap-4",children:[s.jsxs("div",{className:"px-4 py-2 rounded-2xl font-black text-xs uppercase tracking-widest flex items-center gap-2 border "+("enterprise"===t.subscription_tier?"bg-orange-600/10 border-orange-500/30 text-orange-400":"premium"===t.subscription_tier?"bg-emerald-600/10 border-emerald-500/30 text-emerald-400":"pro"===t.subscription_tier?"bg-indigo-600/10 border-indigo-500/30 text-indigo-400":"bg-slate-800/50 border-slate-700 text-slate-400"),children:[s.jsx("span",{className:"w-2 h-2 rounded-full "+("enterprise"===t.subscription_tier?"bg-orange-500 shadow-[0_0_10px_rgba(249,115,22,0.5)]":"premium"===t.subscription_tier?"bg-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.5)]":"pro"===t.subscription_tier?"bg-indigo-500 shadow-[0_0_10px_rgba(99,102,241,0.5)]":"bg-slate-500")}),"Nexus ",t.subscription_tier||t.subscription," â€¢ ",t.role]}),"free"===t.subscription_tier&&s.jsxs("div",{className:"px-4 py-2 rounded-2xl font-black text-xs uppercase tracking-widest flex items-center gap-2 border bg-orange-600/10 border-orange-500/30 text-orange-400",children:[s.jsx(g,{className:"w-3 h-3"}),t.credits||0," Credits"]}),t.location&&s.jsxs("p",{className:"text-slate-500 text-sm font-bold flex items-center gap-2",children:[s.jsx(M,{className:"w-4 h-4"})," ",t.location]})]})]})]}),s.jsx("div",{className:"absolute top-4 right-8 flex items-center gap-3",children:s.jsxs("button",{onClick:()=>q(!0),className:"bg-white/10 hover:bg-white/20 backdrop-blur-xl px-5 py-2.5 rounded-2xl text-xs font-black uppercase tracking-widest border border-white/20 transition-all flex items-center gap-2 text-white",children:[s.jsx(G,{className:"w-4 h-4"})," Edit Profile"]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mt-20 sm:mt-16",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[s.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-[40px] p-8 space-y-4",children:[s.jsx("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"Biography"}),s.jsx("p",{className:"text-slate-300 font-medium leading-relaxed",children:t.bio||"No biography provided yet. Tell the Nexus network about yourself!"})]}),s.jsx(X,{user:t}),we&&s.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[40px] overflow-hidden shadow-2xl",children:[s.jsxs("div",{className:"p-8 border-b border-slate-800 flex justify-between items-center bg-slate-900/50 backdrop-blur-md",children:[s.jsxs("h3",{className:"font-black text-xl tracking-tight flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-indigo-600/20 rounded-xl",children:s.jsx(a,{className:"w-5 h-5 text-indigo-400"})}),"My Organized Events"]}),s.jsxs("span",{className:"text-xs font-bold text-slate-500",children:[re.length," events"]})]}),s.jsx("div",{className:"divide-y divide-slate-800",children:re.length>0?re.map(e=>{var t;return s.jsx("div",{className:"p-6 hover:bg-slate-800/30 transition-all group",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>$(`/event/${e.id}`),children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-[10px] font-bold text-indigo-400 uppercase tracking-widest",children:e.category}),s.jsx("span",{className:"text-xs text-slate-600",children:"â€¢"}),s.jsx("span",{className:"text-xs text-slate-500 font-medium",children:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),s.jsx("h4",{className:"font-bold text-lg mb-1 group-hover:text-indigo-400 transition-colors",children:e.name}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(M,{className:"w-4 h-4"}),(null==(t=e.location)?void 0:t.city)||"Location TBA"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(r,{className:"w-4 h-4"}),e.attendeesCount||0,"/",e.maxAttendees||0]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[0===e.attendeesCount&&s.jsx("button",{onClick:t=>{t.stopPropagation(),(async(e,t,s)=>{if(s>0)alert("Cannot delete events with sold tickets. Please contact support for assistance.");else if(confirm(`Are you sure you want to delete "${t}"? This action cannot be undone.`)){ue(e);try{await S(e)?(le(t=>t.filter(t=>t.id!==e)),alert("Event deleted successfully")):alert("Failed to delete event. Please try again.")}catch(a){alert("Failed to delete event. Please try again.")}finally{ue(null)}}})(e.id,e.name,e.attendeesCount)},disabled:me===e.id,className:"p-2 bg-red-600/10 hover:bg-red-600/20 border border-red-600/30 rounded-xl transition-all disabled:opacity-50 group/del",title:"Delete event (0 tickets sold)",children:me===e.id?s.jsx(Y,{className:"w-4 h-4 text-red-400 animate-spin"}):s.jsx(Q,{className:"w-4 h-4 text-red-400 group-hover/del:text-red-300"})}),s.jsx("button",{onClick:()=>$(`/event/${e.id}`),className:"p-2 hover:bg-slate-700/50 rounded-xl transition-all",children:s.jsx(f,{className:"w-5 h-5 text-slate-600 group-hover:text-indigo-400 group-hover:translate-x-1 transition-all"})})]})]})},e.id)}):s.jsxs("div",{className:"p-12 text-center text-slate-500",children:[s.jsx(a,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"font-bold",children:"No events organized yet"}),s.jsx("p",{className:"text-sm mt-2",children:"Create your first event to get started"}),s.jsx("button",{onClick:()=>$("/create-event"),className:"mt-4 px-6 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-xl font-bold text-sm transition-all",children:"Create Event"})]})})]}),("enterprise"===t.subscription_tier||"premium"===t.subscription_tier)&&s.jsx("div",{className:"bg-slate-900 border border-slate-800 rounded-[40px] overflow-hidden shadow-2xl p-8",children:s.jsx(D,{user:t})}),s.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[40px] overflow-hidden shadow-2xl",children:[s.jsxs("div",{className:"p-8 border-b border-slate-800 flex justify-between items-center bg-slate-900/50 backdrop-blur-md",children:[s.jsxs("h3",{className:"font-black text-xl tracking-tight flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-indigo-600/20 rounded-xl",children:s.jsx(r,{className:"w-5 h-5 text-indigo-400"})}),"My Tickets"]}),s.jsx("span",{className:"px-3 py-1.5 bg-indigo-600/20 text-indigo-400 rounded-full text-sm font-bold",children:se.length})]}),s.jsx("div",{className:"p-6",children:se.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:se.map(e=>s.jsx(J,{ticket:e,onExpand:()=>$("/ticket",{state:{ticket:e}})},e.id))}):s.jsxs("div",{className:"p-12 text-center text-slate-500",children:[s.jsx(r,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"font-bold",children:"No tickets yet"}),s.jsx("p",{className:"text-sm mt-2",children:"Purchase tickets to events and they'll appear here"})]})})]})]}),s.jsxs("div",{className:"space-y-6",children:[t.is_beta_tester&&s.jsxs("div",{className:"bg-gradient-to-br from-indigo-900/70 via-slate-900 to-slate-950 border border-indigo-500/30 rounded-[40px] p-8 shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 rounded-2xl bg-indigo-600/20 border border-indigo-500/40 text-indigo-300",children:s.jsx(H,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[11px] font-black uppercase tracking-[0.2em] text-indigo-300",children:"Beta Tester"}),s.jsx("h3",{className:"text-lg font-black text-white",children:"Report a bug or idea"})]})]}),s.jsx("span",{className:"px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest bg-indigo-500/20 text-indigo-200 border border-indigo-500/30",children:"Priority channel"})]}),s.jsx("p",{className:"text-sm text-slate-300 leading-relaxed mb-4",children:"Send issues, feedback, or feature ideas directly to the admin inbox. Responses within 24 hours for beta testers."}),s.jsxs("button",{onClick:()=>xe(!0),className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 px-5 py-3 rounded-2xl font-bold text-white text-sm flex items-center justify-center gap-2 transition-all active:scale-95",children:[s.jsx(H,{className:"w-4 h-4"}),"Open Beta Report Form"]})]}),s.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[40px] p-8 shadow-xl",children:[s.jsx("h3",{className:"font-black text-lg mb-6 uppercase tracking-widest text-slate-500 text-xs",children:"Radar Status"}),s.jsxs("div",{onClick:()=>$("/notifications"),className:"p-5 rounded-3xl bg-slate-800/30 border border-slate-700/50 flex items-center justify-between group cursor-pointer",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 rounded-2xl "+(t.notification_prefs.proximityAlerts?"bg-indigo-600 text-white animate-pulse":"bg-slate-800 text-slate-500"),children:s.jsx(j,{size:20})}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-black text-xs text-white",children:["Radar ",t.notification_prefs.proximityAlerts?"Active":"Off"]}),s.jsxs("p",{className:"text-[9px] text-slate-500 font-bold",children:[t.notification_prefs.alertRadius,"km radius"]})]})]}),s.jsx(v,{size:14,className:"text-slate-600 group-hover:translate-x-1 transition-transform"})]})]}),we&&s.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[40px] p-8 shadow-xl space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-black text-lg uppercase tracking-widest text-slate-500 text-xs",children:"Subscription"}),s.jsx("div",{className:"px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider "+("active"===t.subscription_status?"bg-emerald-500/20 text-emerald-400":"trialing"===t.subscription_status?"bg-indigo-500/20 text-indigo-400":"bg-orange-500/20 text-orange-400"),children:t.subscription_status||"active"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-6 rounded-3xl border-2 "+("enterprise"===t.subscription_tier?"bg-orange-600/10 border-orange-500/30":"premium"===t.subscription_tier?"bg-emerald-600/10 border-emerald-500/30":"bg-indigo-600/10 border-indigo-500/30"),children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"font-black text-2xl tracking-tighter "+("enterprise"===t.subscription_tier?"text-orange-400":"premium"===t.subscription_tier?"text-emerald-400":"text-indigo-400"),children:"enterprise"===t.subscription_tier?"Enterprise":"premium"===t.subscription_tier?"Premium":"Pro"}),s.jsxs("p",{className:"text-2xl font-black text-white",children:["â‚¬","enterprise"===t.subscription_tier?"149.99":"premium"===t.subscription_tier?"49.99":"19.99",s.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"/mo"})]})]}),t.subscription_end_date&&s.jsxs("p",{className:"text-xs text-slate-400 font-medium",children:["Next billing: ",new Date(t.subscription_end_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>$("/pricing"),className:"w-full flex items-center justify-between p-4 rounded-2xl bg-slate-800/50 border border-slate-700 hover:bg-slate-800 transition-all group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Y,{className:"w-5 h-5 text-indigo-400"}),s.jsx("span",{className:"font-bold text-sm text-white",children:"Change Plan"})]}),s.jsx(v,{size:16,className:"text-slate-600 group-hover:translate-x-1 transition-transform"})]}),s.jsxs("button",{onClick:()=>Z(!0),className:"w-full flex items-center justify-between p-4 rounded-2xl bg-slate-800/50 border border-slate-700 hover:bg-slate-800 hover:border-red-500/30 transition-all group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Q,{className:"w-5 h-5 text-red-400"}),s.jsx("span",{className:"font-bold text-sm text-white group-hover:text-red-400 transition-colors",children:"Manage Subscription"})]}),s.jsx(v,{size:16,className:"text-slate-600 group-hover:translate-x-1 group-hover:text-red-400 transition-all"})]}),s.jsxs("button",{onClick:async()=>{var e,s,a;ge(!0);try{const r=await C(t.id);if(r&&r.success){const a={hasAccount:r.hasAccount,onboardingComplete:r.onboardingComplete,chargesEnabled:r.chargesEnabled,payoutsEnabled:r.payoutsEnabled};be(a),r.onboardingComplete&&!(null==pe?void 0:pe.onboardingComplete)&&alert("âœ… Payment setup detected as complete! You can now manage your payouts.");const l=a;if(l.hasAccount)if(l.onboardingComplete){const e=await E(t.id);e?window.open(e,"_blank"):alert("Unable to access dashboard. Please try again.")}else{const{data:e}=await n.auth.getUser();if(!(null==(s=e.user)?void 0:s.email))return void alert("Unable to retrieve email. Please try again.");const a=await _(t.id,e.user.email);(null==a?void 0:a.url)?window.location.href=a.url:alert("Failed to create onboarding link. Please try again.")}else{const{data:s}=await n.auth.getUser();if(!(null==(e=s.user)?void 0:e.email))return void alert("Unable to retrieve email. Please try again.");const a=await _(t.id,s.user.email);(null==a?void 0:a.url)?window.location.href=a.url:alert("Failed to create Connect account. Please try again.")}}else{const e=await k(t.id);if(e&&be(e),null==e?void 0:e.hasAccount)alert("Unable to verify your payment setup status. Please try refreshing the page.");else{const{data:e}=await n.auth.getUser();if(!(null==(a=e.user)?void 0:a.email))return void alert("Unable to retrieve email. Please try again.");const s=await _(t.id,e.user.email);(null==s?void 0:s.url)?window.location.href=s.url:alert("Failed to create Connect account. Please try again.")}}}catch(r){alert("An error occurred. Please try again.")}finally{ge(!1)}},disabled:he,className:"w-full flex items-center justify-between p-4 rounded-2xl bg-emerald-600/10 border border-emerald-500/30 hover:bg-emerald-600/20 transition-all group disabled:opacity-50",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(N,{className:"w-5 h-5 text-emerald-400"}),s.jsxs("div",{className:"text-left",children:[s.jsx("span",{className:"font-bold text-sm text-white block",children:(null==pe?void 0:pe.onboardingComplete)?"Manage Payouts":"Set Up Payouts"}),(null==pe?void 0:pe.onboardingComplete)&&s.jsx("span",{className:"text-[10px] text-emerald-400 font-medium",children:"Bank account & payout settings"})]})]}),s.jsx(u,{size:16,className:"text-emerald-600 group-hover:translate-x-1 transition-transform"})]})]})]})]}),!we&&s.jsxs("div",{className:"bg-indigo-600 rounded-[40px] p-8 text-white relative overflow-hidden group shadow-2xl shadow-indigo-600/30",children:[s.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-white/10 rounded-full -mr-24 -mt-24 blur-3xl group-hover:scale-125 transition-transform duration-700"}),s.jsx("h3",{className:"font-black mb-2 text-2xl tracking-tighter",children:"Nexus Pro"}),s.jsx("p",{className:"text-sm text-indigo-100 mb-6 leading-relaxed font-medium",children:"Create your own events and discover more. Only $19.99/mo."}),s.jsx("button",{onClick:()=>$("/pricing"),className:"w-full bg-white text-indigo-600 font-black py-4 rounded-2xl text-xs uppercase tracking-widest hover:bg-indigo-50 transition-all shadow-xl active:scale-95",children:"Upgrade Plan"})]})]})]}),O&&s.jsxs("div",{className:"fixed inset-0 z-[2100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/80 backdrop-blur-xl",onClick:()=>Z(!1)}),s.jsx("div",{className:"relative w-full max-w-lg bg-slate-900 border border-slate-800 rounded-[48px] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300",children:s.jsxs("div",{className:"p-10 space-y-8",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-3xl font-black tracking-tighter",children:"Manage Subscription"}),s.jsx("button",{onClick:()=>Z(!1),className:"p-2 hover:bg-slate-800 rounded-xl text-slate-500",children:s.jsx(l,{})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"p-6 rounded-3xl border-2 "+("enterprise"===t.subscription_tier?"bg-orange-600/10 border-orange-500/30":"premium"===t.subscription_tier?"bg-emerald-600/10 border-emerald-500/30":"bg-indigo-600/10 border-indigo-500/30"),children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"font-black text-2xl tracking-tighter "+("enterprise"===t.subscription_tier?"text-orange-400":"premium"===t.subscription_tier?"text-emerald-400":"text-indigo-400"),children:["enterprise"===t.subscription_tier?"Enterprise":"premium"===t.subscription_tier?"Premium":"Pro"," Plan"]}),s.jsxs("p",{className:"text-sm text-slate-400 font-medium mt-1",children:["â‚¬","enterprise"===t.subscription_tier?"149.99":"premium"===t.subscription_tier?"49.99":"19.99","/month"]})]}),s.jsx("div",{className:"px-4 py-2 rounded-full text-xs font-black uppercase "+("active"===t.subscription_status?"bg-emerald-500/20 text-emerald-400":"bg-orange-500/20 text-orange-400"),children:t.subscription_status})]}),t.subscription_end_date&&s.jsxs("p",{className:"text-xs text-slate-400 font-medium",children:["active"===t.subscription_status?"Renews":"Expires"," on ",new Date(t.subscription_end_date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]})]}),s.jsx("div",{className:"p-6 bg-red-500/10 border border-red-500/30 rounded-3xl space-y-3",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(B,{className:"w-5 h-5 text-red-400 mt-0.5 shrink-0"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-black text-sm text-red-400",children:"Cancel Subscription"}),s.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:"Cancelling will downgrade your account to the Free tier at the end of your billing period. You'll lose access to:"}),s.jsxs("ul",{className:"text-xs text-slate-400 space-y-1 ml-4 list-disc",children:[s.jsx("li",{children:"Event creation capabilities"}),s.jsx("li",{children:"Advanced analytics & insights"}),s.jsx("li",{children:"Premium features & customization"}),"enterprise"===t.subscription_tier&&s.jsx("li",{children:"White-label branding & dedicated support"})]})]})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>$("/pricing"),className:"w-full py-4 rounded-2xl bg-indigo-600 text-white font-black text-xs uppercase tracking-widest hover:bg-indigo-700 transition-all flex items-center justify-center gap-2",children:[s.jsx(Y,{className:"w-4 h-4"})," Change to Different Plan"]}),s.jsx("button",{onClick:async()=>{if(confirm("Are you sure you want to cancel your subscription? You will retain access until the end of your billing period.")){te(!0);try{const{supabase:s}=await e(async()=>{const{supabase:e}=await import("./index-b309e1nc.js").then(e=>e.bd);return{supabase:e}},__vite__mapDeps([0,1,2,3])),{error:a}=await s.functions.invoke("cancel-subscription",{body:{userId:t.id}});if(a)throw a;alert("Subscription cancelled. You will retain access until "+new Date(t.subscription_end_date).toLocaleDateString()),Z(!1),window.location.reload()}catch(s){alert("Failed to cancel subscription. Please contact support.")}finally{te(!1)}}},disabled:ee,className:"w-full py-4 rounded-2xl bg-red-600/10 border-2 border-red-500/30 text-red-400 font-black text-xs uppercase tracking-widest hover:bg-red-600/20 transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:ee?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-400"}),"Cancelling..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Q,{className:"w-4 h-4"})," Cancel Subscription"]})}),s.jsx("button",{onClick:()=>Z(!1),className:"w-full py-3 rounded-2xl text-slate-500 font-bold text-xs uppercase tracking-widest hover:text-white transition-colors",children:"Keep My Subscription"})]})]})]})})]}),ce&&s.jsxs("div",{className:"fixed inset-0 z-[2150] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/80 backdrop-blur-xl",onClick:()=>xe(!1)}),s.jsx("div",{className:"relative w-full max-w-3xl bg-slate-900 border border-slate-800 rounded-[48px] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300 max-h-[90vh] overflow-y-auto scrollbar-hide",children:s.jsx("div",{className:"p-8",children:s.jsx(K,{user:t,onClose:()=>xe(!1)})})})]}),L&&s.jsxs("div",{className:"fixed inset-0 z-[2100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/80 backdrop-blur-xl",onClick:()=>q(!1)}),s.jsx("div",{className:"relative w-full max-w-2xl bg-slate-900 border border-slate-800 rounded-[48px] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300 max-h-[90vh] overflow-y-auto scrollbar-hide",children:s.jsxs("div",{className:"p-10 space-y-8",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-3xl font-black tracking-tighter",children:"Edit Identity"}),s.jsx("button",{onClick:()=>q(!1),className:"p-2 hover:bg-slate-800 rounded-xl text-slate-500",children:s.jsx(l,{})})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-8 items-center",children:[s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:fe.avatar,className:"w-24 h-24 rounded-[32px] border-2 border-slate-800 shadow-xl",alt:""}),s.jsx("button",{type:"button",onClick:()=>{var e;return null==(e=I.current)?void 0:e.click()},disabled:ie,className:"absolute inset-0 bg-black/40 rounded-[32px] opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity cursor-pointer disabled:cursor-not-allowed",children:ie?s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white"}):s.jsx(W,{className:"w-6 h-6 text-white"})}),s.jsx("input",{ref:I,type:"file",accept:"image/*",onChange:async e=>{var s;const a=null==(s=e.target.files)?void 0:s[0];if(a)if(a.type.startsWith("image/"))if(a.size>10485760)alert("Image must be less than 10MB");else{ne(!0);try{const e=await ve(a),s=await P(t.id,e);s?je({...fe,avatar:s}):alert("Failed to upload image")}catch(r){alert("Failed to upload image")}finally{ne(!1)}}else alert("Please select an image file")},className:"hidden"})]}),s.jsxs("div",{className:"flex-1 space-y-4 w-full",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Full Name"}),s.jsx("input",{type:"text",value:fe.name,onChange:e=>je({...fe,name:e.target.value}),className:"w-full bg-slate-950 border border-slate-800 rounded-2xl px-6 py-3 text-white outline-none focus:border-indigo-500"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Location"}),s.jsx("input",{type:"text",value:fe.location,onChange:e=>je({...fe,location:e.target.value}),className:"w-full bg-slate-950 border border-slate-800 rounded-2xl px-6 py-3 text-white outline-none focus:border-indigo-500",placeholder:"City, Country"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Biography"}),s.jsx("textarea",{value:fe.bio,onChange:e=>je({...fe,bio:e.target.value}),className:"w-full bg-slate-950 border border-slate-800 rounded-3xl px-6 py-4 text-white outline-none focus:border-indigo-500 min-h-[120px]",placeholder:"Tell the world about yourself..."})]}),we?s.jsxs("div",{className:"p-8 bg-indigo-600/5 border border-indigo-500/20 rounded-[40px] space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(g,{className:"w-5 h-5 text-indigo-400"}),s.jsx("h3",{className:"font-black text-sm uppercase tracking-widest",children:"Nexus Elite Customization"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Theme Primary Color"}),s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsx("input",{type:"color",value:(null==(p=fe.branding)?void 0:p.primaryColor)||"#6366f1",onChange:e=>{var t;return je({...fe,branding:{...fe.branding,primaryColor:e.target.value,accentColor:(null==(t=fe.branding)?void 0:t.accentColor)||"#818cf8"}})},className:"w-12 h-12 rounded-xl bg-transparent border-none cursor-pointer"}),s.jsx("span",{className:"font-mono text-xs text-slate-400",children:null==(z=fe.branding)?void 0:z.primaryColor})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Banner Image"}),s.jsxs("div",{className:"flex items-center gap-4",children:[(null==(R=fe.branding)?void 0:R.bannerUrl)&&s.jsx("img",{src:fe.branding.bannerUrl,alt:"Banner preview",className:"w-32 h-10 object-cover rounded-lg border border-slate-700"}),s.jsxs("label",{className:"flex-1 cursor-pointer",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 px-4 py-3 bg-slate-900 border border-slate-700 rounded-xl hover:border-indigo-500 transition-all",children:[s.jsx(V,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:oe?"Uploading...":(null==(A=fe.branding)?void 0:A.bannerUrl)?"Change Banner":"Upload Banner"})]}),s.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:async e=>{var s,a,r;const l=null==(s=e.target.files)?void 0:s[0];if(l)if(l.type.startsWith("image/"))if(l.size>10485760)alert("Image must be less than 10MB");else{de(!0);try{const e=await Ne(l),s=await F(t.id,e);s?je({...fe,branding:{...fe.branding,bannerUrl:s,primaryColor:(null==(a=fe.branding)?void 0:a.primaryColor)||"#6366f1",accentColor:(null==(r=fe.branding)?void 0:r.accentColor)||"#818cf8"}}):alert("Failed to upload banner image")}catch(i){alert("Failed to upload banner image")}finally{de(!1)}}else alert("Please select an image file")},disabled:oe})]})]}),s.jsx("p",{className:"text-xs text-slate-500 ml-1",children:"Recommended: 1200Ã—400px, max 10MB (auto-compressed)"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Public Tagline"}),s.jsx("input",{type:"text",value:null==(T=fe.branding)?void 0:T.tagline,onChange:e=>{var t,s;return je({...fe,branding:{...fe.branding,tagline:e.target.value,primaryColor:(null==(t=fe.branding)?void 0:t.primaryColor)||"#6366f1",accentColor:(null==(s=fe.branding)?void 0:s.accentColor)||"#818cf8"}})},className:"w-full bg-slate-950 border border-slate-800 rounded-2xl px-6 py-3 text-white outline-none focus:border-indigo-500 text-sm",placeholder:"One line to define your brand"})]})]}):s.jsxs("div",{className:"p-8 bg-slate-800/20 border border-slate-800 rounded-[40px] text-center space-y-4",children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Upgrade to Pro to unlock custom colors, banners, and verified branding on your profile."}),s.jsx("button",{className:"text-indigo-400 font-black text-[10px] uppercase tracking-widest hover:underline",children:"View Plans"})]}),s.jsxs("div",{className:"flex gap-4 pt-4",children:[s.jsx("button",{onClick:()=>q(!1),className:"flex-1 py-4 rounded-2xl bg-slate-800 text-slate-400 font-black text-xs uppercase tracking-widest",children:"Cancel"}),s.jsxs("button",{onClick:()=>{o(fe),q(!1)},className:"flex-1 py-4 rounded-2xl bg-indigo-600 text-white font-black text-xs uppercase tracking-widest shadow-xl shadow-indigo-600/20 flex items-center justify-center gap-2",children:[s.jsx(m,{className:"w-4 h-4"})," Save Changes"]})]})]})]})})]})]})};
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */export{Z as default};
