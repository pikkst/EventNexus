const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/socialAuthHelper-CEhnL7SY.js","assets/qr-BITZ6EfA.js","assets/index-b309e1nc.js","assets/charts-0jYrCXCa.js","assets/index-BHD_3q4q.css"])))=>i.map(i=>d[i]);
import{_ as e}from"./qr-BITZ6EfA.js";import{c as t,s,j as a,P as l,G as r,m as i,X as n,E as c,ag as d,ah as o,O as x,q as m,x as h,ai as p,aj as u,ak as g,e as b,h as j,p as f,ab as y,Z as N,al as v,am as w,w as k,an as _,ao as C,ap as S,aq as A,ar as I,Q as T,as as z,at as M,au as P,av as R,a2 as O,aw as E,ax as L,ay as D,az as F,aA as $,aB as U,aC as B,aD as G,aE as q,aF as J,f as W,aG as H,aH as Y,D as K,M as V,a3 as Z,aI as X,aJ as Q,aK as ee,aL as te,aM as se,aN as ae,aO as le,aP as re,aQ as ie,aR as ne,aS as ce,aT as de,aU as oe,aV as xe,aW as me,aX as he}from"./index-b309e1nc.js";import{b as pe,d as ue,L as ge,C as be,X as je,Y as fe,T as ye,f as Ne,h as ve,A as we,e as ke,B as _e,i as Ce,j as Se,R as Ae,P as Ie,k as Te,l as ze}from"./charts-0jYrCXCa.js";import{e as Me,G as Pe,f as Re,g as Oe}from"./geminiService-DURgciVI.js";import{C as Ee}from"./code-BJlMwBF-.js";import{S as Le}from"./search-Bhl9FGOw.js";import{E as De}from"./eye-DUeTJBJd.js";import{C as Fe}from"./clock-Cnt1qgag.js";import{R as $e}from"./refresh-cw-hkacKNH8.js";import{T as Ue,S as Be,L as Ge}from"./triangle-alert-CxxnQicr.js";import{F as qe,C as Je,A as We,M as He,D as Ye}from"./megaphone-1m6_Q5hP.js";import{D as Ke}from"./download-B9c36Fle.js";import{M as Ve}from"./message-square-CNN38snK.js";import{C as Ze}from"./circle-check-big-BVKQvehI.js";import{C as Xe}from"./circle-x-6_o0yPnH.js";import{C as Qe}from"./circle-alert-_cpfBv0g.js";import{G as et}from"./ai-DHVDkxo7.js";import{L as tt,E as st}from"./lightbulb-BgcNqA9y.js";import{C as at}from"./circle-check-CSkpwwxu.js";import{B as lt,C as rt,a as it}from"./credit-card-LHnZpxiq.js";import{S as nt}from"./share-2-ytQz_KfA.js";import{I as ct}from"./info-DS4ltxwt.js";import{SimplifiedSocialMediaManager as dt}from"./SimplifiedSocialMediaManager-CNnq1CE-.js";import{L as ot}from"./loader-GWe7--jB.js";import{C as xt}from"./copy-Qt2RpJVI.js";import{S as mt}from"./save-BMNvfd6I.js";import{R as ht}from"./rocket-D9Rxxq60.js";
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=t("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),ut=t("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]),gt=t("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),bt=t("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]),jt=t("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),ft=t("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),yt=t("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),Nt=t("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]),vt=t("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),wt=t("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),kt=t("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),_t=t("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),Ct=t("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]),St=t("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]),At=t("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),It=t("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),Tt=t("MousePointerClick",[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]]),zt=t("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]),Mt=t("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]),Pt=t("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),Rt=t("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),Ot=t("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),Et=t("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Lt=t("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),Dt=t("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Ft=t("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),$t=t("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),Ut="https://anlivujgkjmajkcgbaxw.supabase.co";
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */async function Bt(){try{const{data:e,error:t}=await s.from("brand_monitoring_alerts").select("*").neq("status","deleted").order("timestamp",{ascending:!1});if(t)throw t;return(null==e?void 0:e.map(e=>({...e,timestamp:new Date(e.timestamp)})))||[]}catch(e){return[]}}async function Gt(){try{const{data:e,error:t}=await s.from("monitoring_stats").select("*").limit(1);if(t)throw t;return e&&e.length>0?{...e[0],lastScanTime:new Date(e[0].last_scan_time)}:null}catch(e){return null}}async function qt(e,t,a){try{const{error:l}=await s.from("brand_monitoring_alerts").update({status:t,action_taken:a}).eq("id",e);if(l)throw l;return!0}catch(l){return!1}}async function Jt(e){try{const{error:t}=await s.from("brand_monitoring_alerts").update({status:"deleted",action_taken:"Deleted by admin"}).eq("id",e);if(t)throw t;return!0}catch(t){return!1}}async function Wt(e){try{const{data:t,error:a}=await s.from("brand_monitoring_notes").select("*, created_by:users(email)").eq("alert_id",e).order("created_at",{ascending:!1});if(a)throw a;return t||[]}catch(t){return[]}}async function Ht(){try{const{error:e}=await s.rpc("snapshot_daily_stats");if(e)throw e;return!0}catch(e){return!1}}function Yt({user:e}){const[t,d]=pe.useState("overview"),[o,x]=pe.useState([]),[m,h]=pe.useState([]),[p,u]=pe.useState(null),[g,b]=pe.useState(!1),[j,f]=pe.useState(null),[y,N]=pe.useState(null),[v,w]=pe.useState(!1),[k,_]=pe.useState(null),[C,S]=pe.useState(!1),[A,I]=pe.useState(!1),[T,z]=pe.useState(new Set),[M,P]=pe.useState("all"),[R,O]=pe.useState("all"),[E,L]=pe.useState("all"),[D,F]=pe.useState("newest"),[$,U]=pe.useState(""),[B,G]=pe.useState(!1),[q,J]=pe.useState(null),[W,H]=pe.useState(""),[Y,K]=pe.useState(!1),[V,Z]=pe.useState(null),[X,Q]=pe.useState([]),[ee,te]=pe.useState(""),[se,ae]=pe.useState([]);pe.useEffect(()=>{le(),re(),ie(),"history"===t&&ne()},[t]);const le=async()=>{b(!0);try{const[e,t]=await Promise.all([Bt(),Gt()]),s={codeScans:0,domainChecks:0,brandMentions:0,searchResults:0,socialMentions:0,competitorAlerts:0,criticalAlerts:0,warningAlerts:0,infoAlerts:0,lastScanTime:new Date};x(e),u(t||s),f((null==t?void 0:t.lastScanTime)||new Date)}catch(e){}finally{b(!1)}},re=async()=>{try{const e=await async function(){var e;try{const t=await fetch(`${Ut}/functions/v1/brand-monitoring`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${null==(e=(await s.auth.getSession()).data.session)?void 0:e.access_token}`},body:JSON.stringify({action:"get-domain-info"})});if(!t.ok)throw new Error(`HTTP ${t.status}`);return(await t.json()).domainInfo||null}catch(t){return null}}();N(e)}catch(e){}},ie=async()=>{try{const e=(await async function(e=30){try{const{data:t,error:a}=await s.rpc("get_alert_trends",{days:e});if(a)throw a;return t||[]}catch(t){return[]}}(30)).reverse().map(e=>({date:new Date(e.date).toLocaleDateString("en-GB",{month:"short",day:"numeric"}),Total:e.total||0,Critical:e.critical||0,Warnings:e.warnings||0}));ae(e)}catch(e){ae([])}},ne=async()=>{b(!0);try{const e=await async function(e=["resolved","deleted"]){try{const{data:t,error:a}=await s.from("brand_monitoring_alerts").select("*").in("status",e).order("timestamp",{ascending:!1}).limit(100);if(a)throw a;return(null==t?void 0:t.map(e=>({...e,timestamp:new Date(e.timestamp)})))||[]}catch(t){return[]}}(["resolved","deleted"]);h(e)}catch(e){h([])}finally{b(!1)}},ce=async e=>{b(!0);try{let t=[];switch(e){case"code":t=await async function(){try{const{data:{session:e}}=await s.auth.getSession();if(!e)throw new Error("Not authenticated");const t=await fetch(`${Ut}/functions/v1/brand-monitoring`,{method:"POST",headers:{Authorization:`Bearer ${e.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({action:"scan-code"})});if(!t.ok)throw new Error("Failed to scan GitHub");return(await t.json()).alerts||[]}catch(e){return[]}}();break;case"domain":t=await async function(){try{const{data:{session:e}}=await s.auth.getSession();if(!e)throw new Error("Not authenticated");const t=await fetch(`${Ut}/functions/v1/brand-monitoring`,{method:"POST",headers:{Authorization:`Bearer ${e.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({action:"scan-domain"})});if(!t.ok)throw new Error("Failed to scan domains");return(await t.json()).alerts||[]}catch(e){return[]}}();break;case"brand":t=await async function(){try{const{data:{session:e}}=await s.auth.getSession();if(!e)throw new Error("Not authenticated");const t=await fetch(`${Ut}/functions/v1/brand-monitoring`,{method:"POST",headers:{Authorization:`Bearer ${e.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({action:"scan-brand"})});if(!t.ok)throw new Error("Failed to scan brand");return(await t.json()).alerts||[]}catch(e){return[]}}();break;case"search":t=await async function(){try{const{data:{session:e}}=await s.auth.getSession();if(!e)throw new Error("Not authenticated");const t=await fetch(`${Ut}/functions/v1/brand-monitoring`,{method:"POST",headers:{Authorization:`Bearer ${e.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({action:"scan-search"})});if(!t.ok)throw new Error("Failed to scan search engines");return(await t.json()).alerts||[]}catch(e){return[]}}();break;case"social":t=await async function(){try{const{data:{session:e}}=await s.auth.getSession();if(!e)throw new Error("Not authenticated");const t=await fetch(`${Ut}/functions/v1/brand-monitoring`,{method:"POST",headers:{Authorization:`Bearer ${e.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({action:"scan-social"})});if(!t.ok)throw new Error("Failed to scan social media");return(await t.json()).alerts||[]}catch(e){return[]}}();break;case"competitors":t=await async function(){try{const{data:{session:e}}=await s.auth.getSession();if(!e)throw new Error("Not authenticated");const t=await fetch(`${Ut}/functions/v1/brand-monitoring`,{method:"POST",headers:{Authorization:`Bearer ${e.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({action:"scan-competitors"})});if(!t.ok)throw new Error("Failed to analyze competitors");return(await t.json()).alerts||[]}catch(e){return[]}}();break;case"comprehensive":const e=await async function(){try{const{data:{session:e}}=await s.auth.getSession();if(!e)throw new Error("Not authenticated");const t=await fetch(`${Ut}/functions/v1/brand-monitoring`,{method:"POST",headers:{Authorization:`Bearer ${e.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({action:"comprehensive"})});if(!t.ok)throw new Error("Failed to run comprehensive scan");const a=(await t.json()).alerts||[],l={codeScans:a.filter(e=>"code"===e.type).length,domainChecks:a.filter(e=>"domain"===e.type).length,brandMentions:a.filter(e=>"brand"===e.type).length,searchResults:a.filter(e=>"search"===e.type).length,socialMentions:a.filter(e=>"social"===e.type).length,competitorAlerts:a.filter(e=>"competitor"===e.type).length,criticalAlerts:a.filter(e=>"critical"===e.severity).length,warningAlerts:a.filter(e=>"warning"===e.severity).length,infoAlerts:a.filter(e=>"info"===e.severity).length,lastScanTime:new Date};return{alerts:a,stats:l}}catch(e){throw e}}();return x(e.alerts),u(e.stats),void f(e.stats.lastScanTime)}await Promise.all([le(),ie(),Ht()])}catch(t){}finally{b(!1)}},de=async(e,t,s)=>{await qt(e,t,s)&&await le()},oe=()=>{T.size===o.length?z(new Set):z(new Set(o.map(e=>e.id)))},xe=async e=>{const t=Array.from(T);if(0!==t.length){b(!0);try{for(const s of t)"investigate"===e?await qt(s,"investigating","Bulk investigation"):"resolve"===e?await qt(s,"resolved","Bulk resolved"):"delete"===e&&await Jt(s);z(new Set),await le()}catch(s){}finally{b(!1)}}},me=async()=>{S(!0);try{const e=await Me(o,p);_(e),w(!0)}catch(e){}finally{S(!1)}},he=e=>{switch(e){case"critical":return"text-red-500 bg-red-500/10 border-red-500/20";case"warning":return"text-yellow-500 bg-yellow-500/10 border-yellow-500/20";case"info":return"text-blue-500 bg-blue-500/10 border-blue-500/20";default:return"text-gray-500 bg-gray-500/10 border-gray-500/20"}},we=()=>{let e=o;if("all"!==M&&(e=e.filter(e=>e.type===M)),"all"!==R&&(e=e.filter(e=>e.severity===R)),"all"!==E&&(e=e.filter(e=>e.status===E)),$){const t=$.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.url&&e.url.toLowerCase().includes(t))}return[...e].sort((e,t)=>{switch(D){case"severity":const s={critical:0,warning:1,info:2};return(s[e.severity]||3)-(s[t.severity]||3);case"type":return e.type.localeCompare(t.type);default:return new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()}})},ke=e=>{switch(e){case"open":return"text-red-500";case"investigating":return"text-yellow-500";case"resolved":return"text-green-500";default:return"text-gray-500"}},_e=[{id:"overview",label:"Overview",icon:pt},{id:"code",label:"Code Protection",icon:Ee},{id:"domain",label:"Domain Monitoring",icon:r},{id:"brand",label:"Brand Protection",icon:l},{id:"search",label:"Search Monitoring",icon:Le},{id:"social",label:"Social Media",icon:De},{id:"competitors",label:"Competitors",icon:i},{id:"history",label:"History",icon:Fe}];return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900/20 to-gray-900 text-white p-6",children:[a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(l,{className:"w-8 h-8 text-purple-500"}),a.jsx("h1",{className:"text-3xl font-bold",children:"Brand Protection Monitor"})]}),a.jsx("p",{className:"text-gray-400",children:"Comprehensive platform and brand protection monitoring tools"}),j&&a.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Last updated: ",j.toLocaleString()]})]}),a.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:_e.map(e=>{const s=e.icon;return a.jsxs("button",{onClick:()=>d(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-lg whitespace-nowrap transition-colors "+(t===e.id?"bg-purple-500 text-white":"bg-gray-800/50 text-gray-400 hover:bg-gray-700/50"),children:[a.jsx(s,{className:"w-4 h-4"}),e.label]},e.id)})}),g&&"overview"!==t&&a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx($e,{className:"w-8 h-8 text-purple-500 animate-spin"})}),!g&&a.jsxs(a.Fragment,{children:["overview"===t&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-purple-500/10 to-blue-500/10 border border-purple-500/20 rounded-xl p-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Comprehensive Security Scan"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Run all monitoring checks (Code, Domain, Search, Brand)"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:me,disabled:C||0===o.length,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 disabled:from-gray-600 disabled:to-gray-600 text-white rounded-lg transition-all font-semibold",children:[a.jsx(qe,{className:"w-5 h-5 "+(C?"animate-pulse":"")}),C?"Generating...":"AI Report"]}),a.jsxs("button",{onClick:()=>ce("comprehensive"),disabled:g,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 disabled:from-gray-600 disabled:to-gray-600 text-white rounded-lg transition-all font-semibold",children:[a.jsx($e,{className:"w-5 h-5 "+(g?"animate-spin":"")}),g?"Scanning...":"Run Full Scan"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-purple-500/10 border border-blue-500/20 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(Ee,{className:"w-8 h-8 text-blue-500"}),a.jsx(i,{className:"w-5 h-5 text-blue-400"})]}),a.jsx("p",{className:"text-2xl font-bold text-white mb-1",children:(null==p?void 0:p.codeScans)||0}),a.jsx("p",{className:"text-sm text-gray-400",children:"Code Scans"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-500/10 to-emerald-500/10 border border-green-500/20 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(r,{className:"w-8 h-8 text-green-500"}),a.jsx(pt,{className:"w-5 h-5 text-green-400"})]}),a.jsx("p",{className:"text-2xl font-bold text-white mb-1",children:(null==p?void 0:p.domainChecks)||0}),a.jsx("p",{className:"text-sm text-gray-400",children:"Domain Checks"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-pink-500/10 border border-purple-500/20 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(l,{className:"w-8 h-8 text-purple-500"}),a.jsx(De,{className:"w-5 h-5 text-purple-400"})]}),a.jsx("p",{className:"text-2xl font-bold text-white mb-1",children:(null==p?void 0:p.brandMentions)||0}),a.jsx("p",{className:"text-sm text-gray-400",children:"Brand Mentions"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-500/10 to-orange-500/10 border border-yellow-500/20 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(Ue,{className:"w-8 h-8 text-yellow-500"}),a.jsx(pt,{className:"w-5 h-5 text-yellow-400"})]}),a.jsx("p",{className:"text-2xl font-bold text-white mb-1",children:((null==p?void 0:p.criticalAlerts)||0)+((null==p?void 0:p.warningAlerts)||0)}),a.jsx("p",{className:"text-sm text-gray-400",children:"Active Alerts"})]})]}),a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Alert Summary"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-red-500 mb-1",children:(null==p?void 0:p.criticalAlerts)||0}),a.jsx("div",{className:"text-sm text-gray-400",children:"Critical"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-yellow-500 mb-1",children:(null==p?void 0:p.warningAlerts)||0}),a.jsx("div",{className:"text-sm text-gray-400",children:"Warnings"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-blue-500 mb-1",children:(null==p?void 0:p.infoAlerts)||0}),a.jsx("div",{className:"text-sm text-gray-400",children:"Info"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-emerald-500/10 to-green-500/10 border border-emerald-500/20 rounded-xl p-5",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(i,{className:"w-6 h-6 text-emerald-400"}),a.jsx("h4",{className:"font-semibold text-white",children:"This Week"})]}),a.jsx("p",{className:"text-2xl font-bold text-white mb-1",children:o.filter(e=>Math.floor(((new Date).getTime()-new Date(e.timestamp).getTime())/864e5)<=7).length}),a.jsx("p",{className:"text-xs text-gray-400",children:"New alerts this week"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-indigo-500/10 border border-blue-500/20 rounded-xl p-5",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Fe,{className:"w-6 h-6 text-blue-400"}),a.jsx("h4",{className:"font-semibold text-white",children:"Avg Response"})]}),a.jsx("p",{className:"text-2xl font-bold text-white mb-1",children:o.filter(e=>"open"!==e.status).length>0?Math.round(o.filter(e=>"open"!==e.status).reduce((e,t)=>{const s=new Date(t.timestamp).getTime();return e+(new Date(t.updated_at||t.timestamp).getTime()-s)/36e5},0)/o.filter(e=>"open"!==e.status).length)+"h":"N/A"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Average response time"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-500/10 to-red-500/10 border border-orange-500/20 rounded-xl p-5",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Ue,{className:"w-6 h-6 text-orange-400"}),a.jsx("h4",{className:"font-semibold text-white",children:"Open > 7 days"})]}),a.jsx("p",{className:"text-2xl font-bold text-white mb-1",children:o.filter(e=>{const t=Math.floor(((new Date).getTime()-new Date(e.timestamp).getTime())/864e5);return"open"===e.status&&t>7}).length}),a.jsx("p",{className:"text-xs text-gray-400",children:"Require attention"})]})]}),se.length>0&&a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx(pt,{className:"w-5 h-5 text-purple-400"}),"30-Day Trend Analysis"]}),a.jsx(ue,{width:"100%",height:300,children:a.jsxs(ge,{data:se,children:[a.jsx(be,{strokeDasharray:"3 3",stroke:"#374151"}),a.jsx(je,{dataKey:"date",stroke:"#9CA3AF",style:{fontSize:"12px"}}),a.jsx(fe,{stroke:"#9CA3AF",style:{fontSize:"12px"}}),a.jsx(ye,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px",color:"#fff"}}),a.jsx(Ne,{wrapperStyle:{color:"#9CA3AF"}}),a.jsx(ve,{type:"monotone",dataKey:"Total",stroke:"#8B5CF6",strokeWidth:2,dot:{fill:"#8B5CF6",r:3}}),a.jsx(ve,{type:"monotone",dataKey:"Critical",stroke:"#EF4444",strokeWidth:2,dot:{fill:"#EF4444",r:3}}),a.jsx(ve,{type:"monotone",dataKey:"Warnings",stroke:"#F59E0B",strokeWidth:2,dot:{fill:"#F59E0B",r:3}})]})})]}),0===o.length&&a.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(Ue,{className:"w-6 h-6 text-blue-400 flex-shrink-0 mt-1"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"API Integration Required"}),a.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"This monitoring dashboard requires API integrations with third-party services. Configure the following in Supabase Edge Function Secrets:"}),a.jsxs("ul",{className:"text-sm text-gray-400 space-y-2 ml-4",children:[a.jsxs("li",{children:["• ",a.jsx("code",{className:"text-blue-400",children:"GITHUB_TOKEN"})," - GitHub API access for code monitoring"]}),a.jsxs("li",{children:["• ",a.jsx("code",{className:"text-blue-400",children:"WHOIS_API_KEY"})," - WHOIS service for domain monitoring"]}),a.jsxs("li",{children:["• ",a.jsx("code",{className:"text-blue-400",children:"GOOGLE_SEARCH_KEY"})," - Google Custom Search API"]}),a.jsxs("li",{children:["• ",a.jsx("code",{className:"text-blue-400",children:"TWITTER_BEARER_TOKEN"})," - Twitter API for social monitoring"]})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-4",children:["Configure via: ",a.jsx("code",{className:"text-blue-400",children:"supabase secrets set SECRET_NAME=value"})]})]})]})}),a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[o.length>0&&a.jsx("div",{className:"mb-4 space-y-3",children:a.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[a.jsx("div",{className:"flex-1 min-w-[200px]",children:a.jsxs("div",{className:"relative",children:[a.jsx(Le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search alerts...",value:$,onChange:e=>U(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-purple-500"})]})}),a.jsxs("select",{value:M,onChange:e=>P(e.target.value),className:"px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500",children:[a.jsx("option",{value:"all",children:"All Types"}),a.jsx("option",{value:"code",children:"Code"}),a.jsx("option",{value:"domain",children:"Domain"}),a.jsx("option",{value:"brand",children:"Brand"}),a.jsx("option",{value:"search",children:"Search"}),a.jsx("option",{value:"social",children:"Social"}),a.jsx("option",{value:"competitor",children:"Competitor"})]}),a.jsxs("select",{value:R,onChange:e=>O(e.target.value),className:"px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500",children:[a.jsx("option",{value:"all",children:"All Severity"}),a.jsx("option",{value:"critical",children:"Critical"}),a.jsx("option",{value:"warning",children:"Warning"}),a.jsx("option",{value:"info",children:"Info"})]}),a.jsxs("select",{value:E,onChange:e=>L(e.target.value),className:"px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"open",children:"Open"}),a.jsx("option",{value:"investigating",children:"Investigating"}),a.jsx("option",{value:"resolved",children:"Resolved"}),a.jsx("option",{value:"dismissed",children:"Dismissed"})]}),a.jsxs("select",{value:D,onChange:e=>F(e.target.value),className:"px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500",children:[a.jsx("option",{value:"newest",children:"Newest First"}),a.jsx("option",{value:"severity",children:"By Severity"}),a.jsx("option",{value:"type",children:"By Type"})]})]})}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Recent Alerts",("all"!==M||"all"!==R||"all"!==E||$)&&a.jsxs("span",{className:"ml-2 text-sm text-gray-400",children:["(",we().length," filtered)"]})]}),a.jsx("div",{className:"flex items-center gap-3",children:o.length>0&&a.jsxs(a.Fragment,{children:[T.size>0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-sm text-gray-400",children:[T.size," selected"]}),a.jsx("button",{onClick:()=>xe("investigate"),disabled:g,className:"px-3 py-1.5 text-xs bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-400 border border-yellow-500/30 rounded transition-colors disabled:opacity-50",children:"Investigate All"}),a.jsx("button",{onClick:()=>xe("resolve"),disabled:g,className:"px-3 py-1.5 text-xs bg-green-500/20 hover:bg-green-500/30 text-green-400 border border-green-500/30 rounded transition-colors disabled:opacity-50",children:"Resolve All"}),a.jsx("button",{onClick:()=>xe("delete"),disabled:g,className:"px-3 py-1.5 text-xs bg-red-500/20 hover:bg-red-500/30 text-red-400 border border-red-500/30 rounded transition-colors disabled:opacity-50",children:"Delete All"})]}),o.length>5&&a.jsx("button",{onClick:()=>I(!A),className:"px-4 py-2 text-sm bg-purple-500/20 hover:bg-purple-500/30 text-purple-400 border border-purple-500/30 rounded-lg transition-colors",children:A?"Show Less":`Show All (${o.length})`})]})})]}),0===o.length?a.jsxs("div",{className:"text-center py-8 text-gray-400",children:[a.jsx(l,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No alerts detected yet. Run a scan to start monitoring."})]}):0===we().length?a.jsxs("div",{className:"text-center py-8 text-gray-400",children:[a.jsx(wt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No alerts match your filters."}),a.jsx("button",{onClick:()=>{P("all"),O("all"),L("all"),U("")},className:"mt-3 text-sm text-purple-400 hover:text-purple-300",children:"Clear Filters"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4 pb-3 border-b border-gray-700",children:[a.jsx("input",{type:"checkbox",checked:T.size===we().length&&we().length>0,onChange:oe,className:"w-4 h-4 rounded border-gray-600 bg-gray-700 text-purple-500 focus:ring-purple-500 focus:ring-offset-gray-900"}),a.jsxs("label",{className:"text-sm text-gray-400 cursor-pointer",onClick:oe,children:["Select All (",we().length," alerts)"]})]}),a.jsx("div",{className:"space-y-3 max-h-[600px] overflow-y-auto",children:(A?we():we().slice(0,5)).map(e=>a.jsxs("div",{className:`border rounded-lg p-4 ${he(e.severity)}`,children:[a.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[a.jsx("input",{type:"checkbox",checked:T.has(e.id),onChange:()=>(e=>{const t=new Set(T);t.has(e)?t.delete(e):t.add(e),z(t)})(e.id),className:"mt-1 w-4 h-4 rounded border-gray-600 bg-gray-700 text-purple-500 focus:ring-purple-500 focus:ring-offset-gray-900 cursor-pointer"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:`text-sm font-medium ${ke(e.status)}`,children:e.status.toUpperCase()}),a.jsx("span",{className:"text-xs text-gray-400",children:new Date(e.timestamp).toLocaleString()})]}),a.jsx("h4",{className:"font-semibold text-white mb-1",children:e.title}),a.jsx("p",{className:"text-sm text-gray-300",children:e.description})]}),e.url&&a.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"ml-2",children:a.jsx(c,{className:"w-5 h-5 text-gray-400 hover:text-white transition-colors"})})]}),e.actionTaken&&a.jsxs("div",{className:"mt-2 text-xs text-gray-400 italic",children:["Action: ",e.actionTaken]}),a.jsxs("div",{className:"mt-3 flex items-center gap-2",children:["open"===e.status&&a.jsx("button",{onClick:()=>de(e.id,"investigating","Under investigation"),className:"px-3 py-1 text-xs bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-400 border border-yellow-500/30 rounded transition-colors",children:"Investigate"}),"resolved"!==e.status&&a.jsx("button",{onClick:()=>de(e.id,"resolved","Reviewed and resolved"),className:"px-3 py-1 text-xs bg-green-500/20 hover:bg-green-500/30 text-green-400 border border-green-500/30 rounded transition-colors",children:"Resolve"}),a.jsx("button",{onClick:()=>(async e=>{await Jt(e)&&await le()})(e.id),className:"px-3 py-1 text-xs bg-red-500/20 hover:bg-red-500/30 text-red-400 border border-red-500/30 rounded transition-colors",children:"Delete"}),a.jsxs("button",{onClick:()=>(async e=>{Z(e),K(!0),te("");try{const t=await Wt(e.id);Q(t)}catch(t){Q([])}})(e),className:"px-3 py-1 text-xs bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 border border-blue-500/30 rounded transition-colors flex items-center gap-1",children:[a.jsx(Ve,{className:"w-3 h-3"}),"Notes"]}),a.jsxs("button",{onClick:()=>{J(e),G(!0)},className:"px-3 py-1 text-xs bg-gray-500/20 hover:bg-gray-500/30 text-gray-300 border border-gray-500/30 rounded transition-colors flex items-center gap-1",children:[a.jsx(gt,{className:"w-3 h-3"}),"Whitelist"]})]})]},e.id))})]})]})]}),"code"===t&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Code Similarity Detection"}),a.jsxs("button",{onClick:()=>ce("code"),disabled:g,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded-lg transition-colors",children:[a.jsx($e,{className:"w-4 h-4 "+(g?"animate-spin":"")}),g?"Scanning...":"Scan Now"]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border border-gray-700 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-white mb-2",children:"GitHub Repository Monitoring"}),a.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Scans GitHub for repositories with similar code to EventNexus"}),a.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[a.jsxs("span",{className:"text-gray-300",children:["Last scan: ",(null==j?void 0:j.toLocaleTimeString())||"Never"]}),a.jsxs("span",{className:o.filter(e=>"code"===e.type&&"github_scan"===e.detected_by).length>0?"text-yellow-500":"text-green-500",children:[o.filter(e=>"code"===e.type&&"github_scan"===e.detected_by).length," repositories found"]})]})]}),a.jsxs("div",{className:"border border-gray-700 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-white mb-2",children:"Package Registry Monitoring"}),a.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Checks npm & PyPI for typosquatting packages (FREE)"}),a.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[a.jsxs("span",{className:"text-gray-300",children:["Last scan: ",(null==j?void 0:j.toLocaleTimeString())||"Never"]}),a.jsxs("span",{className:o.filter(e=>{var t;return null==(t=e.detected_by)?void 0:t.includes("registry")}).length>0?"text-yellow-500":"text-green-500",children:[o.filter(e=>{var t;return null==(t=e.detected_by)?void 0:t.includes("registry")}).length," suspicious packages"]})]})]}),a.jsxs("div",{className:"border border-gray-700 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-white mb-2",children:"Certificate Transparency Logs"}),a.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Monitors SSL certificates issued for EventNexus-related domains (FREE)"}),a.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[a.jsxs("span",{className:"text-gray-300",children:["Last scan: ",(null==j?void 0:j.toLocaleTimeString())||"Never"]}),a.jsxs("span",{className:o.filter(e=>"cert_transparency"===e.detected_by).length>0?"text-yellow-500":"text-green-500",children:[o.filter(e=>"cert_transparency"===e.detected_by).length," certificates found"]})]})]})]})]})}),"domain"===t&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Domain & WHOIS Monitoring"}),a.jsxs("button",{onClick:()=>ce("domain"),disabled:g,className:"flex items-center gap-2 px-4 py-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-600 text-white rounded-lg transition-colors",children:[a.jsx($e,{className:"w-4 h-4 "+(g?"animate-spin":"")}),"Check Domains"]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border border-green-500/20 bg-green-500/10 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-white",children:"eventnexus.eu (Primary)"}),a.jsx(Ze,{className:"w-5 h-5 text-green-500"})]}),y?a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mt-3",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Status:"}),a.jsx("span",{className:"ml-2 "+("active"===y.status?"text-green-500":"text-yellow-500"),children:"active"===y.status?"Active & Protected":"Checking..."})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"SSL Expires:"}),a.jsx("span",{className:"text-white ml-2",children:(null==(Ce=y.ssl)?void 0:Ce.expiry)?new Date(y.ssl.expiry).toLocaleDateString():"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Registrar:"}),a.jsx("span",{className:"text-white ml-2",children:y.registrar||"EURid"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"SSL:"}),a.jsx("span",{className:"ml-2 "+((null==(Se=y.ssl)?void 0:Se.valid)?"text-green-500":"text-red-500"),children:(null==(Ae=y.ssl)?void 0:Ae.valid)?"Valid":"Invalid"})]}),(null==(Ie=y.ssl)?void 0:Ie.issuer)&&a.jsxs("div",{className:"col-span-2",children:[a.jsx("span",{className:"text-gray-400",children:"Certificate Issuer:"}),a.jsx("span",{className:"text-white ml-2 text-xs",children:y.ssl.issuer})]})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx($e,{className:"w-5 h-5 animate-spin text-gray-400 mx-auto"}),a.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Loading domain info..."})]})]}),a.jsxs("div",{className:"border border-gray-700 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-white mb-2",children:"Typosquatting Detection"}),a.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Monitors for similar domain registrations (eventnexuss.com, evetnexus.eu, etc.)"}),a.jsx("div",{className:"space-y-2 mt-3",children:a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-300",children:"Monitored via URLScan.io & DNS"}),a.jsxs("span",{className:"text-yellow-500",children:[o.filter(e=>"domain"===e.type&&"warning"===e.severity).length," suspicious"]})]})})]}),a.jsxs("div",{className:"border border-gray-700 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-white mb-2",children:"WHOIS Change Detection"}),a.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Alerts on WHOIS record changes for monitored domains"}),a.jsx("div",{className:"flex items-center gap-4 text-sm",children:a.jsx("span",{className:"text-green-500",children:"✓ No changes detected"})})]})]})]})}),"brand"===t&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Brand Protection Services"}),a.jsxs("button",{onClick:()=>ce("brand"),disabled:g,className:"flex items-center gap-2 px-4 py-2 bg-purple-500 hover:bg-purple-600 disabled:bg-gray-600 text-white rounded-lg transition-colors",children:[a.jsx($e,{className:"w-4 h-4 "+(g?"animate-spin":"")}),"Scan Brands"]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border border-gray-700 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-white mb-2",children:"Trademark Monitoring"}),a.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Manual monitoring of trademark offices (EUIPO, USPTO, WIPO)"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mt-3",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Brand alerts:"}),a.jsx("span",{className:"text-white ml-2",children:o.filter(e=>"brand"===e.type).length})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Status:"}),a.jsx("span",{className:"text-gray-400 ml-2",children:"Manual review required"})]})]})]}),a.jsxs("div",{className:"border border-gray-700 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-white mb-2",children:"Logo & Asset Protection"}),a.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Reverse image search monitoring via scanBrand()"}),a.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[a.jsxs("span",{className:"text-gray-300",children:["Last scan: ",(null==j?void 0:j.toLocaleTimeString())||"Never"]}),a.jsxs("span",{className:"text-gray-400",children:[o.filter(e=>{var t;return"brand"===e.type&&(null==(t=e.title)?void 0:t.includes("logo"))}).length," potential violations"]})]})]}),a.jsxs("div",{className:"border border-gray-700 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-white mb-2",children:"Counterfeit Detection"}),a.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Manual monitoring of marketplaces and platforms"}),a.jsx("div",{className:"flex items-center gap-4 text-sm",children:a.jsx("span",{className:o.filter(e=>"brand"===e.type&&"critical"===e.severity).length>0?"text-yellow-500":"text-green-500",children:o.filter(e=>"brand"===e.type&&"critical"===e.severity).length>0?`⚠ ${o.filter(e=>"brand"===e.type&&"critical"===e.severity).length} alerts`:"✓ No counterfeits detected"})})]})]})]})}),"search"===t&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Search Engine Monitoring"}),a.jsxs("button",{onClick:()=>ce("search"),disabled:g,className:"flex items-center gap-2 px-4 py-2 bg-yellow-500 hover:bg-yellow-600 disabled:bg-gray-600 text-white rounded-lg transition-colors",children:[a.jsx($e,{className:"w-4 h-4 "+(g?"animate-spin":"")}),g?"Scanning...":"Scan Now"]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border border-gray-700 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-white mb-2",children:"Google Search Results"}),a.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Tracks EventNexus mentions in Google search results"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mt-3",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Search alerts found:"}),a.jsx("span",{className:"text-white ml-2",children:o.filter(e=>"search"===e.type).length})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Last scan:"}),a.jsx("span",{className:"text-white ml-2",children:(null==j?void 0:j.toLocaleTimeString())||"Never"})]})]})]}),a.jsxs("div",{className:"border border-gray-700 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-white mb-2",children:"Monitoring Status"}),a.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Google Custom Search API integration status"}),a.jsx("div",{className:"flex items-center gap-4 text-sm",children:a.jsx("span",{className:p&&p.searchResults>0?"text-green-500":"text-gray-400",children:p&&p.searchResults>0?"✓ Active monitoring":"○ Run scan to activate"})})]})]})]})}),"social"===t&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Social Media Monitoring"}),a.jsxs("button",{onClick:()=>ce("social"),disabled:g,className:"flex items-center gap-2 px-4 py-2 bg-pink-500 hover:bg-pink-600 disabled:bg-gray-600 text-white rounded-lg transition-colors",children:[a.jsx($e,{className:"w-4 h-4 "+(g?"animate-spin":"")}),g?"Scanning...":"Refresh Feed"]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border border-gray-700 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-white mb-2",children:"Twitter/X Mentions"}),a.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Tracks EventNexus mentions using free Nitter scraper"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mt-3",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Mentions found:"}),a.jsx("span",{className:"text-white ml-2",children:o.filter(e=>"social"===e.type).length})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Last scan:"}),a.jsx("span",{className:"text-white ml-2",children:(null==j?void 0:j.toLocaleTimeString())||"Never"})]})]})]}),o.filter(e=>"social"===e.type).length>0&&a.jsxs("div",{className:"border border-pink-500/20 bg-pink-500/10 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-white mb-3",children:"Recent Mentions"}),a.jsx("div",{className:"space-y-3",children:o.filter(e=>"social"===e.type).slice(0,5).map(e=>{var t;return a.jsx("div",{className:"border border-gray-700 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-gray-300 mb-1",children:e.description}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[a.jsx("span",{children:new Date(e.timestamp).toLocaleString()}),(null==(t=e.metadata)?void 0:t.source)&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"•"}),a.jsx("span",{children:e.metadata.source})]})]})]}),e.url&&a.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"ml-2",children:a.jsx(c,{className:"w-4 h-4 text-pink-400 hover:text-pink-300"})})]})},e.id)})})]}),a.jsxs("div",{className:"border border-gray-700 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-white mb-2",children:"Monitoring Status"}),a.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Free Nitter scraper - no Twitter API key required"}),a.jsx("div",{className:"flex items-center gap-4 text-sm",children:a.jsx("span",{className:p&&p.socialMentions>0?"text-green-500":"text-gray-400",children:p&&p.socialMentions>0?"✓ Active":"○ Run scan to activate"})})]})]})]})}),"competitors"===t&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Competitor Analysis Tools"}),a.jsxs("button",{onClick:()=>ce("competitors"),disabled:g,className:"flex items-center gap-2 px-4 py-2 bg-orange-500 hover:bg-orange-600 disabled:bg-gray-600 text-white rounded-lg transition-colors",children:[a.jsx($e,{className:"w-4 h-4 "+(g?"animate-spin":"")}),"Analyze Now"]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border border-gray-700 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-white mb-2",children:"Platform Feature Comparison"}),a.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Manual feature tracking and comparison analysis"}),a.jsx("div",{className:"flex items-center gap-4 text-sm",children:a.jsxs("span",{className:"text-gray-300",children:["Competitor alerts: ",o.filter(e=>"competitor"===e.type).length]})})]}),a.jsxs("div",{className:"border border-gray-700 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-white mb-2",children:"Pricing Intelligence"}),a.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Manual monitoring of competitor pricing and campaigns"}),a.jsx("div",{className:"flex items-center gap-4 text-sm",children:a.jsx("span",{className:o.filter(e=>"competitor"===e.type&&"warning"===e.severity).length>0?"text-yellow-500":"text-green-500",children:o.filter(e=>"competitor"===e.type&&"warning"===e.severity).length>0?`⚠ ${o.filter(e=>"competitor"===e.type&&"warning"===e.severity).length} pricing changes`:"✓ Competitive pricing maintained"})})]}),a.jsxs("div",{className:"border border-gray-700 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-white mb-2",children:"Market Position Tracking"}),a.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Database-driven competitor monitoring and analysis"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mt-3",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Total alerts:"}),a.jsx("span",{className:"text-white ml-2",children:(null==p?void 0:p.competitorAlerts)||0})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Last scan:"}),a.jsx("span",{className:"text-white ml-2",children:(null==j?void 0:j.toLocaleTimeString())||"Never"})]})]})]})]})]})}),"history"===t&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Alert History"}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Resolved and deleted alerts archive"})]}),a.jsxs("button",{onClick:ne,disabled:g,className:"flex items-center gap-2 px-4 py-2 bg-purple-500 hover:bg-purple-600 disabled:bg-gray-600 text-white rounded-lg transition-colors",children:[a.jsx($e,{className:"w-4 h-4 "+(g?"animate-spin":"")}),"Refresh"]})]}),0===m.length?a.jsxs("div",{className:"text-center py-12 bg-gray-800/50 border border-gray-700 rounded-xl",children:[a.jsx(Fe,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400 text-lg",children:"No historical alerts yet"}),a.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Resolved and deleted alerts will appear here"})]}):a.jsxs("div",{className:"space-y-3",children:[a.jsxs("p",{className:"text-gray-400 text-sm",children:["Showing ",m.length," archived alert",1!==m.length?"s":""]}),m.map(e=>a.jsxs("div",{className:"border rounded-lg p-4 "+("resolved"===e.status?"bg-green-500/10 border-green-500/30":"bg-gray-700/50 border-gray-600"),children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:["critical"===e.severity&&a.jsx(Xe,{className:"w-5 h-5 text-red-500"}),"warning"===e.severity&&a.jsx(Ue,{className:"w-5 h-5 text-yellow-500"}),"info"===e.severity&&a.jsx(De,{className:"w-5 h-5 text-blue-500"}),a.jsx("span",{className:"font-semibold text-white",children:e.title})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"px-2 py-1 text-xs rounded "+("resolved"===e.status?"bg-green-500/20 text-green-400":"bg-gray-600/50 text-gray-400"),children:"resolved"===e.status?"Resolved":"Deleted"}),a.jsx("span",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleDateString()})]})]}),a.jsx("p",{className:"text-sm text-gray-300 mb-2",children:e.description}),e.url&&a.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1 break-all",children:[a.jsx(c,{className:"w-3 h-3 flex-shrink-0"}),e.url]}),e.actionTaken&&a.jsxs("div",{className:"mt-2 text-xs text-gray-400 italic bg-gray-800/50 rounded p-2",children:["Action: ",e.actionTaken]}),e.updated_at&&a.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Updated: ",new Date(e.updated_at).toLocaleString()]})]},e.id))]})]})]}),a.jsx("div",{className:"mt-8 p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Ue,{className:"w-5 h-5 text-yellow-500 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"text-yellow-500 font-semibold mb-1",children:"Integration Required"}),a.jsx("p",{className:"text-gray-400",children:"This monitoring dashboard requires API integrations with third-party services (GitHub API, WHOIS services, brand monitoring platforms, etc.). Configure API keys and services in the admin settings to enable real-time monitoring."})]})]})})]}),v&&k&&a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-gray-900 border border-purple-500/30 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700 bg-gradient-to-r from-purple-900/50 to-indigo-900/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(qe,{className:"w-6 h-6 text-purple-400"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:"AI Brand Protection Report"}),a.jsxs("p",{className:"text-sm text-gray-400",children:["Generated ",new Date(k.timestamp).toLocaleString()," • ",k.alertsAnalyzed," alerts analyzed"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{if(!(null==k?void 0:k.report))return;const e=`\nEventNexus Brand Protection Report\nGenerated: ${(new Date).toLocaleString()}\nAlerts Analyzed: ${k.alertsAnalyzed}\nCritical: ${k.criticalCount} | Warnings: ${k.warningCount}\n\n${k.report}\n\n---\nLegal Framework References:\n- LICENSE.md: /workspaces/EventNexus/LICENSE.md\n- LEGAL_PROTECTION.md: /workspaces/EventNexus/docs/LEGAL_PROTECTION.md\n- SECURITY.md: /workspaces/EventNexus/SECURITY.md\n`,t=new Blob([e],{type:"text/markdown"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`brand-protection-report-${(new Date).toISOString().split("T")[0]}.md`,a.click(),URL.revokeObjectURL(s)},className:"p-2 hover:bg-white/10 rounded-lg transition-colors",title:"Download Report",children:a.jsx(Ke,{className:"w-5 h-5 text-gray-400 hover:text-white"})}),a.jsx("button",{onClick:()=>w(!1),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:a.jsx(n,{className:"w-5 h-5 text-gray-400 hover:text-white"})})]})]}),a.jsxs("div",{className:"flex items-center gap-6 px-6 py-4 bg-gray-800/50 border-b border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),a.jsxs("span",{className:"text-sm text-gray-300",children:[k.criticalCount," Critical"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),a.jsxs("span",{className:"text-sm text-gray-300",children:[k.warningCount," Warnings"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(l,{className:"w-4 h-4 text-purple-400"}),a.jsx("span",{className:"text-sm text-gray-300",children:"Legal Framework Applied"})]})]}),a.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[a.jsx("div",{className:"prose prose-invert max-w-none",children:a.jsx("div",{className:"whitespace-pre-wrap text-gray-300 leading-relaxed",children:k.report})}),a.jsxs("div",{className:"mt-6 p-4 bg-purple-500/10 border border-purple-500/20 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-semibold text-purple-400 mb-2",children:"Legal Framework References"}),a.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[a.jsxs("p",{children:["• ",a.jsx("strong",{children:"LICENSE.md"})," - Proprietary Software License Agreement"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"LEGAL_PROTECTION.md"})," - Comprehensive Legal Framework"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"SECURITY.md"})," - Security Policy & Disclosure"]}),a.jsx("p",{className:"mt-2 text-gray-500",children:"Framework includes: Copyright (Berne Convention), Trade Secrets (EU 2016/943), Trademark Protection, Domain Rights (ICANN UDRP)"})]})]})]})]})}),B&&q&&a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-gradient-to-br from-gray-900 to-black border border-gray-700 rounded-xl shadow-2xl max-w-lg w-full",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(gt,{className:"w-6 h-6 text-gray-400"}),a.jsx("h3",{className:"text-xl font-bold text-white",children:"Whitelist Alert"})]}),a.jsxs("div",{className:"mb-4 p-3 bg-gray-800/50 border border-gray-700 rounded",children:[a.jsx("p",{className:"text-sm font-medium text-white",children:q.title}),q.url&&a.jsx("p",{className:"text-xs text-gray-400 mt-1 break-all",children:q.url})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Reason for Whitelisting ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{value:W,onChange:e=>H(e.target.value),placeholder:"e.g., Not related to our platform, False positive, Scientific software...",className:"w-full h-24 px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{G(!1),J(null),H("")},className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:"Cancel"}),a.jsx("button",{onClick:async()=>{if(q&&W){b(!0);try{const e=await async function(e,t,a){try{const{data:{user:l}}=await s.auth.getUser();if(!l)throw new Error("Not authenticated");const{error:r}=await s.from("brand_monitoring_whitelist").insert({url:e,title:t,reason:a,whitelisted_by:l.id});if(r)throw r;return!0}catch(l){return!1}}(q.url||"",q.title,W);e&&(await Jt(q.id),await le(),G(!1),J(null),H(""))}catch(e){}finally{b(!1)}}},disabled:!W.trim()||g,className:"flex-1 px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:g?a.jsxs(a.Fragment,{children:[a.jsx($e,{className:"w-4 h-4 animate-spin"})," Processing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(gt,{className:"w-4 h-4"})," Add to Whitelist"]})})]})]})})}),Y&&V&&a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-black border border-gray-700 rounded-xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ve,{className:"w-6 h-6 text-blue-400"}),a.jsx("h3",{className:"text-xl font-bold text-white",children:"Alert Notes"})]}),a.jsx("button",{onClick:()=>{K(!1),Z(null),Q([]),te("")},className:"text-gray-400 hover:text-white transition-colors",children:a.jsx(n,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"mt-4 p-3 bg-gray-800/50 border border-gray-700 rounded",children:[a.jsx("p",{className:"text-sm font-medium text-white",children:V.title}),V.url&&a.jsx("p",{className:"text-xs text-gray-400 mt-1 break-all",children:V.url})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-3",children:0===X.length?a.jsxs("div",{className:"text-center py-8 text-gray-400",children:[a.jsx(Ve,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No notes yet. Add the first one below."})]}):X.map(e=>a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-4",children:[a.jsx("div",{className:"flex items-start justify-between mb-2",children:a.jsx("span",{className:"text-xs text-gray-400",children:new Date(e.created_at).toLocaleString()})}),a.jsx("p",{className:"text-sm text-white whitespace-pre-wrap",children:e.note})]},e.id))}),a.jsxs("div",{className:"p-6 border-t border-gray-700",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Add Note"}),a.jsx("textarea",{value:ee,onChange:e=>te(e.target.value),placeholder:"Document findings, actions taken, investigation notes...",className:"w-full h-24 px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{K(!1),Z(null),Q([]),te("")},className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:"Close"}),a.jsx("button",{onClick:async()=>{if(V&&ee.trim()){b(!0);try{const e=await async function(e,t){try{const{data:{user:a}}=await s.auth.getUser();if(!a)throw new Error("Not authenticated");const{error:l}=await s.from("brand_monitoring_notes").insert({alert_id:e,note:t,created_by:a.id});if(l)throw l;return!0}catch(a){return!1}}(V.id,ee);if(e){const e=await Wt(V.id);Q(e),te("")}}catch(e){}finally{b(!1)}}},disabled:!ee.trim()||g,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:g?a.jsxs(a.Fragment,{children:[a.jsx($e,{className:"w-4 h-4 animate-spin"})," Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ve,{className:"w-4 h-4"})," Add Note"]})})]})]})]})})]});var Ce,Se,Ae,Ie}const Kt=()=>{const[e,t]=pe.useState([]),[s,l]=pe.useState({total:0,unread:0,replied:0,high_priority:0}),[r,i]=pe.useState(null),[n,b]=pe.useState(!0),[j,f]=pe.useState("all"),[y,N]=pe.useState(""),[v,w]=pe.useState(""),[k,_]=pe.useState(!1),[C,S]=pe.useState(!1);pe.useEffect(()=>{A(),I()},[j]);const A=async()=>{b(!0);try{const e=await d("all"===j?void 0:j);t(e||[])}catch(e){}finally{b(!1)}},I=async()=>{try{const e=await o();l(e||{total:0,unread:0,replied:0,high_priority:0})}catch(e){}},T=e.filter(e=>{var t;if(y){const s=y.toLowerCase();return e.subject.toLowerCase().includes(s)||e.from_email.toLowerCase().includes(s)||(null==(t=e.body_text)?void 0:t.toLowerCase().includes(s))}return!0}),z=e=>{switch(e){case"urgent":return"text-red-500";case"high":return"text-orange-500";case"low":return"text-slate-500";default:return"text-slate-400"}},M=e=>{switch(e){case"unread":return"bg-blue-500/10 text-blue-400 border-blue-500/30";case"read":default:return"bg-slate-500/10 text-slate-400 border-slate-500/30";case"replied":return"bg-green-500/10 text-green-400 border-green-500/30";case"archived":return"bg-slate-600/10 text-slate-500 border-slate-600/30";case"spam":return"bg-red-500/10 text-red-400 border-red-500/30"}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-black text-white tracking-tight",children:"📬 Admin Inbox"}),a.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Manage support emails and customer inquiries"})]}),a.jsxs("button",{onClick:A,disabled:n,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-indigo-700 disabled:opacity-50",children:[a.jsx($e,{className:"w-4 h-4 "+(n?"animate-spin":"")}),"Refresh"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-2xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Ct,{className:"w-8 h-8 text-blue-400"}),a.jsx("span",{className:"text-3xl font-black text-white",children:s.total})]}),a.jsx("p",{className:"text-slate-400 text-sm mt-2 font-medium",children:"Total Messages"})]}),a.jsxs("div",{className:"bg-slate-900/50 border border-blue-500/30 rounded-2xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(x,{className:"w-8 h-8 text-blue-400"}),a.jsx("span",{className:"text-3xl font-black text-blue-400",children:s.unread})]}),a.jsx("p",{className:"text-slate-400 text-sm mt-2 font-medium",children:"Unread"})]}),a.jsxs("div",{className:"bg-slate-900/50 border border-green-500/30 rounded-2xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(m,{className:"w-8 h-8 text-green-400"}),a.jsx("span",{className:"text-3xl font-black text-green-400",children:s.replied})]}),a.jsx("p",{className:"text-slate-400 text-sm mt-2 font-medium",children:"Replied"})]}),a.jsxs("div",{className:"bg-slate-900/50 border border-orange-500/30 rounded-2xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Qe,{className:"w-8 h-8 text-orange-400"}),a.jsx("span",{className:"text-3xl font-black text-orange-400",children:s.high_priority})]}),a.jsx("p",{className:"text-slate-400 text-sm mt-2 font-medium",children:"High Priority"})]})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(Le,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Search messages...",value:y,onChange:e=>N(e.target.value),className:"w-full bg-slate-900 border border-slate-800 rounded-xl pl-12 pr-4 py-3 text-white outline-none focus:border-indigo-500"})]}),a.jsxs("select",{value:j,onChange:e=>f(e.target.value),className:"bg-slate-900 border border-slate-800 rounded-xl px-4 py-3 text-white outline-none focus:border-indigo-500",children:[a.jsx("option",{value:"all",children:"All Messages"}),a.jsx("option",{value:"unread",children:"Unread"}),a.jsx("option",{value:"read",children:"Read"}),a.jsx("option",{value:"replied",children:"Replied"}),a.jsx("option",{value:"archived",children:"Archived"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-1 space-y-2 max-h-[600px] overflow-y-auto",children:n?a.jsx("div",{className:"text-center py-12 text-slate-500",children:"Loading messages..."}):0===T.length?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(x,{className:"w-16 h-16 text-slate-700 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 font-medium",children:"No messages found"})]}):T.map(e=>a.jsxs("div",{onClick:()=>(async e=>{if(i(e),_(!1),w(""),"unread"===e.status)try{await p(e.id),t(t=>t.map(t=>t.id===e.id?{...t,status:"read"}:t)),I()}catch(s){}})(e),className:"p-4 rounded-xl border cursor-pointer transition-all "+((null==r?void 0:r.id)===e.id?"bg-indigo-600/20 border-indigo-500":"unread"===e.status?"bg-slate-900 border-slate-700 hover:border-slate-600":"bg-slate-900/50 border-slate-800 hover:border-slate-700"),children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-bold text-sm truncate "+("unread"===e.status?"text-white":"text-slate-300"),children:e.from_name||e.from_email}),a.jsx("p",{className:"text-xs text-slate-500 truncate",children:e.from_email})]}),"normal"!==e.priority&&a.jsx(Qe,{className:`w-4 h-4 flex-shrink-0 ${z(e.priority)}`})]}),a.jsx("p",{className:"text-sm mb-2 truncate "+("unread"===e.status?"text-white font-semibold":"text-slate-400"),children:e.subject}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:`text-xs px-2 py-1 rounded-lg border ${M(e.status)}`,children:e.status}),a.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[a.jsx(Fe,{className:"w-3 h-3"}),new Date(e.created_at).toLocaleDateString()]})]})]},e.id))}),a.jsx("div",{className:"lg:col-span-2",children:r?a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6 space-y-6",children:[a.jsxs("div",{className:"border-b border-slate-800 pb-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:r.subject}),a.jsxs("p",{className:"text-slate-400 text-sm",children:["From: ",a.jsx("span",{className:"text-white font-semibold",children:r.from_name||r.from_email}),r.from_name&&a.jsxs("span",{className:"text-slate-500 ml-2",children:["<",r.from_email,">"]})]}),a.jsxs("p",{className:"text-slate-400 text-sm",children:["To: ",a.jsx("span",{className:"text-white",children:r.to_email})]}),a.jsx("p",{className:"text-slate-500 text-xs mt-2",children:new Date(r.created_at).toLocaleString()})]}),a.jsx("button",{onClick:()=>(async e=>{if(confirm("Delete this message permanently?"))try{await u(e),t(t=>t.filter(t=>t.id!==e)),(null==r?void 0:r.id)===e&&i(null),I()}catch(s){}})(r.id),className:"p-2 text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:a.jsx(h,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("span",{className:`text-xs px-3 py-1 rounded-lg border ${M(r.status)}`,children:r.status}),"normal"!==r.priority&&a.jsxs("span",{className:`text-xs px-3 py-1 rounded-lg border ${z(r.priority)} border-current`,children:[r.priority," priority"]})]})]}),a.jsx("div",{className:"prose prose-invert max-w-none",children:r.body_html?a.jsx("div",{dangerouslySetInnerHTML:{__html:r.body_html},className:"text-slate-300"}):a.jsx("p",{className:"text-slate-300 whitespace-pre-wrap",children:r.body_text})}),r.attachments&&r.attachments.length>0&&a.jsxs("div",{className:"border-t border-slate-800 pt-4",children:[a.jsx("p",{className:"text-sm font-bold text-white mb-2",children:"Attachments:"}),a.jsx("div",{className:"space-y-2",children:r.attachments.map((e,t)=>a.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-400 bg-slate-800/50 p-2 rounded-lg",children:[a.jsx(c,{className:"w-4 h-4"}),a.jsx("span",{children:e.name}),a.jsxs("span",{className:"text-xs text-slate-500",children:["(",(e.size/1024).toFixed(1)," KB)"]})]},t))})]}),k||"replied"===r.status?"replied"===r.status?a.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-xl p-4 text-center",children:a.jsxs("p",{className:"text-green-400 font-semibold",children:["✅ Replied on ",new Date(r.replied_at).toLocaleString()]})}):a.jsxs("div",{className:"space-y-4 border-t border-slate-800 pt-4",children:[a.jsx("textarea",{value:v,onChange:e=>w(e.target.value),placeholder:"Type your reply...",rows:6,className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-4 text-white outline-none focus:border-indigo-500"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:async()=>{if(r&&v.trim()){S(!0);try{await g(r.id,v),t(e=>e.map(e=>e.id===r.id?{...e,status:"replied",replied_at:(new Date).toISOString()}:e)),i(e=>e?{...e,status:"replied",replied_at:(new Date).toISOString()}:null),_(!1),w(""),I(),alert("Reply sent successfully! ✅")}catch(e){alert("Failed to send reply. Check console for details.")}finally{S(!1)}}},disabled:C||!v.trim(),className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 flex items-center justify-center gap-2",children:C?a.jsxs(a.Fragment,{children:[a.jsx($e,{className:"w-5 h-5 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(m,{className:"w-5 h-5"}),"Send Reply"]})}),a.jsx("button",{onClick:()=>{_(!1),w("")},className:"px-6 py-3 bg-slate-800 text-white rounded-xl font-bold hover:bg-slate-700",children:"Cancel"})]})]}):a.jsxs("button",{onClick:()=>_(!0),className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 flex items-center justify-center gap-2",children:[a.jsx(m,{className:"w-5 h-5"}),"Reply"]})]}):a.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-2xl p-12 text-center",children:[a.jsx(x,{className:"w-24 h-24 text-slate-700 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 font-medium",children:"Select a message to view details"})]})})]})]})};function Vt(){const[e,t]=pe.useState(null),[l,r]=pe.useState([]),[n,c]=pe.useState([]),[d,o]=pe.useState(!0);pe.useEffect(()=>{x();const e=setInterval(x,3e4);return()=>clearInterval(e)},[]);const x=async()=>{try{const{data:e}=await s.from("campaign_performance").select("*");if(e){const s=e.reduce((e,t)=>e+(t.total_impressions||0),0),a=e.reduce((e,t)=>e+(t.total_clicks||0),0),l=e.reduce((e,t)=>e+(t.total_conversions||0),0),r=e.reduce((e,t)=>e+(t.total_revenue||0),0),i=e.reduce((e,t)=>e+(t.total_spend||0),0);t({totalCampaigns:e.length,activeCampaigns:e.filter(e=>e.is_active).length,totalImpressions:s,totalClicks:a,totalConversions:l,totalRevenue:r,totalSpend:i,averageROI:i>0?(r-i)/i*100:0,averageCTR:s>0?a/s*100:0,averageConversionRate:a>0?l/a*100:0})}const{data:a}=await s.from("campaign_performance").select("\n          campaign_id,\n          total_impressions,\n          total_clicks,\n          total_conversions,\n          roi,\n          ctr,\n          campaigns (\n            id,\n            title,\n            status\n          )\n        ").order("roi",{ascending:!1}).limit(5);a&&r(a.map(e=>{var t,s;return{id:e.campaign_id,title:(null==(t=e.campaigns)?void 0:t.title)||"Untitled",impressions:e.total_impressions||0,clicks:e.total_clicks||0,conversions:e.total_conversions||0,roi:e.roi||0,ctr:e.ctr||0,status:(null==(s=e.campaigns)?void 0:s.status)||"unknown"}}));const{data:l}=await s.from("campaign_analytics").select("source, impressions, clicks").not("source","is",null);if(l){const e=new Map;l.forEach(t=>{const s=t.source||"direct",a=e.get(s)||{platform:s,impressions:0,clicks:0,conversions:0};a.impressions+=t.impressions||0,a.clicks+=t.clicks||0,e.set(s,a)}),c(Array.from(e.values()))}}catch(e){}finally{o(!1)}};return d?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):e?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-2",children:[a.jsx(Je,{className:"h-6 w-6"}),"Campaign Analytics"]}),a.jsx("p",{className:"text-slate-400 mt-1",children:"Real-time performance tracking and insights"})]}),a.jsx("button",{onClick:x,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-lg text-sm font-bold transition-all",children:"Refresh Data"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(Zt,{title:"Total Reach",value:Xt(e.totalImpressions),icon:a.jsx(De,{className:"h-5 w-5"}),color:"blue",subtitle:`${e.activeCampaigns} active campaigns`}),a.jsx(Zt,{title:"Clicks",value:Xt(e.totalClicks),icon:a.jsx(Tt,{className:"h-5 w-5"}),color:"green",subtitle:`${e.averageCTR.toFixed(2)}% CTR`}),a.jsx(Zt,{title:"Conversions",value:Xt(e.totalConversions),icon:a.jsx(Et,{className:"h-5 w-5"}),color:"purple",subtitle:`${e.averageConversionRate.toFixed(2)}% rate`}),a.jsx(Zt,{title:"ROI",value:`${e.averageROI.toFixed(0)}%`,icon:a.jsx(i,{className:"h-5 w-5"}),color:"orange",subtitle:`€${Xt(e.totalRevenue)} revenue`,trending:e.averageROI>100})]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6",children:[a.jsxs("h3",{className:"text-lg font-black mb-4 flex items-center gap-2",children:[a.jsx(b,{className:"h-5 w-5 text-yellow-500"}),"Top Performing Campaigns"]}),0===l.length?a.jsx("p",{className:"text-slate-400 text-center py-8",children:"No campaigns yet"}):a.jsx("div",{className:"space-y-3",children:l.map((e,t)=>a.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"text-2xl font-black text-slate-600",children:["#",t+1]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-white",children:e.title}),a.jsxs("div",{className:"flex gap-4 mt-1 text-xs text-slate-400",children:[a.jsxs("span",{children:[Xt(e.impressions)," impressions"]}),a.jsxs("span",{children:[Xt(e.clicks)," clicks"]}),a.jsxs("span",{children:[Xt(e.conversions)," conversions"]})]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-2xl font-black text-green-500",children:[e.roi.toFixed(0),"%"]}),a.jsx("div",{className:"text-xs text-slate-400",children:"ROI"})]})]},e.id))})]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6",children:[a.jsxs("h3",{className:"text-lg font-black mb-4 flex items-center gap-2",children:[a.jsx(yt,{className:"h-5 w-5 text-indigo-500"}),"Platform Performance"]}),0===n.length?a.jsx("p",{className:"text-slate-400 text-center py-8",children:"No platform data yet"}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:n.map(e=>a.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-4",children:[a.jsxs("div",{className:"text-sm font-bold text-slate-400 uppercase mb-2",children:[Qt(e.platform)," ",e.platform]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Impressions"}),a.jsx("span",{className:"font-bold",children:Xt(e.impressions)})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Clicks"}),a.jsx("span",{className:"font-bold",children:Xt(e.clicks)})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"CTR"}),a.jsxs("span",{className:"font-bold text-green-500",children:[e.impressions>0?(e.clicks/e.impressions*100).toFixed(2):0,"%"]})]})]})]},e.platform))})]})]}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(pt,{className:"mx-auto h-12 w-12 text-slate-400 mb-4"}),a.jsx("p",{className:"text-slate-400",children:"No analytics data available yet"}),a.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Create and run campaigns to see performance metrics"})]})}function Zt({title:e,value:t,icon:s,color:l,subtitle:r,trending:n}){return a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-bold text-slate-400",children:e}),a.jsx("div",{className:`p-2 rounded-lg ${{blue:"bg-blue-500/10 text-blue-500",green:"bg-green-500/10 text-green-500",purple:"bg-purple-500/10 text-purple-500",orange:"bg-orange-500/10 text-orange-500"}[l]}`,children:s})]}),a.jsxs("div",{className:"text-3xl font-black text-white mb-1 flex items-center gap-2",children:[t,void 0!==n&&(n?a.jsx(i,{className:"h-5 w-5 text-green-500"}):a.jsx(Dt,{className:"h-5 w-5 text-red-500"}))]}),r&&a.jsx("div",{className:"text-xs text-slate-400",children:r})]})}function Xt(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}function Qt(e){return{facebook:"📘",instagram:"📸",twitter:"🐦",linkedin:"💼",direct:"🔗"}[e]||"🌐"}async function es(e,t=30){try{const{data:a,error:l}=await s.rpc("get_optimal_posting_hours",{p_platform:e||null,p_days_back:t});if(l)throw l;return a||[]}catch(a){return[]}}async function ts(e,t=90){try{const{data:a,error:l}=await s.rpc("get_optimal_posting_days",{p_platform:e||null,p_days_back:t});if(l)throw l;return a||[]}catch(a){return[]}}function ss(e){return 0===e?"12:00 AM":e<12?`${e}:00 AM`:12===e?"12:00 PM":e-12+":00 PM"}function as(e){return{facebook:"📘",instagram:"📸",twitter:"🐦",linkedin:"💼",tiktok:"🎵"}[e.toLowerCase()]||"📱"}const ls=({campaignId:e,onScheduled:t})=>{const[l,r]=pe.useState("schedule"),[c,d]=pe.useState(["facebook","instagram"]),[o,x]=pe.useState("auto"),[m,h]=pe.useState(""),[p,u]=pe.useState(""),[g,b]=pe.useState("Europe/Tallinn"),[N,v]=pe.useState(!1),[w,k]=pe.useState([]),[_,C]=pe.useState([]),[S,A]=pe.useState([]),[I,T]=pe.useState("facebook"),[z,M]=pe.useState([]),[P,R]=pe.useState(!0),[O,E]=pe.useState(!0);pe.useEffect(()=>{L(),F();const e=setInterval(F,3e4);return()=>clearInterval(e)},[]),pe.useEffect(()=>{"insights"===l&&I&&D(I)},[l,I]);const L=async()=>{R(!0);try{const e=await async function(){try{const{data:e,error:t}=await s.rpc("get_platform_optimal_times");if(t)throw t;return e||[]}catch(e){return[]}}();k(e)}catch(e){}finally{R(!1)}},D=async e=>{try{const[t,s]=await Promise.all([es(e,30),ts(e,90)]);C(t),A(s)}catch(t){}},F=async()=>{E(!0);try{const e=await async function(){try{const e=(new Date).toISOString(),t=new Date(Date.now()+6048e5).toISOString(),{data:a,error:l}=await s.from("campaign_schedule").select("*").eq("status","scheduled").gte("scheduled_for",e).lte("scheduled_for",t).order("scheduled_for",{ascending:!0});if(l)throw l;return a||[]}catch(e){return[]}}();M(e)}catch(e){}finally{E(!1)}},$=async e=>{if(!confirm("Cancel this scheduled post?"))return;const t=await async function(e){try{const{error:t}=await s.from("campaign_schedule").update({status:"cancelled",updated_at:(new Date).toISOString()}).eq("id",e);if(t)throw t;return!0}catch(t){return!1}}(e);t?(alert("✅ Post cancelled"),F()):alert("❌ Failed to cancel post")},U=e=>{const t={scheduled:"bg-blue-500/10 text-blue-400",posting:"bg-yellow-500/10 text-yellow-400",posted:"bg-emerald-500/10 text-emerald-400",failed:"bg-red-500/10 text-red-400",cancelled:"bg-slate-500/10 text-slate-400"};return t[e]||t.scheduled};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex gap-2 bg-slate-900 border border-slate-800 rounded-2xl p-2",children:[a.jsxs("button",{onClick:()=>r("schedule"),className:"flex-1 px-4 py-2 rounded-xl font-bold text-sm transition-all "+("schedule"===l?"bg-orange-600 text-white":"text-slate-400 hover:text-white hover:bg-slate-800"),children:[a.jsx(j,{size:16,className:"inline mr-2"}),"Schedule"]}),a.jsxs("button",{onClick:()=>r("insights"),className:"flex-1 px-4 py-2 rounded-xl font-bold text-sm transition-all "+("insights"===l?"bg-orange-600 text-white":"text-slate-400 hover:text-white hover:bg-slate-800"),children:[a.jsx(i,{size:16,className:"inline mr-2"}),"Insights"]}),a.jsxs("button",{onClick:()=>r("upcoming"),className:"flex-1 px-4 py-2 rounded-xl font-bold text-sm transition-all "+("upcoming"===l?"bg-orange-600 text-white":"text-slate-400 hover:text-white hover:bg-slate-800"),children:[a.jsx(Fe,{size:16,className:"inline mr-2"}),"Upcoming (",z.length,")"]})]}),"schedule"===l&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6",children:[a.jsx("h4",{className:"text-lg font-black text-white mb-4",children:"Scheduling Mode"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:()=>x("auto"),className:"p-4 rounded-2xl border-2 transition-all "+("auto"===o?"border-orange-500 bg-orange-500/10":"border-slate-700 hover:border-slate-600"),children:[a.jsx(Et,{size:24,className:"auto"===o?"text-orange-500":"text-slate-400"}),a.jsx("p",{className:"font-bold text-white mt-2",children:"AI Optimal"}),a.jsx("p",{className:"text-xs text-slate-400",children:"Best time based on analytics"})]}),a.jsxs("button",{onClick:()=>x("manual"),className:"p-4 rounded-2xl border-2 transition-all "+("manual"===o?"border-orange-500 bg-orange-500/10":"border-slate-700 hover:border-slate-600"),children:[a.jsx(j,{size:24,className:"manual"===o?"text-orange-500":"text-slate-400"}),a.jsx("p",{className:"font-bold text-white mt-2",children:"Manual"}),a.jsx("p",{className:"text-xs text-slate-400",children:"Choose specific date/time"})]})]})]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6",children:[a.jsx("h4",{className:"text-lg font-black text-white mb-4",children:"Platforms"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["facebook","instagram","twitter","linkedin"].map(e=>a.jsxs("button",{onClick:()=>(e=>{d(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e),className:"p-3 rounded-xl border-2 transition-all "+(c.includes(e)?"border-orange-500 bg-orange-500/10":"border-slate-700 hover:border-slate-600"),children:[a.jsx("span",{className:"text-2xl",children:as(e)}),a.jsx("p",{className:"text-sm font-bold text-white mt-1 capitalize",children:e})]},e))})]}),"manual"===o&&a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6",children:[a.jsx("h4",{className:"text-lg font-black text-white mb-4",children:"Date & Time"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase mb-2 block",children:"Date"}),a.jsx("input",{type:"date",value:m,onChange:e=>h(e.target.value),min:(new Date).toISOString().split("T")[0],className:"w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-xl text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase mb-2 block",children:"Time"}),a.jsx("input",{type:"time",value:p,onChange:e=>u(e.target.value),className:"w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-xl text-white"})]})]})]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6",children:[a.jsx("h4",{className:"text-lg font-black text-white mb-4",children:"Timezone"}),a.jsxs("select",{value:g,onChange:e=>b(e.target.value),className:"w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-xl text-white",children:[a.jsx("option",{value:"Europe/Tallinn",children:"Europe/Tallinn (EET)"}),a.jsx("option",{value:"Europe/London",children:"Europe/London (GMT)"}),a.jsx("option",{value:"America/New_York",children:"America/New_York (EST)"}),a.jsx("option",{value:"America/Los_Angeles",children:"America/Los_Angeles (PST)"}),a.jsx("option",{value:"Asia/Tokyo",children:"Asia/Tokyo (JST)"}),a.jsx("option",{value:"UTC",children:"UTC"})]})]}),a.jsx("button",{onClick:async()=>{if(e)if(0!==c.length){v(!0);try{let a=null;if("auto"===o)a=await async function(e,t,a="Europe/Tallinn",l){try{const{data:r,error:i}=await s.rpc("schedule_campaign_auto",{p_campaign_id:e,p_platforms:t,p_timezone:a,p_content_variations:l||null});if(i)throw i;return r}catch(r){return null}}(e,c,g);else{if(!m||!p)return void alert("⚠️ Please select date and time");const t=new Date(`${m}T${p}`),l=await async function(e,t,a,l="Europe/Tallinn",r){try{const{data:i,error:n}=await s.from("campaign_schedule").insert({campaign_id:e,scheduled_for:t.toISOString(),timezone:l,platforms:a,content_variations:r||null,status:"scheduled"}).select().single();if(n)throw n;return i}catch(i){return null}}(e,t,c,g);a=(null==l?void 0:l.id)||null}a?(alert("✅ Campaign scheduled successfully!"),F(),t&&t(a)):alert("❌ Failed to schedule campaign")}catch(a){alert("❌ Error: "+a.message)}finally{v(!1)}}else alert("⚠️ Please select at least one platform");else alert("⚠️ No campaign selected")},disabled:N||!e,className:"w-full py-4 bg-orange-600 hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-2xl font-black text-white flex items-center justify-center gap-2 transition-all shadow-xl shadow-orange-600/20",children:N?a.jsxs(a.Fragment,{children:[a.jsx(f,{size:20,className:"animate-spin"})," Scheduling..."]}):a.jsxs(a.Fragment,{children:[a.jsx(y,{size:20})," Schedule Campaign"]})})]}),"insights"===l&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:["facebook","instagram","twitter","linkedin"].map(e=>a.jsxs("button",{onClick:()=>T(e),className:"px-4 py-2 rounded-xl font-bold text-sm whitespace-nowrap transition-all "+(I===e?"bg-orange-600 text-white":"bg-slate-800 text-slate-400 hover:text-white"),children:[as(e)," ",e.charAt(0).toUpperCase()+e.slice(1)]},e))}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:w.map(e=>{return a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("span",{className:"text-2xl",children:as(e.platform)}),a.jsxs("span",{className:"text-xs font-black px-3 py-1 rounded-full "+(e.confidence_score>=80?"bg-emerald-500/10 text-emerald-400":e.confidence_score>=50?"bg-yellow-500/10 text-yellow-400":"bg-red-500/10 text-red-400"),children:[e.confidence_score.toFixed(0),"% Confidence"]})]}),a.jsx("h5",{className:"font-bold text-white capitalize mb-2",children:e.platform}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("p",{className:"text-slate-400",children:[a.jsx(Fe,{size:14,className:"inline mr-1"}),"Best time: ",a.jsx("span",{className:"text-white font-bold",children:null!==e.optimal_hour?ss(e.optimal_hour):"N/A"})]}),a.jsxs("p",{className:"text-slate-400",children:[a.jsx(j,{size:14,className:"inline mr-1"}),"Best day: ",a.jsx("span",{className:"text-white font-bold",children:null!==e.optimal_day?(t=e.optimal_day,["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t]||"Unknown"):"N/A"})]})]})]},e.platform);var t})}),_.length>0&&a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6",children:[a.jsx("h4",{className:"text-lg font-black text-white mb-4",children:"Best Posting Hours"}),a.jsx("div",{className:"space-y-2",children:_.slice(0,5).map((e,t)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800 rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-2xl font-black text-orange-500",children:["#",t+1]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-white",children:ss(e.hour_of_day)}),a.jsxs("p",{className:"text-xs text-slate-400",children:[e.campaign_count," campaigns"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm font-bold text-emerald-400",children:[e.avg_ctr.toFixed(2),"% CTR"]}),a.jsxs("p",{className:"text-xs text-slate-400",children:[e.total_clicks.toLocaleString()," clicks"]})]})]},t))})]}),S.length>0&&a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6",children:[a.jsx("h4",{className:"text-lg font-black text-white mb-4",children:"Best Posting Days"}),a.jsx("div",{className:"space-y-2",children:S.slice(0,5).map((e,t)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800 rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-2xl font-black text-orange-500",children:["#",t+1]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-white",children:e.day_name.trim()}),a.jsxs("p",{className:"text-xs text-slate-400",children:[e.campaign_count," campaigns"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm font-bold text-emerald-400",children:[e.avg_ctr.toFixed(2),"% CTR"]}),a.jsxs("p",{className:"text-xs text-slate-400",children:[e.total_impressions.toLocaleString()," views"]})]})]},t))})]})]}),"upcoming"===l&&a.jsx("div",{className:"space-y-4",children:O?a.jsx("div",{className:"text-center py-12",children:a.jsx(f,{size:32,className:"animate-spin mx-auto text-slate-600"})}):0===z.length?a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-12 text-center",children:[a.jsx(j,{size:48,className:"mx-auto mb-4 text-slate-600"}),a.jsx("p",{className:"text-slate-400",children:"No upcoming posts scheduled"})]}):z.map(e=>a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-bold text-white mb-1",children:new Date(e.scheduled_for).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}),a.jsxs("p",{className:"text-xs text-slate-400",children:["Campaign ID: ",e.campaign_id.slice(0,8)]})]}),a.jsx("span",{className:`text-xs font-black px-3 py-1 rounded-full uppercase ${U(e.status)}`,children:e.status})]}),a.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.platforms.map(e=>a.jsx("span",{className:"text-lg",children:as(e)},e))}),"scheduled"===e.status&&a.jsxs("button",{onClick:()=>$(e.id),className:"w-full py-2 bg-red-600/10 hover:bg-red-600/20 text-red-400 rounded-xl text-sm font-bold transition-all",children:[a.jsx(n,{size:14,className:"inline mr-1"})," Cancel"]})]},e.id))})]})},rs=new et("AIzaSyB2UCRyekL4mmj7ShgD4ILZ1IvPjl8Jj64");async function is(e,t=10){try{const{data:a,error:l}=await s.rpc("get_top_performing_elements",{p_element_type:e,p_limit:t});if(l)throw l;return a||[]}catch(a){return[]}}async function ns(e=50,t=1,a=24){try{const{data:l,error:r}=await s.rpc("identify_underperforming_campaigns",{min_spend:e,max_roi:t,min_duration_hours:a});if(r)throw r;return l||[]}catch(l){return[]}}async function cs(e,t,a,l,r,i,n,c,d){try{const{data:o,error:x}=await s.rpc("store_campaign_insight",{p_campaign_id:e,p_insight_type:t,p_severity:a,p_title:l,p_description:r,p_ai_recommendation:i,p_suggested_action:n,p_confidence_score:c,p_insight_data:d||null});if(x)throw x;return o}catch(o){return null}}async function ds(e,t){try{const{data:a,error:l}=await s.rpc("get_campaign_insights",{p_campaign_id:e,p_severity:t||null});if(l)throw l;return a||[]}catch(a){return[]}}async function os(){try{const{data:e,error:t}=await s.from("v_campaign_learning_summary").select("*").order("ctr",{ascending:!1}).limit(20);if(t)throw t;return e||[]}catch(e){return[]}}const xs=({campaignId:e})=>{const[t,l]=pe.useState("insights"),[r,n]=pe.useState([]),[c,d]=pe.useState([]),[o,x]=pe.useState(!0),[m,h]=pe.useState(!1),[p,u]=pe.useState([]),[g,b]=pe.useState([]),[j,y]=pe.useState([]),[w,k]=pe.useState(!0),[_,C]=pe.useState([]),[S,A]=pe.useState(!0),[I,T]=pe.useState(!1),[z,M]=pe.useState("headline");pe.useEffect(()=>{P()},[e]);const P=async()=>{await Promise.all([R(),O(),E()])},R=async()=>{x(!0);try{const[t,s]=await Promise.all([ns(),e?ds(e):Promise.resolve([])]);n(t),d(s)}catch(t){}finally{x(!1)}},O=async()=>{k(!0);try{const[e,t,s]=await Promise.all([is("platform",5),is("audience",5),os()]);u(e),b(t),y(s)}catch(e){}finally{k(!1)}},E=async()=>{if(e){A(!0);try{const t=await async function(e){try{const{data:t,error:a}=await s.from("campaign_ab_tests").select("*").eq("campaign_id",e).order("created_at",{ascending:!1});if(a)throw a;return t||[]}catch(t){return[]}}(e);C(t)}catch(t){}finally{A(!1)}}},L=async(e,t)=>{const a=await async function(e,t,a){try{const{error:l}=await s.rpc("mark_insight_acted",{p_insight_id:e,p_action_taken:t,p_action_result:a||null});if(l)throw l;return!0}catch(l){return!1}}(e,t);a?(alert("✅ Insight marked as acted upon"),await R()):alert("❌ Failed to mark insight")},D=async(e,t)=>{T(!0);try{const a=prompt(`Enter original ${t} to test:`);if(!a)return;const l=await async function(e,t){try{const s=rs.getGenerativeModel({model:"gemini-2.0-flash-exp"}),a=`You are a marketing optimization expert. Generate an A/B test variant for EventNexus campaigns.\n\nTest Type: ${e}\nOriginal: ${t}\n\nGenerate a compelling alternative that:\n- Maintains brand voice (professional, energetic, community-focused)\n- Tests a specific hypothesis (urgency, social proof, benefit-focused, etc.)\n- Is measurably different from the original\n\nRespond in JSON format:\n{\n  "variant_a": "original content",\n  "variant_b": "improved variant with clear hypothesis",\n  "rationale": "Why this test will provide valuable insights"\n}`,l=await s.generateContent(a),r=(await l.response).text(),i=r.match(/```json\n([\s\S]*?)\n```/)||r.match(/```\n([\s\S]*?)\n```/),n=i?i[1]:r;return JSON.parse(n)}catch(s){return{variant_a:t,variant_b:t+" - Get Started Today!",rationale:"Failed to generate AI variant. Using fallback with urgency addition."}}}(t,a),r=await async function(e,t,a,l){try{const{data:r,error:i}=await s.rpc("create_ab_test_from_campaign",{p_campaign_id:e,p_test_type:t,p_variant_a:a,p_variant_b:l});if(i)throw i;return r}catch(r){return null}}(e,t,{content:l.variant_a},{content:l.variant_b});r?(alert(`✅ A/B test created!\n\nVariant A: ${l.variant_a}\nVariant B: ${l.variant_b}\n\nRationale: ${l.rationale}`),await E()):alert("❌ Failed to create A/B test")}catch(a){alert("❌ Error creating A/B test")}finally{T(!1)}},F=async e=>{const t=await async function(e){try{const{error:t}=await s.rpc("evaluate_ab_test",{p_test_id:e});if(t)throw t;return!0}catch(t){return!1}}(e);t?(alert("✅ A/B test evaluated"),await E()):alert("❌ Failed to evaluate test")},$=e=>{switch(e){case"critical":return"bg-red-500/10 text-red-400 border-red-500/30";case"warning":return"bg-yellow-500/10 text-yellow-400 border-yellow-500/30";case"success":return"bg-emerald-500/10 text-emerald-400 border-emerald-500/30";default:return"bg-blue-500/10 text-blue-400 border-blue-500/30"}},U=e=>{switch(e){case"critical":case"warning":return a.jsx(Ue,{size:16});case"success":return a.jsx(at,{size:16});default:return a.jsx(tt,{size:16})}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-2xl font-black tracking-tight flex items-center gap-2",children:[a.jsx(jt,{className:"text-orange-500"}),"AI Campaign Learning"]}),a.jsx("p",{className:"text-slate-400 text-sm",children:"Pattern recognition, insights, and optimization"})]}),a.jsx("button",{onClick:async()=>{h(!0);try{const e=await async function(){try{const e=await ns();let t=0;for(const s of e.slice(0,5)){const e=s.recommendation.includes("CRITICAL")?"critical":s.recommendation.includes("HIGH")?"warning":"info",a=s.roi<.5?"negative_roi":s.roi<1?"low_roi":s.ctr<1?"low_ctr":"low_performance";await cs(s.campaign_id,"performance",e,`${a.replace("_"," ").toUpperCase()} Detected`,s.recommendation,`AI detected ${a}. ${s.recommendation}`,"critical"===e?"pause":"optimize",75,{ctr:s.ctr,roi:s.roi,total_spend:s.total_spend,conversion_rate:s.conversion_rate,hours_running:s.hours_running,issue_type:a})&&t++}return t}catch(e){return 0}}();alert(`✅ Generated ${e} insights for underperforming campaigns`),await R()}catch(e){alert("❌ Failed to generate insights")}finally{h(!1)}},disabled:m,className:"px-4 py-2 bg-orange-600 hover:bg-orange-700 disabled:opacity-50 rounded-xl font-bold text-sm flex items-center gap-2 transition-all",children:m?a.jsxs(a.Fragment,{children:[a.jsx(f,{size:16,className:"animate-spin"})," Generating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(N,{size:16})," Auto-Generate Insights"]})})]}),a.jsxs("div",{className:"flex gap-2 bg-slate-900 border border-slate-800 rounded-2xl p-2",children:[a.jsxs("button",{onClick:()=>l("insights"),className:"flex-1 px-4 py-2 rounded-xl font-bold text-sm transition-all "+("insights"===t?"bg-orange-600 text-white":"text-slate-400 hover:text-white hover:bg-slate-800"),children:[a.jsx(tt,{size:16,className:"inline mr-2"}),"Insights (",r.length+c.length,")"]}),a.jsxs("button",{onClick:()=>l("patterns"),className:"flex-1 px-4 py-2 rounded-xl font-bold text-sm transition-all "+("patterns"===t?"bg-orange-600 text-white":"text-slate-400 hover:text-white hover:bg-slate-800"),children:[a.jsx(i,{size:16,className:"inline mr-2"}),"Patterns"]}),a.jsxs("button",{onClick:()=>l("abtests"),className:"flex-1 px-4 py-2 rounded-xl font-bold text-sm transition-all "+("abtests"===t?"bg-orange-600 text-white":"text-slate-400 hover:text-white hover:bg-slate-800"),children:[a.jsx(Et,{size:16,className:"inline mr-2"}),"A/B Tests (",_.length,")"]})]}),"insights"===t&&a.jsx("div",{className:"space-y-4",children:o?a.jsx("div",{className:"text-center py-12",children:a.jsx(f,{size:32,className:"animate-spin mx-auto text-slate-600"})}):a.jsxs(a.Fragment,{children:[r.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"text-lg font-black text-white flex items-center gap-2",children:[a.jsx(Ue,{className:"text-red-500",size:20}),"Needs Attention (",r.length,")"]}),r.map(e=>{const t=e.recommendation.includes("CRITICAL")?"critical":e.recommendation.includes("HIGH")?"warning":"info",s=e.roi<.5?"negative_roi":e.roi<1?"low_roi":e.ctr<1?"low_ctr":"low_performance";return a.jsxs("div",{className:`border rounded-2xl p-4 ${$(t)}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h5",{className:"font-bold text-white mb-1",children:e.campaign_title}),a.jsx("p",{className:"text-xs opacity-75 uppercase font-black",children:s.replace("_"," ")})]}),a.jsx("span",{className:"text-xs font-black px-3 py-1 rounded-full bg-black/20 uppercase",children:t})]}),a.jsx("p",{className:"text-sm mb-3",children:e.recommendation}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-xs",children:[a.jsxs("div",{children:[a.jsx("p",{className:"opacity-60",children:"CTR"}),a.jsxs("p",{className:"font-bold",children:[e.ctr.toFixed(2),"%"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"opacity-60",children:"ROI"}),a.jsxs("p",{className:"font-bold",children:[e.roi.toFixed(0),"%"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"opacity-60",children:"Spend"}),a.jsxs("p",{className:"font-bold",children:["€",e.total_spend.toFixed(0)]})]})]})]},e.campaign_id)})]}),c.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-lg font-black text-white",children:"Campaign Insights"}),c.map(e=>a.jsxs("div",{className:`border rounded-2xl p-4 ${$(e.severity)}`,children:[a.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[U(e.severity),a.jsxs("div",{className:"flex-1",children:[a.jsx("h5",{className:"font-bold text-white mb-1",children:e.title}),a.jsx("p",{className:"text-sm mb-2",children:e.description}),e.ai_recommendation&&a.jsxs("div",{className:"bg-black/20 rounded-xl p-3 mt-2",children:[a.jsx("p",{className:"text-xs font-bold mb-1",children:"🤖 AI Recommendation:"}),a.jsx("p",{className:"text-sm",children:e.ai_recommendation})]})]})]}),!e.is_acted_upon&&a.jsx("button",{onClick:()=>L(e.id,e.suggested_action),className:"w-full py-2 bg-black/20 hover:bg-black/30 rounded-xl text-sm font-bold transition-all",children:"✅ Mark as Acted Upon"})]},e.id))]}),0===r.length&&0===c.length&&a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-12 text-center",children:[a.jsx(at,{size:48,className:"mx-auto mb-4 text-emerald-500"}),a.jsx("h4",{className:"text-xl font-black text-white mb-2",children:"All Campaigns Performing Well!"}),a.jsx("p",{className:"text-slate-400",children:"No critical issues detected. Keep up the great work!"})]})]})}),"patterns"===t&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6",children:[a.jsxs("h4",{className:"text-lg font-black text-white mb-4 flex items-center gap-2",children:[a.jsx(v,{className:"text-orange-500"}),"Top Performing Platforms"]}),a.jsx("div",{className:"space-y-3",children:p.map((e,t)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800 rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-2xl font-black text-orange-500",children:["#",t+1]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-white capitalize",children:e.element_value}),a.jsxs("p",{className:"text-xs text-slate-400",children:[e.campaign_count," campaigns"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm font-bold text-emerald-400",children:[e.avg_ctr.toFixed(2),"% CTR"]}),a.jsxs("p",{className:"text-xs text-slate-400",children:[e.total_impressions.toLocaleString()," views"]})]})]},t))})]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6",children:[a.jsxs("h4",{className:"text-lg font-black text-white mb-4 flex items-center gap-2",children:[a.jsx(Et,{className:"text-orange-500"}),"Top Performing Audiences"]}),a.jsx("div",{className:"space-y-3",children:g.map((e,t)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800 rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-2xl font-black text-orange-500",children:["#",t+1]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-white capitalize",children:e.element_value.replace("-"," ")}),a.jsxs("p",{className:"text-xs text-slate-400",children:[e.campaign_count," campaigns"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm font-bold text-emerald-400",children:[e.avg_ctr.toFixed(2),"% CTR"]}),a.jsxs("p",{className:"text-xs text-slate-400",children:[e.total_conversions.toLocaleString()," conversions"]})]})]},t))})]})]}),"abtests"===t&&a.jsxs("div",{className:"space-y-4",children:[e&&a.jsx("button",{onClick:()=>D(e,z),disabled:I,className:"w-full py-3 bg-orange-600 hover:bg-orange-700 disabled:opacity-50 rounded-2xl font-bold flex items-center justify-center gap-2",children:I?a.jsxs(a.Fragment,{children:[a.jsx(f,{size:16,className:"animate-spin"})," Creating Test..."]}):a.jsxs(a.Fragment,{children:[a.jsx(N,{size:16})," Create New A/B Test"]})}),S?a.jsx("div",{className:"text-center py-12",children:a.jsx(f,{size:32,className:"animate-spin mx-auto text-slate-600"})}):0===_.length?a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-12 text-center",children:[a.jsx(Et,{size:48,className:"mx-auto mb-4 text-slate-600"}),a.jsx("p",{className:"text-slate-400",children:"No A/B tests yet. Create one to optimize your campaigns!"})]}):_.map(e=>{var t,s;return a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h5",{className:"font-bold text-white",children:e.test_name}),a.jsx("span",{className:"text-xs font-black px-3 py-1 rounded-full uppercase "+("completed"===e.status?"bg-emerald-500/10 text-emerald-400":"running"===e.status?"bg-blue-500/10 text-blue-400":"bg-slate-700 text-slate-400"),children:e.status})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[a.jsxs("div",{className:"bg-slate-800 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"Variant A"}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("p",{children:[a.jsx("span",{className:"text-slate-500",children:"Impressions:"})," ",a.jsx("span",{className:"text-white font-bold",children:e.variant_a_impressions})]}),a.jsxs("p",{children:[a.jsx("span",{className:"text-slate-500",children:"Clicks:"})," ",a.jsx("span",{className:"text-white font-bold",children:e.variant_a_clicks})]}),a.jsxs("p",{children:[a.jsx("span",{className:"text-slate-500",children:"Conversions:"})," ",a.jsx("span",{className:"text-white font-bold",children:e.variant_a_conversions})]})]})]}),a.jsxs("div",{className:"bg-slate-800 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"Variant B"}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("p",{children:[a.jsx("span",{className:"text-slate-500",children:"Impressions:"})," ",a.jsx("span",{className:"text-white font-bold",children:e.variant_b_impressions})]}),a.jsxs("p",{children:[a.jsx("span",{className:"text-slate-500",children:"Clicks:"})," ",a.jsx("span",{className:"text-white font-bold",children:e.variant_b_clicks})]}),a.jsxs("p",{children:[a.jsx("span",{className:"text-slate-500",children:"Conversions:"})," ",a.jsx("span",{className:"text-white font-bold",children:e.variant_b_conversions})]})]})]})]}),e.winner&&a.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-xl p-3 mb-3",children:[a.jsxs("p",{className:"text-sm font-bold text-emerald-400 mb-1",children:["🏆 Winner: Variant ",e.winner.toUpperCase()]}),a.jsxs("p",{className:"text-xs text-emerald-300",children:[null==(t=e.improvement_percentage)?void 0:t.toFixed(1),"% improvement • ",null==(s=e.confidence_level)?void 0:s.toFixed(0),"% confidence"]}),e.ai_recommendation&&a.jsx("p",{className:"text-xs text-slate-300 mt-2",children:e.ai_recommendation})]}),"running"===e.status&&a.jsx("button",{onClick:()=>F(e.id),className:"w-full py-2 bg-blue-600 hover:bg-blue-700 rounded-xl text-sm font-bold",children:"🔍 Evaluate Results"})]},e.id)})]})]})};async function ms(e=50,t=1,a=24){try{const{data:l,error:r}=await s.rpc("identify_underperforming_campaigns",{min_spend:e,max_roi:t,min_duration_hours:a});if(r)throw r;return l||[]}catch(l){return[]}}async function hs(e=3,t=10,a=3){try{const{data:l,error:r}=await s.rpc("identify_scaling_candidates",{min_roi:e,min_conversions:t,max_budget_multiplier:a});if(r)throw r;return l||[]}catch(l){return[]}}async function ps(e=50){try{const{data:t,error:a}=await s.from("autonomous_actions").select("*").order("created_at",{ascending:!1}).limit(e);if(a)throw a;return t||[]}catch(t){return[]}}async function us(){try{const{data:e,error:t}=await s.from("autonomous_rules").select("*").eq("is_active",!0).order("priority",{ascending:!1});if(t)throw t;return e||[]}catch(e){return[]}}async function gs(e){try{let e=s.from("optimization_opportunities").select("*").eq("status","open").order("created_at",{ascending:!1});const{data:t,error:a}=await e;if(a)throw a;return t||[]}catch(t){return[]}}async function bs(){try{const[e,t]=await Promise.all([s.from("autonomous_actions").select("action_type, confidence_score",{count:"exact"}),s.from("optimization_opportunities").select("*",{count:"exact"}).eq("status","open")]),a=e.data||[],l=a.filter(e=>"auto_pause"===e.action_type).length,r=a.filter(e=>"auto_scale_up"===e.action_type).length,i=a.length>0?a.reduce((e,t)=>e+(t.confidence_score||0),0)/a.length:0;return{total_actions:a.length,paused_campaigns:l,scaled_campaigns:r,open_opportunities:t.count||0,avg_confidence:Math.round(10*i)/10}}catch(e){return{total_actions:0,paused_campaigns:0,scaled_campaigns:0,open_opportunities:0,avg_confidence:0}}}function js(){const[e,t]=pe.useState({total_actions:0,paused_campaigns:0,scaled_campaigns:0,posted_campaigns:0,open_opportunities:0,avg_confidence:0}),[r,n]=pe.useState([]),[c,d]=pe.useState([]),[o,x]=pe.useState([]),[m,h]=pe.useState([]),[p,u]=pe.useState([]),[g,b]=pe.useState(!1),[j,v]=pe.useState(null),[k,_]=pe.useState("overview"),C=async()=>{const[e,s,a,l,r,i]=await Promise.all([bs(),ps(20),gs(),us(),ms(),hs()]);t(e),n(s),d(a),x(l),h(r),u(i)};pe.useEffect(()=>{C();const e=setInterval(C,3e4);return()=>clearInterval(e)},[]);const S=async e=>{if(!confirm("Rollback this autonomous action? This will restore the previous campaign state."))return;const t=await async function(e){var t;try{const{data:a,error:l}=await s.from("autonomous_actions").select("*").eq("id",e).single();if(l||!a)throw l||new Error("Action not found");if("auto_pause"===a.action_type)await s.from("campaigns").update({status:"active"}).eq("id",a.campaign_id);else if("auto_scale_up"===a.action_type||"auto_scale_down"===a.action_type){const e=null==(t=a.previous_state)?void 0:t.budget;e&&await s.from("campaigns").update({budget:e}).eq("id",a.campaign_id)}const{error:r}=await s.from("autonomous_actions").update({status:"rolled_back"}).eq("id",e);if(r)throw r;return!0}catch(a){return!1}}(e);t?(alert("Action rolled back successfully"),C()):alert("Error rolling back action")},A=async(e,t)=>{const a=await async function(e,t){try{const a={status:t};"resolved"!==t&&"dismissed"!==t||(a.resolved_at=(new Date).toISOString());const{error:l}=await s.from("optimization_opportunities").update(a).eq("id",e);if(l)throw l;return!0}catch(a){return!1}}(e,t);a&&C()},I=async(e,t)=>{const a=await async function(e,t){try{const{error:a}=await s.from("autonomous_rules").update({is_active:t,updated_at:(new Date).toISOString()}).eq("id",e);if(a)throw a;return!0}catch(a){return!1}}(e,!t);a&&C()},T=e=>{const t={critical:"bg-red-500/10 text-red-400 border-red-500/30",high:"bg-orange-500/10 text-orange-400 border-orange-500/30",medium:"bg-yellow-500/10 text-yellow-400 border-yellow-500/30",low:"bg-indigo-500/10 text-indigo-400 border-indigo-500/30"};return a.jsx("span",{className:`px-3 py-1 text-[10px] font-black rounded-lg border uppercase tracking-widest ${t[e]||t.low}`,children:e})},z=e=>{switch(e){case"auto_pause":return a.jsx(Pt,{className:"w-4 h-4 text-red-500"});case"auto_scale_up":return a.jsx(i,{className:"w-4 h-4 text-green-500"});case"auto_scale_down":return a.jsx(Dt,{className:"w-4 h-4 text-orange-500"});case"optimization_applied":return a.jsx(N,{className:"w-4 h-4 text-purple-500"});default:return a.jsx(pt,{className:"w-4 h-4 text-gray-500"})}};return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-3xl font-black tracking-tighter flex items-center gap-3 text-white",children:[a.jsx(lt,{className:"w-8 h-8 text-indigo-500"}),"Autonomous Operations"]}),a.jsx("p",{className:"text-slate-400 text-sm font-medium mt-1",children:"AI-powered self-optimizing campaign management"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[j&&a.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1 bg-slate-900 border border-slate-800 px-4 py-2 rounded-xl",children:[a.jsx(Fe,{className:"w-3 h-3"}),"Last run: ",j.toLocaleTimeString()]}),a.jsx("button",{onClick:async()=>{b(!0);try{const e=await async function(){try{const{data:e,error:t}=await s.rpc("run_autonomous_operations_with_posting");if(t)throw t;return e}catch(e){return null}}();e&&(v(new Date),await C(),alert(`Autonomous cycle complete!\n✅ Paused: ${e.actions_taken.campaigns_paused}\n✅ Scaled: ${e.actions_taken.campaigns_scaled}\n📱 Posted: ${e.actions_taken.campaigns_posted||0}\n✨ Opportunities: ${e.actions_taken.opportunities_detected}`))}catch(e){alert("Error running autonomous operations")}finally{b(!1)}},disabled:g,className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-2xl font-black text-xs uppercase tracking-widest transition-all flex items-center gap-2 shadow-xl shadow-indigo-600/20",children:g?a.jsxs(a.Fragment,{children:[a.jsx(f,{className:"w-4 h-4 animate-spin"}),"Running..."]}):a.jsxs(a.Fragment,{children:[a.jsx(y,{className:"w-4 h-4"}),"Run Cycle"]})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-indigo-500/50 transition-all",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx(pt,{className:"w-5 h-5 text-indigo-500"}),a.jsx("span",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest",children:"Total"})]}),a.jsx("div",{className:"text-3xl font-black text-white",children:e.total_actions}),a.jsx("div",{className:"text-[10px] text-slate-500 font-medium mt-1",children:"Actions Taken"})]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-red-500/50 transition-all",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx(Pt,{className:"w-5 h-5 text-red-500"}),a.jsx("span",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest",children:"Paused"})]}),a.jsx("div",{className:"text-3xl font-black text-white",children:e.paused_campaigns}),a.jsx("div",{className:"text-[10px] text-slate-500 font-medium mt-1",children:"Auto-Paused"})]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-emerald-500/50 transition-all",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx(i,{className:"w-5 h-5 text-emerald-500"}),a.jsx("span",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest",children:"Scaled"})]}),a.jsx("div",{className:"text-3xl font-black text-white",children:e.scaled_campaigns}),a.jsx("div",{className:"text-[10px] text-slate-500 font-medium mt-1",children:"Auto-Scaled"})]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-pink-500/50 transition-all",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx(nt,{className:"w-5 h-5 text-pink-500"}),a.jsx("span",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest",children:"Posted"})]}),a.jsx("div",{className:"text-3xl font-black text-white",children:e.posted_campaigns}),a.jsx("div",{className:"text-[10px] text-slate-500 font-medium mt-1",children:"Auto-Posted"})]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-orange-500/50 transition-all",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx(tt,{className:"w-5 h-5 text-orange-500"}),a.jsx("span",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest",children:"Opps"})]}),a.jsx("div",{className:"text-3xl font-black text-white",children:e.open_opportunities}),a.jsx("div",{className:"text-[10px] text-slate-500 font-medium mt-1",children:"Open Items"})]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-violet-500/50 transition-all",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx(l,{className:"w-5 h-5 text-violet-500"}),a.jsx("span",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest",children:"Conf"})]}),a.jsxs("div",{className:"text-3xl font-black text-white",children:[e.avg_confidence,"%"]}),a.jsx("div",{className:"text-[10px] text-slate-500 font-medium mt-1",children:"Avg. Confidence"})]})]}),a.jsx("div",{className:"border-b border-slate-800",children:a.jsx("div",{className:"flex gap-6",children:["overview","actions","opportunities","rules"].map(e=>a.jsx("button",{onClick:()=>_(e),className:"pb-4 px-2 text-sm font-bold border-b-2 transition-colors uppercase tracking-widest text-[10px] "+(k===e?"border-indigo-500 text-indigo-500":"border-transparent text-slate-500 hover:text-slate-300"),children:e},e))})}),"overview"===k&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-8 shadow-2xl",children:[a.jsxs("h3",{className:"text-lg font-black flex items-center gap-3 mb-6 text-white",children:[a.jsx(Dt,{className:"w-5 h-5 text-red-500"}),"Underperforming"]}),0===m.length?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(at,{className:"w-12 h-12 mx-auto mb-3 text-emerald-500"}),a.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"All campaigns performing well!"})]}):a.jsx("div",{className:"space-y-3",children:m.slice(0,5).map(e=>a.jsxs("div",{className:"p-4 bg-slate-950 rounded-2xl border border-red-500/20 hover:border-red-500/50 transition-all",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsx("div",{className:"font-bold text-sm text-white",children:e.campaign_title}),a.jsxs("span",{className:"text-xs font-black text-red-400",children:["ROI: ",e.roi.toFixed(2),"x"]})]}),a.jsx("div",{className:"text-xs text-slate-400 mb-3",children:e.recommendation}),a.jsxs("div",{className:"flex gap-4 text-xs text-slate-500 font-mono",children:[a.jsxs("span",{children:["$",e.total_spend.toFixed(2)]}),a.jsxs("span",{children:["CTR: ",e.ctr.toFixed(2),"%"]}),a.jsxs("span",{children:[Math.floor(e.hours_running),"h"]})]})]},e.campaign_id))})]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-8 shadow-2xl",children:[a.jsxs("h3",{className:"text-lg font-black flex items-center gap-3 mb-6 text-white",children:[a.jsx(i,{className:"w-5 h-5 text-emerald-500"}),"Scaling Ready"]}),0===p.length?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ct,{className:"w-12 h-12 mx-auto mb-3 text-indigo-500"}),a.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"No campaigns ready for scaling yet"})]}):a.jsx("div",{className:"space-y-3",children:p.slice(0,5).map(e=>a.jsxs("div",{className:"p-4 bg-slate-950 rounded-2xl border border-emerald-500/20 hover:border-emerald-500/50 transition-all",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsx("div",{className:"font-bold text-sm text-white",children:e.campaign_title}),a.jsxs("span",{className:"text-xs font-black text-emerald-400",children:["ROI: ",e.roi.toFixed(2),"x"]})]}),a.jsx("div",{className:"text-xs text-slate-400 mb-3",children:e.reasoning}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex gap-3 text-xs text-slate-500 font-mono",children:[a.jsxs("span",{children:["$",e.current_budget]}),a.jsxs("span",{className:"text-emerald-400",children:["→ $",e.suggested_budget]})]}),a.jsxs("span",{className:"text-xs bg-emerald-500/10 text-emerald-400 px-3 py-1 rounded-lg font-black",children:[e.confidence_score.toFixed(0),"%"]})]})]},e.campaign_id))})]})]}),"actions"===k&&a.jsx("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl shadow-2xl",children:a.jsxs("div",{className:"p-8 space-y-4",children:[a.jsx("h3",{className:"text-lg font-black text-white mb-6",children:"Recent Actions"}),a.jsx("div",{className:"space-y-3",children:0===r.length?a.jsx("div",{className:"text-center py-12 text-slate-400",children:"No actions yet"}):r.map(e=>a.jsx("div",{className:"p-4 bg-slate-950 rounded-2xl border border-slate-800 hover:border-slate-700 transition-all",children:a.jsxs("div",{className:"flex items-start gap-3",children:[z(e.action_type),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"font-bold text-sm text-white capitalize",children:e.action_type.replace(/_/g," ")}),a.jsx("span",{className:"text-[10px] text-slate-500",children:new Date(e.created_at).toLocaleString()})]}),a.jsx("div",{className:"text-sm text-slate-400 mb-3",children:e.reason}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs("span",{className:"text-[10px] bg-indigo-500/10 text-indigo-400 px-3 py-1 rounded-lg font-black",children:[e.confidence_score.toFixed(0),"%"]}),a.jsx("span",{className:"text-[10px] px-3 py-1 rounded-lg font-black "+("executed"===e.status?"bg-emerald-500/10 text-emerald-400":"failed"===e.status?"bg-red-500/10 text-red-400":"rolled_back"===e.status?"bg-orange-500/10 text-orange-400":"bg-yellow-500/10 text-yellow-400"),children:e.status})]}),"executed"===e.status&&a.jsx("button",{onClick:()=>S(e.id),className:"text-xs text-red-400 hover:text-red-300 font-bold",children:"Rollback"})]})]})]})},e.id))})]})}),"opportunities"===k&&a.jsx("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl shadow-2xl",children:a.jsxs("div",{className:"p-8 space-y-4",children:[a.jsx("h3",{className:"text-lg font-black text-white mb-6",children:"Opportunities"}),a.jsx("div",{className:"space-y-3",children:0===c.length?a.jsx("div",{className:"text-center py-12 text-slate-400",children:"No opportunities detected"}):c.map(e=>a.jsxs("div",{className:"p-4 bg-slate-950 rounded-2xl border border-slate-800 hover:border-orange-500/50 transition-all",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(tt,{className:"w-4 h-4 text-orange-500"}),a.jsx("span",{className:"font-bold text-sm text-white capitalize",children:e.opportunity_type.replace(/_/g," ")})]}),T(e.severity)]}),a.jsx("div",{className:"text-sm text-slate-400 mb-3",children:e.description}),a.jsxs("div",{className:"text-sm text-slate-300 mb-4 p-3 bg-slate-900/50 rounded-xl border border-orange-500/20",children:["💡 ",e.suggested_action]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-xs bg-indigo-500/10 text-indigo-400 px-3 py-1 rounded-lg font-black",children:[e.confidence_score.toFixed(0),"%"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>A(e.id,"in_progress"),className:"text-xs text-indigo-400 hover:text-indigo-300 font-bold",children:"Start"}),a.jsx("button",{onClick:()=>A(e.id,"resolved"),className:"text-xs text-emerald-400 hover:text-emerald-300 font-bold",children:"Resolve"}),a.jsx("button",{onClick:()=>A(e.id,"dismissed"),className:"text-xs text-slate-500 hover:text-slate-400 font-bold",children:"Dismiss"})]})]})]},e.id))})]})}),"rules"===k&&a.jsx("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl shadow-2xl",children:a.jsxs("div",{className:"p-8 space-y-4",children:[a.jsx("h3",{className:"text-lg font-black text-white mb-6",children:"Rules"}),a.jsx("div",{className:"space-y-3",children:0===o.length?a.jsx("div",{className:"text-center py-12 text-slate-400",children:"No rules configured"}):o.map(e=>a.jsx("div",{className:"p-4 bg-slate-950 rounded-2xl border border-slate-800 hover:border-slate-700 transition-all",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(w,{className:"w-4 h-4 text-indigo-500"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-bold text-white",children:e.rule_name}),a.jsxs("div",{className:"flex gap-3 text-xs text-slate-500 font-mono mt-1",children:[a.jsxs("span",{children:["Type: ",e.rule_type]}),a.jsxs("span",{children:["Priority: ",e.priority]})]})]})]}),a.jsx("button",{onClick:()=>I(e.id,e.is_active),className:"px-4 py-2 rounded-lg text-xs font-black uppercase tracking-widest transition-all "+(e.is_active?"bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20":"bg-slate-800 text-slate-500 hover:bg-slate-700"),children:e.is_active?"Active":"Inactive"})]})},e.id))})]})})]})}const fs=()=>{const[e,t]=pe.useState([]),[s,l]=pe.useState({total:0,active:0,used:0,expired:0,creditsDistributed:0}),[r,i]=pe.useState(10),[n,c]=pe.useState(30),[d,o]=pe.useState(!1),[x,m]=pe.useState(null),[p,u]=pe.useState(null),g=async()=>{o(!0);try{const[e,s]=await Promise.all([_(),C()]);t(e),l(s)}catch(e){m({type:"error",text:"Failed to load data"})}finally{o(!1)}};pe.useEffect(()=>{g()},[]);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Beta Invitation Manager"}),a.jsx("p",{className:"text-slate-400",children:"Generate and manage beta testing invitation codes"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[a.jsxs("div",{className:"bg-slate-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(N,{size:18,className:"text-yellow-400"}),a.jsx("p",{className:"text-sm text-slate-400",children:"Total Codes"})]}),a.jsx("p",{className:"text-2xl font-bold",children:s.total})]}),a.jsxs("div",{className:"bg-slate-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Ze,{size:18,className:"text-green-400"}),a.jsx("p",{className:"text-sm text-slate-400",children:"Active"})]}),a.jsx("p",{className:"text-2xl font-bold",children:s.active})]}),a.jsxs("div",{className:"bg-slate-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(k,{size:18,className:"text-blue-400"}),a.jsx("p",{className:"text-sm text-slate-400",children:"Used"})]}),a.jsx("p",{className:"text-2xl font-bold",children:s.used})]}),a.jsxs("div",{className:"bg-slate-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Qe,{size:18,className:"text-red-400"}),a.jsx("p",{className:"text-sm text-slate-400",children:"Expired"})]}),a.jsx("p",{className:"text-2xl font-bold",children:s.expired})]}),a.jsxs("div",{className:"bg-slate-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(N,{size:18,className:"text-purple-400"}),a.jsx("p",{className:"text-sm text-slate-400",children:"Credits Given"})]}),a.jsxs("p",{className:"text-2xl font-bold",children:[s.creditsDistributed/1e3,"k"]})]})]}),x&&a.jsxs("div",{className:"p-4 rounded-lg flex gap-2 "+("success"===x.type?"bg-green-500/20 border border-green-500 text-green-300":"bg-red-500/20 border border-red-500 text-red-300"),children:[a.jsx(Qe,{size:20,className:"flex-shrink-0 mt-0.5"}),a.jsx("p",{children:x.text})]}),a.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[a.jsx("h3",{className:"text-lg font-bold mb-4",children:"Generate New Codes"}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Number of Codes"}),a.jsx("input",{type:"number",value:r,onChange:e=>i(parseInt(e.target.value)||1),min:"1",max:"1000",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Expiry (Days)"}),a.jsx("input",{type:"number",value:n,onChange:e=>c(parseInt(e.target.value)||30),min:"1",max:"365",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]})]}),a.jsx("button",{onClick:async()=>{o(!0);try{const e=await S(r,n);e.length>0?(m({type:"success",text:`✅ Generated ${e.length} beta invitation codes!`}),await g()):m({type:"error",text:"Failed to generate codes"})}catch(e){m({type:"error",text:"An error occurred"})}finally{o(!1)}},disabled:d,className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 disabled:opacity-50 px-6 py-3 rounded-lg font-bold flex items-center justify-center gap-2",children:d?a.jsxs(a.Fragment,{children:[a.jsx(ot,{size:20,className:"animate-spin"}),"Generating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(N,{size:20}),"Generate ",r," Codes"]})})]}),a.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-bold",children:["All Codes (",e.length,")"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:g,disabled:d,className:"p-2 hover:bg-slate-700 rounded transition",children:a.jsx($e,{size:20,className:d?"animate-spin":""})}),a.jsxs("button",{onClick:()=>{const t=e.map(e=>`${e.code},${e.status},${e.redeemed_at||"N/A"}`).join("\n"),s=new Blob(["Code,Status,Redeemed At\n"+t],{type:"text/csv"}),a=window.URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download="beta-invitations.csv",l.click()},disabled:0===e.length,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 disabled:opacity-50 rounded flex items-center gap-2",children:[a.jsx(Ke,{size:18}),"Export CSV"]})]})]}),a.jsxs("div",{className:"flex gap-2 mb-4 border-b border-slate-700",children:[a.jsxs("button",{className:"px-4 py-2 text-indigo-400 border-b-2 border-indigo-400",children:["All (",e.length,")"]}),a.jsxs("button",{className:"px-4 py-2 text-slate-400 hover:text-slate-300",children:["Active (",s.active,")"]}),a.jsxs("button",{className:"px-4 py-2 text-slate-400 hover:text-slate-300",children:["Used (",s.used,")"]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-slate-700",children:[a.jsx("th",{className:"text-left py-3 px-4",children:"Code"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Created"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Expires"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Used By"}),a.jsx("th",{className:"text-right py-3 px-4",children:"Actions"})]})}),a.jsx("tbody",{children:0===e.length?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"text-center py-8 text-slate-400",children:"No codes generated yet. Create some above!"})}):e.map(e=>a.jsxs("tr",{className:"border-b border-slate-700 hover:bg-slate-700/50",children:[a.jsx("td",{className:"py-3 px-4 font-mono text-xs",children:e.code}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold "+("active"===e.status?"bg-green-500/20 text-green-300":"used"===e.status?"bg-blue-500/20 text-blue-300":"bg-red-500/20 text-red-300"),children:e.status})}),a.jsx("td",{className:"py-3 px-4 text-xs",children:new Date(e.created_at).toLocaleDateString()}),a.jsx("td",{className:"py-3 px-4 text-xs",children:new Date(e.expires_at).toLocaleDateString()}),a.jsx("td",{className:"py-3 px-4 text-xs",children:e.redeemed_at?new Date(e.redeemed_at).toLocaleDateString():"-"}),a.jsx("td",{className:"py-3 px-4 text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>{return t=e.code,navigator.clipboard.writeText(t),u(t),void setTimeout(()=>u(null),2e3);var t},className:"p-2 hover:bg-slate-600 rounded transition",title:"Copy code",children:p===e.code?a.jsx(Ze,{size:18,className:"text-green-400"}):a.jsx(xt,{size:18})}),"active"===e.status&&a.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to revoke this invitation?"))try{await A(e)&&(m({type:"success",text:"Invitation revoked"}),await g())}catch(t){m({type:"error",text:"Failed to revoke invitation"})}})(e.id),className:"p-2 hover:bg-red-500/20 rounded transition text-red-400",title:"Revoke code",children:a.jsx(h,{size:18})})]})})]},e.id))})]})})]})]})},ys=new Pe({apiKey:"AIzaSyB2UCRyekL4mmj7ShgD4ILZ1IvPjl8Jj64"});async function Ns(e,t=30){try{const s="https://anlivujgkjmajkcgbaxw.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFubGl2dWpna2ptYWprY2diYXh3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU5OTY0OTQsImV4cCI6MjA4MTU3MjQ5NH0.5SzkZg_PMqgdMClS1ftg4ZT_Ddyq1zOi-ZOLe1yuRgY",l=await fetch(`${s}/functions/v1/analytics-bridge`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({metricType:e,days:t,timezone:"UTC"})});return l.ok?await l.json():generateMockGAMetrics(e)}catch(s){return generateMockGAMetrics(e)}}async function vs(e=30){try{const t="https://anlivujgkjmajkcgbaxw.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFubGl2dWpna2ptYWprY2diYXh3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU5OTY0OTQsImV4cCI6MjA4MTU3MjQ5NH0.5SzkZg_PMqgdMClS1ftg4ZT_Ddyq1zOi-ZOLe1yuRgY",a=await fetch(`${t}/functions/v1/analytics-bridge-timeseries`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({metricType:"traffic",days:e,timezone:"Europe/Tallinn"})});return a.ok?await a.json():[]}catch(t){return[]}}async function ws(e=30){try{const t="https://anlivujgkjmajkcgbaxw.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFubGl2dWpna2ptYWprY2diYXh3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU5OTY0OTQsImV4cCI6MjA4MTU3MjQ5NH0.5SzkZg_PMqgdMClS1ftg4ZT_Ddyq1zOi-ZOLe1yuRgY",a=await fetch(`${t}/functions/v1/analytics-bridge-funnel`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({days:e,timezone:"Europe/Tallinn"})});return a.ok?await a.json():[]}catch(t){return[]}}async function ks(e="facebook"){try{const t="https://anlivujgkjmajkcgbaxw.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFubGl2dWpna2ptYWprY2diYXh3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU5OTY0OTQsImV4cCI6MjA4MTU3MjQ5NH0.5SzkZg_PMqgdMClS1ftg4ZT_Ddyq1zOi-ZOLe1yuRgY",a=await fetch(`${t}/functions/v1/meta-insights-bridge`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({platform:e,period:"day"})});return a.ok?await a.json():[]}catch(t){return[]}}async function _s(e="",t=50){try{const s="https://anlivujgkjmajkcgbaxw.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFubGl2dWpna2ptYWprY2diYXh3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU5OTY0OTQsImV4cCI6MjA4MTU3MjQ5NH0.5SzkZg_PMqgdMClS1ftg4ZT_Ddyq1zOi-ZOLe1yuRgY",l=new Date(Date.now()-7776e6).toISOString().split("T")[0],r=(new Date).toISOString().split("T")[0],i=await fetch(`${s}/functions/v1/seo-metrics-bridge`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({query:e,limit:t,startDate:l,endDate:r})});return i.ok?await i.json():[]}catch(s){return[]}}async function Cs(e){try{const t=e||await _s("",10);return Array.isArray(t)&&0!==t.length?await async function(e){try{const t=ys,s=e.reduce((e,t)=>e+t.position,0)/e.length,a=e.reduce((e,t)=>e+t.ctr,0)/e.length,l=e.reduce((e,t)=>e+t.impressions,0),r=`\nCurrent SEO Metrics:\n- Average Ranking Position: ${s.toFixed(1)} (target: 3)\n- Average CTR: ${a.toFixed(2)}% (target: 5-10%)\n- Total Monthly Impressions: ${l}\n- Keywords Tracked: ${e.length}\n\nTop Keywords:\n${e.slice(0,5).map(e=>`- "${e.keyword}": Pos ${e.position}, ${e.impressions} impressions, ${e.ctr.toFixed(2)}% CTR`).join("\n")}\n\nProblem Areas (outside top 10):\n${e.filter(e=>e.position>10).slice(0,5).map(e=>`- "${e.keyword}": Pos ${e.position} (${e.impressions} impressions)`).join("\n")}\n    `.trim(),i=(await t.models.generateContent({model:"gemini-2.5-flash",contents:`You are an expert SEO strategist for EventNexus, an AI-powered event management platform.\n\n${r}\n\nAnalyze these metrics and provide 5-7 specific, actionable SEO recommendations to improve our Google search visibility and rankings.\n\nFor each recommendation, provide in JSON format:\n- type: "keyword", "content", "meta", "technical", or "strategy"\n- priority: "high", "medium", or "low"\n- title: concise recommendation title\n- description: detailed explanation\n- action: specific steps to implement\n- impact: expected impact on rankings and traffic\n\nReturn as a valid JSON array.`})).text().match(/\[[\s\S]*\]/);return i?JSON.parse(i[0]).slice(0,7):[]}catch(t){return[]}}(t):[]}catch(t){return[]}}async function Ss(e){try{const t=e||await _s("",20);return Array.isArray(t)&&0!==t.length?await async function(e){try{const t=ys,s=e.filter(e=>e.position>3&&e.position<=10),a=(await t.models.generateContent({model:"gemini-2.5-flash",contents:`You are an SEO optimization expert. Analyze these keywords that are close to page 1 (positions 4-10) and suggest how to move them to the top 3 positions.\n\nKeywords:\n${s.slice(0,5).map(e=>`- "${e.keyword}": Currently at position ${e.position}, ${e.impressions} impressions/month`).join("\n")}\n\nFor each keyword, provide in JSON format:\n- keyword: the keyword\n- currentPosition: current Google ranking position\n- opportunity: "quick_win" (1-2 tweaks), "medium_effort" (content update), "long_term" (link building)\n- suggestion: specific optimization strategy\n- expectedImprovement: expected position improvement\n- action: concrete action steps\n\nReturn as a valid JSON array.`})).text().match(/\[[\s\S]*\]/);return a?JSON.parse(a[0]):[]}catch(t){return[]}}(t):[]}catch(t){return[]}}async function As(e){try{const t=e||await _s("",30);return Array.isArray(t)&&0!==t.length?await async function(e,t="eventnexus.eu"){try{const s=ys,a=e.reduce((e,t)=>e+t.position,0)/e.length,l=e.slice(0,5).map(e=>e.keyword),r=(await s.models.generateContent({model:"gemini-2.5-flash",contents:`Create a 90-day SEO strategy for ${t}, an event management platform.\n\nCurrent State:\n- Average ranking position: ${a.toFixed(1)}\n- Top keywords: ${l.join(", ")}\n- Primary goal: Improve visibility and organic traffic by 40%\n\nProvide a detailed 3-phase strategy:\n1. Phase 1 (Days 1-30): Quick wins and immediate improvements\n2. Phase 2 (Days 31-60): Content expansion and authority building\n3. Phase 3 (Days 61-90): Advanced optimization and link building\n\nInclude:\n- Quick Wins: 3-5 fast-to-implement strategies\n- Monthly Goals: Measurable KPIs for each month\n\nReturn as valid JSON with phase1, phase2, phase3, quickWins, monthlyGoals fields.`})).text().match(/\{[\s\S]*\}/);return r?JSON.parse(r[0]):null}catch(s){return null}}(t):null}catch(t){return null}}const Is=()=>{const[e,t]=pe.useState("recommendations"),[s,l]=pe.useState([]),[r,n]=pe.useState([]),[c,d]=pe.useState(null),[o,x]=pe.useState(!1),[m,h]=pe.useState(null),[p,u]=pe.useState([]);pe.useEffect(()=>{g()},[]);const g=async()=>{x(!0);try{const t=await _s("",30);if(Array.isArray(t))if(u(t),"recommendations"===e){const e=await Cs(t);l(e||[])}else if("keywords"===e){const e=await Ss(t);n(e||[])}else if("strategy"===e){const e=await As(t);d(e)}}catch(t){}finally{x(!1)}},b=e=>{switch(e){case"high":return"bg-red-50 border-red-200";case"medium":return"bg-yellow-50 border-yellow-200";default:return"bg-blue-50 border-blue-200"}},j=e=>{switch(e){case"high":return a.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 text-xs font-semibold rounded",children:"High Priority"});case"medium":return a.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 text-xs font-semibold rounded",children:"Medium"});default:return a.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded",children:"Low"})}},f=e=>{switch(e){case"quick_win":return"bg-green-100 text-green-700";case"medium_effort":return"bg-orange-100 text-orange-700";default:return"bg-purple-100 text-purple-700"}};return a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(tt,{className:"w-6 h-6 text-amber-500"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"AI SEO Optimizer"})]}),a.jsx("button",{onClick:g,disabled:o,className:"p-2 hover:bg-gray-100 rounded-lg transition disabled:opacity-50",children:a.jsx($e,{className:"w-5 h-5 text-gray-600 "+(o?"animate-spin":"")})})]}),a.jsx("div",{className:"flex gap-2 mb-6 border-b border-gray-200",children:[{id:"recommendations",label:"AI Recommendations",icon:Et},{id:"keywords",label:"Keyword Opportunities",icon:i},{id:"strategy",label:"90-Day Strategy",icon:N}].map(s=>a.jsx("button",{onClick:()=>(async e=>{t(e),x(!0);try{if("recommendations"===e){const e=await Cs(p);l(e||[])}else if("keywords"===e){const e=await Ss(p);n(e||[])}else if("strategy"===e){const e=await As(p);d(e)}}finally{x(!1)}})(s.id),className:"px-4 py-3 border-b-2 font-medium text-sm transition "+(e===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"),children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(s.icon,{className:"w-4 h-4"}),s.label]})},s.id))}),o?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin",children:a.jsx($e,{className:"w-8 h-8 text-blue-500"})})}):"recommendations"===e?a.jsx("div",{className:"space-y-4",children:0===s.length?a.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:a.jsx("p",{className:"text-blue-700",children:"Loading AI recommendations..."})}):s.map((e,t)=>a.jsxs("div",{className:`border rounded-lg overflow-hidden transition ${b(e.priority)}`,children:[a.jsxs("button",{onClick:()=>h(m===`rec-${t}`?null:`rec-${t}`),className:"w-full p-4 flex items-start justify-between hover:opacity-80",children:[a.jsxs("div",{className:"flex items-start gap-3 text-left",children:[a.jsxs("div",{className:"mt-1",children:["keyword"===e.type&&a.jsx(Et,{className:"w-5 h-5 text-blue-600"}),"content"===e.type&&a.jsx(i,{className:"w-5 h-5 text-green-600"}),"meta"===e.type&&a.jsx(Qe,{className:"w-5 h-5 text-orange-600"}),"technical"===e.type&&a.jsx(N,{className:"w-5 h-5 text-purple-600"}),"strategy"===e.type&&a.jsx(tt,{className:"w-5 h-5 text-amber-600"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.title}),j(e.priority)]}),a.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:e.description})]})]}),m===`rec-${t}`?a.jsx(rt,{className:"w-5 h-5 text-gray-600 ml-2 flex-shrink-0"}):a.jsx(I,{className:"w-5 h-5 text-gray-600 ml-2 flex-shrink-0"})]}),m===`rec-${t}`&&a.jsx("div",{className:"px-4 pb-4 border-t border-gray-300 bg-white",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 text-sm mb-1",children:"Action Items:"}),a.jsx("p",{className:"text-sm text-gray-700",children:e.action})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 text-sm mb-1",children:"Expected Impact:"}),a.jsx("p",{className:"text-sm text-gray-700",children:e.impact})]})]})})]},t))}):"keywords"===e?a.jsx("div",{className:"space-y-4",children:0===r.length?a.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:a.jsx("p",{className:"text-blue-700",children:"Loading keyword opportunities..."})}):r.map((e,t)=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-gray-900",children:['"',e.keyword,'"']}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Currently at ",a.jsxs("span",{className:"font-semibold",children:["position ",e.currentPosition]})]})]}),a.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${f(e.opportunity)}`,children:"quick_win"===e.opportunity?"⚡ Quick Win":"medium_effort"===e.opportunity?"📈 Medium Effort":"🎯 Long Term"})]}),a.jsxs("div",{className:"space-y-2 mb-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600 font-semibold mb-1",children:"Strategy:"}),a.jsx("p",{className:"text-sm text-gray-700",children:e.suggestion})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600 font-semibold mb-1",children:"Expected Improvement:"}),a.jsx("p",{className:"text-sm text-gray-700 text-green-700 font-medium",children:e.expectedImprovement})]})]}),a.jsx("div",{className:"p-3 bg-blue-50 rounded border border-blue-200",children:a.jsxs("p",{className:"text-sm text-blue-900 font-medium flex items-center gap-2",children:[a.jsx(T,{className:"w-4 h-4"}),e.action]})})]},t))}):"strategy"===e?a.jsx("div",{className:"space-y-6",children:c?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"border border-green-200 rounded-lg p-4 bg-green-50",children:[a.jsxs("h3",{className:"font-semibold text-green-900 mb-3 flex items-center gap-2",children:[a.jsx(N,{className:"w-5 h-5"}),"Quick Wins (Implement Now)"]}),a.jsx("ul",{className:"space-y-2",children:c.quickWins.map((e,t)=>a.jsxs("li",{className:"flex items-start gap-2 text-sm text-green-800",children:[a.jsx("span",{className:"font-bold text-green-600 mt-1",children:"•"}),a.jsx("span",{children:e})]},t))})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{phase:"Phase 1 (Days 1-30)",content:c.phase1,color:"border-blue-200 bg-blue-50"},{phase:"Phase 2 (Days 31-60)",content:c.phase2,color:"border-purple-200 bg-purple-50"},{phase:"Phase 3 (Days 61-90)",content:c.phase3,color:"border-pink-200 bg-pink-50"}].map((e,t)=>a.jsxs("div",{className:`border rounded-lg p-4 ${e.color}`,children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:e.phase}),a.jsx("p",{className:"text-sm text-gray-700",children:e.content})]},t))}),a.jsxs("div",{className:"border border-orange-200 rounded-lg p-4 bg-orange-50",children:[a.jsxs("h3",{className:"font-semibold text-orange-900 mb-3 flex items-center gap-2",children:[a.jsx(Et,{className:"w-5 h-5"}),"Monthly Goals"]}),a.jsx("div",{className:"space-y-2",children:c.monthlyGoals.map((e,t)=>a.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white rounded border border-orange-100",children:[a.jsx("span",{className:"w-6 h-6 rounded-full bg-orange-500 text-white flex items-center justify-center text-xs font-bold",children:t+1}),a.jsx("span",{className:"text-sm text-orange-900",children:e})]},t))})]})]}):a.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:a.jsx("p",{className:"text-blue-700",children:"Loading 90-day SEO strategy..."})})}):null]})},Ts=()=>{const[e,t]=pe.useState("overview"),[s,l]=pe.useState({ga:[],traffic:[],funnel:[],meta:[],seo:[]}),[n,d]=pe.useState(!0),[o,x]=pe.useState(!1),[m,h]=pe.useState(30),[p,u]=pe.useState("facebook"),[g,b]=pe.useState(""),[j,f]=pe.useState([]),y=[{id:"overview",label:"Overview",icon:a.jsx(Je,{className:"w-4 h-4"})},{id:"traffic",label:"Traffic",icon:a.jsx(ft,{className:"w-4 h-4"})},{id:"conversions",label:"Conversions",icon:a.jsx(i,{className:"w-4 h-4"})},{id:"meta",label:"Meta Ads",icon:a.jsx(Et,{className:"w-4 h-4"})},{id:"seo",label:"SEO Tools",icon:a.jsx(r,{className:"w-4 h-4"})},{id:"seo-improve",label:"AI SEO Optimizer",icon:a.jsx(tt,{className:"w-4 h-4"})}];pe.useEffect(()=>{N()},[m]);const N=async()=>{d(!0);try{const[e,t,s,a,r]=await Promise.all([Ns("traffic",m),vs(m),ws(m),ks("facebook"),_s("",50)]);l({ga:e,traffic:t,funnel:s,meta:a,seo:r})}catch(e){}d(!1)},v=({change:e,trend:t})=>a.jsxs("div",{className:"flex items-center gap-1 "+("up"===t?"text-green-600":"text-red-600"),children:["up"===t?a.jsx(We,{className:"w-4 h-4"}):a.jsx(ut,{className:"w-4 h-4"}),a.jsxs("span",{className:"font-semibold",children:[Math.abs(e),"%"]})]}),w=({metric:e})=>a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-lg transition-shadow",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsx("h3",{className:"font-semibold text-gray-700",children:e.label}),a.jsx(v,{change:e.change,trend:e.trend})]}),a.jsx("div",{className:"text-3xl font-bold text-gray-900",children:e.value.toLocaleString()}),a.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:["up"===e.trend?"Growing":"Declining"," this period"]})]});return a.jsxs("div",{className:"w-full bg-gray-50 rounded-lg p-6 space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics Dashboard"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("select",{value:m,onChange:e=>h(Number(e.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium hover:border-gray-400 bg-white",children:[a.jsx("option",{value:7,children:"Last 7 days"}),a.jsx("option",{value:30,children:"Last 30 days"}),a.jsx("option",{value:90,children:"Last 90 days"}),a.jsx("option",{value:365,children:"Last year"})]}),a.jsx("button",{onClick:async()=>{x(!0),await N(),x(!1)},disabled:o,className:"p-2 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50",children:a.jsx($e,{className:"w-5 h-5 "+(o?"animate-spin":"")})})]})]}),a.jsx("div",{className:"flex gap-2 border-b border-gray-200",children:y.map(s=>a.jsxs("button",{onClick:()=>t(s.id),className:"flex items-center gap-2 px-4 py-3 font-medium transition-colors border-b-2 "+(e===s.id?"text-blue-600 border-blue-600":"text-gray-600 border-transparent hover:text-gray-900"),children:[s.icon,s.label]},s.id))}),n?a.jsx("div",{className:"flex justify-center items-center h-96",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading analytics..."})]})}):a.jsxs(a.Fragment,{children:["overview"===e&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:s.ga.map((e,t)=>a.jsx(w,{metric:e},t))}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Traffic Trends"}),a.jsx(ue,{width:"100%",height:300,children:a.jsxs(we,{data:s.traffic,children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"colorUsers",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#0ea5e9",stopOpacity:.8}),a.jsx("stop",{offset:"95%",stopColor:"#0ea5e9",stopOpacity:0})]})}),a.jsx(be,{strokeDasharray:"3 3"}),a.jsx(je,{dataKey:"date"}),a.jsx(fe,{}),a.jsx(ye,{}),a.jsx(ke,{type:"monotone",dataKey:"users",stroke:"#0ea5e9",fillOpacity:1,fill:"url(#colorUsers)"})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Conversion Funnel"}),a.jsx(ue,{width:"100%",height:300,children:a.jsxs(_e,{data:s.funnel,children:[a.jsx(be,{strokeDasharray:"3 3"}),a.jsx(je,{dataKey:"step"}),a.jsx(fe,{}),a.jsx(ye,{}),a.jsx(Ce,{dataKey:"users",fill:"#0ea5e9"})]})})]})]}),"traffic"===e&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Users vs Sessions"}),a.jsx(ue,{width:"100%",height:300,children:a.jsxs(ge,{data:s.traffic,children:[a.jsx(be,{strokeDasharray:"3 3"}),a.jsx(je,{dataKey:"date"}),a.jsx(fe,{}),a.jsx(ye,{}),a.jsx(Ne,{}),a.jsx(ve,{type:"monotone",dataKey:"users",stroke:"#0ea5e9"}),a.jsx(ve,{type:"monotone",dataKey:"sessions",stroke:"#06b6d4"})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Page Views & Bounce Rate"}),a.jsx(ue,{width:"100%",height:300,children:a.jsxs(Se,{data:s.traffic,children:[a.jsx(be,{strokeDasharray:"3 3"}),a.jsx(je,{dataKey:"date"}),a.jsx(fe,{yAxisId:"left"}),a.jsx(fe,{yAxisId:"right",orientation:"right"}),a.jsx(ye,{}),a.jsx(Ne,{}),a.jsx(Ce,{yAxisId:"left",dataKey:"pageViews",fill:"#10b981"}),a.jsx(ve,{yAxisId:"right",type:"monotone",dataKey:"bounceRate",stroke:"#ef4444"})]})})]})]})}),"conversions"===e&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Conversion Path"}),a.jsx("div",{className:"space-y-4",children:s.funnel.map((e,t)=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.step}),a.jsx("span",{className:"text-lg font-bold text-blue-600",children:e.users.toLocaleString()})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:e.users/s.funnel[0].users*100+"%"}})}),a.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:["Conversion: ",e.conversionRate.toFixed(1),"%"]})]},t))})]})}),"meta"===e&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex gap-4 mb-6",children:["facebook","instagram"].map(e=>a.jsx("button",{onClick:()=>u(e),className:"px-4 py-2 rounded-lg font-medium transition-colors "+(p===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-900 hover:bg-gray-300"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.meta.map((e,t)=>a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsx("h3",{className:"font-semibold text-gray-700",children:e.metric}),"up"===e.trend?a.jsx(i,{className:"w-5 h-5 text-green-600"}):a.jsx(Dt,{className:"w-5 h-5 text-red-600"})]}),a.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[e.metric.includes("Cost")?"$":"",e.value.toFixed(2)]}),a.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:["Previous: ",e.previousValue.toFixed(2)]})]},t))})]}),"seo"===e&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"SEO Keywords"}),a.jsxs("div",{className:"flex gap-2 mb-4",children:[a.jsx("input",{type:"text",placeholder:"Search keywords...",value:g,onChange:e=>b(e.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:a.jsx(Le,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Keyword"}),a.jsx("th",{className:"text-center py-3 px-4 font-semibold text-gray-700",children:"Position"}),a.jsx("th",{className:"text-center py-3 px-4 font-semibold text-gray-700",children:"Impressions"}),a.jsx("th",{className:"text-center py-3 px-4 font-semibold text-gray-700",children:"Clicks"}),a.jsx("th",{className:"text-center py-3 px-4 font-semibold text-gray-700",children:"CTR"})]})}),a.jsx("tbody",{children:s.seo.map((e,t)=>a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsxs("td",{className:"py-3 px-4",children:[a.jsx("div",{className:"font-medium text-gray-900",children:e.keyword}),a.jsx("div",{className:"text-xs text-gray-500",children:e.url})]}),a.jsx("td",{className:"text-center py-3 px-4",children:a.jsxs("span",{className:"inline-block px-3 py-1 rounded-full font-semibold text-sm "+(e.position<=3?"bg-green-100 text-green-700":e.position<=10?"bg-blue-100 text-blue-700":"bg-yellow-100 text-yellow-700"),children:["#",e.position]})}),a.jsx("td",{className:"text-center py-3 px-4 text-gray-900",children:e.impressions.toLocaleString()}),a.jsx("td",{className:"text-center py-3 px-4 text-gray-900",children:e.clicks.toLocaleString()}),a.jsxs("td",{className:"text-center py-3 px-4 text-gray-900 font-semibold",children:[e.ctr.toFixed(2),"%"]})]},t))})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Qe,{className:"w-5 h-5 text-blue-600"}),"SEO Optimization Tips"]}),a.jsx("div",{className:"space-y-3",children:[{icon:a.jsx(at,{}),title:"Meta Descriptions",desc:"All pages have unique meta descriptions (155-160 chars)"},{icon:a.jsx(at,{}),title:"Mobile Optimization",desc:"Site is fully responsive and mobile-friendly"},{icon:a.jsx(Qe,{}),title:"Header Tags",desc:"Consider using more H1 tags strategically"},{icon:a.jsx(Qe,{}),title:"Internal Links",desc:"Increase internal linking for better crawlability"},{icon:a.jsx(at,{}),title:"Schema Markup",desc:"Event schema and Organization schema properly configured"}].map((e,t)=>a.jsxs("div",{className:"flex gap-3 p-3 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:e.icon.type===at?"text-green-600":"text-blue-600",children:e.icon}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:e.title}),a.jsx("p",{className:"text-sm text-gray-600",children:e.desc})]})]},t))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Sitemap"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("a",{href:"/sitemap.xml",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[a.jsx("span",{className:"font-medium text-gray-900",children:"sitemap.xml"}),a.jsx(c,{className:"w-4 h-4 text-gray-600"})]}),a.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg text-sm text-blue-700",children:[a.jsx("p",{className:"font-medium",children:"Last updated: Today"}),a.jsx("p",{children:"Contains 1,234 URLs"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Robots.txt"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("a",{href:"/robots.txt",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[a.jsx("span",{className:"font-medium text-gray-900",children:"robots.txt"}),a.jsx(c,{className:"w-4 h-4 text-gray-600"})]}),a.jsxs("div",{className:"p-3 bg-green-50 rounded-lg text-sm text-green-700",children:[a.jsx("p",{className:"font-medium",children:"Status: Optimized"}),a.jsx("p",{children:"All crawlers allowed to index content"})]})]})]})]})]}),"seo-improve"===e&&a.jsx("div",{className:"animate-in fade-in duration-500",children:a.jsx(Is,{})})]})]})},zs=({userRole:e})=>{const[t,s]=pe.useState("stories"),[l,r]=pe.useState([]),[i,c]=pe.useState([]),[d,o]=pe.useState(!0),[x,m]=pe.useState(null),[p,u]=pe.useState(!1),[g,b]=pe.useState({title:"",description:"",organizer_name:"",organizer_role:"",event_type:"",avatar_url:"",quote:"",is_featured:!1,is_active:!0,display_order:0,metrics:{}}),[j,f]=pe.useState({publication_name:"",publication_logo_url:"",article_title:"",article_url:"",excerpt:"",published_date:(new Date).toISOString().split("T")[0],author_name:"",category:"",is_featured:!1,is_active:!0,display_order:0});pe.useEffect(()=>{"admin"===e&&y()},[e,t]);const y=async()=>{o(!0);try{if("stories"===t){const e=await z(100,!1);r(e)}else{const e=await M(100,!1);c(e)}}catch(e){}finally{o(!1)}},N=()=>{b({title:"",description:"",organizer_name:"",organizer_role:"",event_type:"",avatar_url:"",quote:"",is_featured:!1,is_active:!0,display_order:0,metrics:{}})},w=()=>{f({publication_name:"",publication_logo_url:"",article_title:"",article_url:"",excerpt:"",published_date:(new Date).toISOString().split("T")[0],author_name:"",category:"",is_featured:!1,is_active:!0,display_order:0})},k=e=>{m(e.id),"stories"===t?b(e):f(e)};return"admin"!==e?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-slate-400",children:"Admin access required"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-black",children:"Landing Page Content"}),a.jsx("p",{className:"text-slate-400 mt-1",children:"Manage success stories and press mentions"})]}),a.jsxs("button",{onClick:()=>{u(!0),"stories"===t?N():w()},className:"bg-indigo-600 hover:bg-indigo-700 px-6 py-3 rounded-xl font-bold flex items-center gap-2 transition-colors",children:[a.jsx(P,{size:20}),"Add ","stories"===t?"Story":"Press"]})]}),a.jsxs("div",{className:"flex gap-2 border-b border-slate-800",children:[a.jsxs("button",{onClick:()=>s("stories"),className:"px-6 py-3 font-bold flex items-center gap-2 transition-colors "+("stories"===t?"border-b-2 border-indigo-500 text-white":"text-slate-400 hover:text-white"),children:[a.jsx(v,{size:20}),"Success Stories (",l.length,")"]}),a.jsxs("button",{onClick:()=>s("press"),className:"px-6 py-3 font-bold flex items-center gap-2 transition-colors "+("press"===t?"border-b-2 border-indigo-500 text-white":"text-slate-400 hover:text-white"),children:[a.jsx(R,{size:20}),"Press Mentions (",i.length,")"]})]}),(p||x)&&a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-xl font-bold",children:[p?"Create":"Edit"," ","stories"===t?"Success Story":"Press Mention"]}),a.jsx("button",{onClick:()=>{u(!1),m(null),"stories"===t?N():w()},className:"text-slate-400 hover:text-white transition-colors",children:a.jsx(n,{size:24})})]}),"stories"===t?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Title *"}),a.jsx("input",{type:"text",value:g.title,onChange:e=>b({...g,title:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500",placeholder:"e.g., From 50 to 5,000 Attendees"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Organizer Name *"}),a.jsx("input",{type:"text",value:g.organizer_name,onChange:e=>b({...g,organizer_name:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500",placeholder:"e.g., John Smith"})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Organizer Role"}),a.jsx("input",{type:"text",value:g.organizer_role,onChange:e=>b({...g,organizer_role:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500",placeholder:"e.g., Festival Director"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Event Type"}),a.jsx("input",{type:"text",value:g.event_type,onChange:e=>b({...g,event_type:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500",placeholder:"e.g., Music Festival"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Description *"}),a.jsx("textarea",{value:g.description,onChange:e=>b({...g,description:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500",rows:3,placeholder:"Brief description of their success..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Quote *"}),a.jsx("textarea",{value:g.quote,onChange:e=>b({...g,quote:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500",rows:2,placeholder:"Testimonial quote from the organizer..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Avatar URL"}),a.jsx("input",{type:"url",value:g.avatar_url,onChange:e=>b({...g,avatar_url:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500",placeholder:"https://..."})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Display Order"}),a.jsx("input",{type:"number",value:g.display_order,onChange:e=>b({...g,display_order:parseInt(e.target.value)||0}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500"})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:g.is_featured,onChange:e=>b({...g,is_featured:e.target.checked}),className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-bold text-slate-300",children:"Featured"})]})}),a.jsx("div",{className:"flex items-end",children:a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:g.is_active,onChange:e=>b({...g,is_active:e.target.checked}),className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-bold text-slate-300",children:"Active"})]})})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsxs("button",{onClick:()=>p?(async()=>{try{const e=await E(g);e&&(r([...l,e]),N(),u(!1))}catch(e){}})():(async e=>{try{const t=await L(e,g);t&&(r(l.map(s=>s.id===e?t:s)),m(null),N())}catch(t){}})(x),className:"bg-indigo-600 hover:bg-indigo-700 px-6 py-3 rounded-xl font-bold flex items-center gap-2 transition-colors",children:[a.jsx(mt,{size:20}),p?"Create":"Save"]}),a.jsx("button",{onClick:()=>{u(!1),m(null),N()},className:"bg-slate-800 hover:bg-slate-700 px-6 py-3 rounded-xl font-bold transition-colors",children:"Cancel"})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Publication Name *"}),a.jsx("input",{type:"text",value:j.publication_name,onChange:e=>f({...j,publication_name:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500",placeholder:"e.g., TechCrunch"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Publication Logo URL"}),a.jsx("input",{type:"url",value:j.publication_logo_url,onChange:e=>f({...j,publication_logo_url:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500",placeholder:"https://..."})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Article Title *"}),a.jsx("input",{type:"text",value:j.article_title,onChange:e=>f({...j,article_title:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500",placeholder:"e.g., EventNexus Raises €2M to Revolutionize Event Discovery"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Article URL *"}),a.jsx("input",{type:"url",value:j.article_url,onChange:e=>f({...j,article_url:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500",placeholder:"https://..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Excerpt"}),a.jsx("textarea",{value:j.excerpt,onChange:e=>f({...j,excerpt:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500",rows:2,placeholder:"Brief excerpt from the article..."})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Published Date *"}),a.jsx("input",{type:"date",value:j.published_date,onChange:e=>f({...j,published_date:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Author Name"}),a.jsx("input",{type:"text",value:j.author_name,onChange:e=>f({...j,author_name:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500",placeholder:"e.g., Jane Doe"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Category"}),a.jsx("input",{type:"text",value:j.category,onChange:e=>f({...j,category:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500",placeholder:"e.g., Tech News"})]})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Display Order"}),a.jsx("input",{type:"number",value:j.display_order,onChange:e=>f({...j,display_order:parseInt(e.target.value)||0}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500"})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:j.is_featured,onChange:e=>f({...j,is_featured:e.target.checked}),className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-bold text-slate-300",children:"Featured"})]})}),a.jsx("div",{className:"flex items-end",children:a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:j.is_active,onChange:e=>f({...j,is_active:e.target.checked}),className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-bold text-slate-300",children:"Active"})]})})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsxs("button",{onClick:()=>p?(async()=>{try{const e=await D(j);e&&(c([...i,e]),w(),u(!1))}catch(e){}})():(async e=>{try{const t=await F(e,j);t&&(c(i.map(s=>s.id===e?t:s)),m(null),w())}catch(t){}})(x),className:"bg-indigo-600 hover:bg-indigo-700 px-6 py-3 rounded-xl font-bold flex items-center gap-2 transition-colors",children:[a.jsx(mt,{size:20}),p?"Create":"Save"]}),a.jsx("button",{onClick:()=>{u(!1),m(null),w()},className:"bg-slate-800 hover:bg-slate-700 px-6 py-3 rounded-xl font-bold transition-colors",children:"Cancel"})]})]})]}),d?a.jsx("div",{className:"text-center py-12",children:a.jsx("div",{className:"inline-block w-8 h-8 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"})}):a.jsx("div",{className:"space-y-4",children:"stories"===t?0===l.length?a.jsxs("div",{className:"text-center py-12 bg-slate-900/50 border border-slate-800 rounded-2xl",children:[a.jsx(v,{className:"w-16 h-16 text-slate-700 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-400",children:"No success stories yet"}),a.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"Add your first success story to showcase on the landing page"})]}):l.map(e=>a.jsx("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6 hover:border-indigo-500/50 transition-all",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("h3",{className:"text-xl font-bold",children:e.title}),e.is_featured&&a.jsxs("span",{className:"bg-yellow-500/20 text-yellow-400 px-2 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[a.jsx(O,{size:12,className:"fill-current"})," Featured"]}),!e.is_active&&a.jsxs("span",{className:"bg-slate-700 text-slate-400 px-2 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[a.jsx(vt,{size:12})," Inactive"]})]}),a.jsx("p",{className:"text-slate-400 mb-2",children:e.description}),a.jsxs("p",{className:"text-slate-500 italic text-sm mb-3",children:['"',e.quote,'"']}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-400",children:[a.jsx("span",{className:"font-semibold",children:e.organizer_name}),e.organizer_role&&a.jsxs("span",{children:["• ",e.organizer_role]}),e.event_type&&a.jsxs("span",{children:["• ",e.event_type]}),a.jsxs("span",{children:["• Order: ",e.display_order]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>k(e),className:"p-2 bg-slate-800 hover:bg-slate-700 rounded-lg transition-colors",title:"Edit",children:a.jsx(Rt,{size:18})}),a.jsx("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this success story?"))try{await $(e)&&r(l.filter(t=>t.id!==e))}catch(t){}})(e.id),className:"p-2 bg-slate-800 hover:bg-red-600 rounded-lg transition-colors",title:"Delete",children:a.jsx(h,{size:18})})]})]})},e.id)):0===i.length?a.jsxs("div",{className:"text-center py-12 bg-slate-900/50 border border-slate-800 rounded-2xl",children:[a.jsx(R,{className:"w-16 h-16 text-slate-700 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-400",children:"No press mentions yet"}),a.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"Add your first press mention to showcase media coverage"})]}):i.map(e=>a.jsx("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6 hover:border-indigo-500/50 transition-all",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("h3",{className:"text-xl font-bold",children:e.article_title}),e.is_featured&&a.jsxs("span",{className:"bg-yellow-500/20 text-yellow-400 px-2 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[a.jsx(O,{size:12,className:"fill-current"})," Featured"]}),!e.is_active&&a.jsxs("span",{className:"bg-slate-700 text-slate-400 px-2 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[a.jsx(vt,{size:12})," Inactive"]})]}),e.excerpt&&a.jsx("p",{className:"text-slate-400 mb-3",children:e.excerpt}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-400",children:[a.jsx("span",{className:"font-semibold",children:e.publication_name}),e.author_name&&a.jsxs("span",{children:["• ",e.author_name]}),e.category&&a.jsxs("span",{children:["• ",e.category]}),a.jsxs("span",{children:["• ",new Date(e.published_date).toLocaleDateString()]}),a.jsxs("span",{children:["• Order: ",e.display_order]})]}),a.jsx("a",{href:e.article_url,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-400 hover:text-indigo-300 text-sm mt-2 inline-block",children:"View Article →"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>k(e),className:"p-2 bg-slate-800 hover:bg-slate-700 rounded-lg transition-colors",title:"Edit",children:a.jsx(Rt,{size:18})}),a.jsx("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this press mention?"))try{await U(e)&&c(i.filter(t=>t.id!==e))}catch(t){}})(e.id),className:"p-2 bg-slate-800 hover:bg-red-600 rounded-lg transition-colors",title:"Delete",children:a.jsx(h,{size:18})})]})]})},e.id))})]})},Ms=({userRole:e})=>{const[t,s]=pe.useState([]),[l,r]=pe.useState(!0),[i,d]=pe.useState(null),[o,x]=pe.useState(!1),[m,p]=pe.useState({media_type:"walkthrough_video",title:"",description:"",video_url:"",thumbnail_url:"",duration:"",is_active:!1,display_location:"landing_demo",display_order:0,metadata:{}});pe.useEffect(()=>{"admin"===e&&u()},[e]);const u=async()=>{r(!0);try{const e=await B();s(e)}catch(e){}finally{r(!1)}},g=()=>{p({media_type:"walkthrough_video",title:"",description:"",video_url:"",thumbnail_url:"",duration:"",is_active:!1,display_location:"landing_demo",display_order:0,metadata:{}})};return"admin"!==e?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-slate-400",children:"Admin access required"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-black",children:"Platform Media Manager"}),a.jsx("p",{className:"text-slate-400 mt-1",children:"Manage videos, demos, and tutorials"})]}),a.jsxs("button",{onClick:()=>{x(!0),g()},className:"bg-indigo-600 hover:bg-indigo-700 px-6 py-3 rounded-xl font-bold flex items-center gap-2 transition-colors",children:[a.jsx(P,{size:20}),"Add Media"]})]}),(o||i)&&a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-xl font-bold",children:o?"Add New Media":"Edit Media"}),a.jsx("button",{onClick:()=>{x(!1),d(null),g()},className:"text-slate-400 hover:text-white transition-colors",children:a.jsx(n,{size:24})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Media Type *"}),a.jsxs("select",{value:m.media_type,onChange:e=>p({...m,media_type:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500",children:[a.jsx("option",{value:"walkthrough_video",children:"Platform Walkthrough"}),a.jsx("option",{value:"demo_video",children:"Demo Video"}),a.jsx("option",{value:"tutorial",children:"Tutorial"}),a.jsx("option",{value:"feature_highlight",children:"Feature Highlight"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Display Location *"}),a.jsxs("select",{value:m.display_location,onChange:e=>p({...m,display_location:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500",children:[a.jsx("option",{value:"landing_demo",children:"Landing Page - Demo Section"}),a.jsx("option",{value:"help_center",children:"Help Center"}),a.jsx("option",{value:"dashboard",children:"Dashboard"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Title *"}),a.jsx("input",{type:"text",value:m.title,onChange:e=>p({...m,title:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500",placeholder:"e.g., Platform Walkthrough"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Description"}),a.jsx("textarea",{value:m.description,onChange:e=>p({...m,description:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500",rows:2,placeholder:"Brief description of the video..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Video URL * (YouTube, Vimeo, or direct link)"}),a.jsx("input",{type:"url",value:m.video_url,onChange:e=>p({...m,video_url:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500",placeholder:"https://www.youtube.com/watch?v=..."})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Thumbnail URL"}),a.jsx("input",{type:"url",value:m.thumbnail_url,onChange:e=>p({...m,thumbnail_url:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500",placeholder:"https://..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Duration"}),a.jsx("input",{type:"text",value:m.duration,onChange:e=>p({...m,duration:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500",placeholder:"e.g., 3:45"})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Display Order"}),a.jsx("input",{type:"number",value:m.display_order,onChange:e=>p({...m,display_order:parseInt(e.target.value)||0}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500"})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:m.is_active,onChange:e=>p({...m,is_active:e.target.checked}),className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-bold text-slate-300",children:"Active (Show on landing page)"})]})})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsxs("button",{onClick:()=>o?(async()=>{try{const e=await G(m);e&&(s([...t,e]),g(),x(!1))}catch(e){}})():(async e=>{try{const a=await q(e,m);a&&(s(t.map(t=>t.id===e?a:t)),d(null),g())}catch(a){}})(i),className:"bg-indigo-600 hover:bg-indigo-700 px-6 py-3 rounded-xl font-bold flex items-center gap-2 transition-colors",children:[a.jsx(mt,{size:20}),o?"Create":"Save"]}),a.jsx("button",{onClick:()=>{x(!1),d(null),g()},className:"bg-slate-800 hover:bg-slate-700 px-6 py-3 rounded-xl font-bold transition-colors",children:"Cancel"})]})]})]}),l?a.jsx("div",{className:"text-center py-12",children:a.jsx("div",{className:"inline-block w-8 h-8 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"})}):a.jsx("div",{className:"space-y-4",children:0===t.length?a.jsxs("div",{className:"text-center py-12 bg-slate-900/50 border border-slate-800 rounded-2xl",children:[a.jsx(Ft,{className:"w-16 h-16 text-slate-700 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-400",children:"No media added yet"}),a.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"Add your first video or demo"})]}):t.map(e=>a.jsx("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden hover:border-indigo-500/50 transition-all",children:a.jsxs("div",{className:"flex flex-col md:flex-row",children:[a.jsx("div",{className:"md:w-1/3 bg-slate-950 relative",children:e.video_url?a.jsxs("div",{className:"aspect-video relative",children:[e.thumbnail_url?a.jsx("img",{src:e.thumbnail_url,alt:e.title,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-slate-900",children:a.jsx(y,{className:"w-12 h-12 text-slate-700"})}),a.jsx("a",{href:e.video_url,target:"_blank",rel:"noopener noreferrer",className:"absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 hover:opacity-100 transition-opacity",children:a.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center",children:a.jsx(c,{className:"w-8 h-8 text-slate-950"})})})]}):a.jsx("div",{className:"aspect-video flex items-center justify-center bg-slate-900",children:a.jsx(Ft,{className:"w-12 h-12 text-slate-700"})})}),a.jsx("div",{className:"flex-1 p-6",children:a.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"text-xl font-bold",children:e.title}),a.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-bold "+(e.is_active?"bg-emerald-500/20 text-emerald-400":"bg-slate-700 text-slate-400"),children:e.is_active?"Active":"Inactive"})]}),e.description&&a.jsx("p",{className:"text-slate-400 mb-3",children:e.description}),a.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-slate-400",children:[a.jsx("span",{className:"font-semibold capitalize",children:e.media_type.replace("_"," ")}),e.duration&&a.jsxs("span",{children:["• ",e.duration]}),a.jsxs("span",{children:["• ",e.display_location.replace("_"," ")]}),a.jsxs("span",{children:["• Order: ",e.display_order]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>(async e=>{try{const a=await q(e.id,{is_active:!e.is_active});a&&s(t.map(t=>t.id===e.id?a:t))}catch(a){}})(e),className:"p-2 rounded-lg transition-colors "+(e.is_active?"bg-emerald-600 hover:bg-emerald-700":"bg-slate-800 hover:bg-slate-700"),title:e.is_active?"Deactivate":"Activate",children:e.is_active?a.jsx(De,{size:18}):a.jsx(vt,{size:18})}),a.jsx("button",{onClick:()=>(e=>{d(e.id),p(e)})(e),className:"p-2 bg-slate-800 hover:bg-slate-700 rounded-lg transition-colors",title:"Edit",children:a.jsx(Rt,{size:18})}),a.jsx("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this media?"))try{await J(e)&&s(t.filter(t=>t.id!==e))}catch(a){}})(e.id),className:"p-2 bg-slate-800 hover:bg-red-600 rounded-lg transition-colors",title:"Delete",children:a.jsx(h,{size:18})})]})]})})]})},e.id))})]})},Ps=({isOpen:e,onClose:t,onAuthenticate:s,operationName:l})=>{const[r,i]=pe.useState(""),[n,c]=pe.useState(!1),[d,o]=pe.useState(0),[x,m]=pe.useState(!1),[h,p]=pe.useState(0),[u,g]=pe.useState("");pe.useEffect(()=>{if(h>0){const e=setTimeout(()=>p(h-1),1e3);return()=>clearTimeout(e)}0===h&&x&&(m(!1),o(0))},[h,x]);const b=()=>{if(!x)if("NEXUS_MASTER_2025"===r)g(""),i(""),o(0),s(!0),t();else{const e=d+1;o(e),g(`Invalid passkey. ${3-e} attempts remaining.`),e>=3&&(m(!0),p(60),g("Too many failed attempts. Locked for 60 seconds."),i(""))}};return e?a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[9999] p-4",children:a.jsxs("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-2xl border-2 border-red-500/50 shadow-[0_0_50px_rgba(239,68,68,0.3)] max-w-md w-full p-8 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 opacity-10",children:a.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-red-500 via-transparent to-amber-500 animate-pulse"})}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"flex items-center justify-center mb-6",children:a.jsxs("div",{className:"relative",children:[a.jsx(Be,{className:"w-16 h-16 text-red-500 animate-pulse"}),a.jsx(W,{className:"w-6 h-6 text-amber-500 absolute bottom-0 right-0"})]})}),a.jsx("h2",{className:"text-2xl font-black text-center mb-2 text-red-500 uppercase tracking-wider",children:"Master Auth Required"}),a.jsx("p",{className:"text-slate-400 text-center text-sm mb-6",children:"Entering modification mode. Secondary passkey is required for platform-wide changes."}),a.jsx("div",{className:"bg-slate-950/50 border border-red-500/30 rounded-lg p-3 mb-6",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(St,{className:"w-5 h-5 text-amber-500"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Protected Operation"}),a.jsx("div",{className:"text-sm font-bold text-white",children:l})]})]})}),!x&&a.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 mb-6 flex items-start gap-3",children:[a.jsx(Ue,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),a.jsx("p",{className:"text-xs text-red-400",children:"This action requires master authentication. Unauthorized access attempts are logged and monitored."})]}),x?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(W,{className:"w-12 h-12 text-red-500 mx-auto mb-4 animate-bounce"}),a.jsx("p",{className:"text-red-400 font-bold mb-2",children:"System Locked"}),a.jsxs("p",{className:"text-slate-400 text-sm",children:["Too many failed attempts. Please wait ",a.jsx("span",{className:"text-red-500 font-mono",children:h})," seconds."]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2 uppercase tracking-wide",children:"Master Passkey"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:n?"text":"password",value:r,onChange:e=>i(e.target.value),onKeyPress:e=>"Enter"===e.key&&b(),placeholder:"Enter master passkey",className:"w-full bg-slate-950/50 border-2 border-slate-700 rounded-lg px-4 py-3 pr-12 text-white font-mono focus:outline-none focus:border-red-500 transition-colors",autoFocus:!0}),a.jsx("button",{onClick:()=>c(!n),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 hover:text-white transition-colors",children:n?a.jsx(vt,{className:"w-5 h-5"}):a.jsx(De,{className:"w-5 h-5"})})]}),u&&a.jsxs("p",{className:"text-red-400 text-xs mt-2 flex items-center gap-2",children:[a.jsx(Ue,{className:"w-4 h-4"}),u]}),d>0&&!x&&a.jsx("div",{className:"mt-2 flex items-center gap-2",children:Array.from({length:3}).map((e,t)=>a.jsx("div",{className:"h-2 flex-1 rounded-full "+(t<d?"bg-red-500":"bg-slate-700")},t))})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{x||(i(""),g(""),s(!1),t())},className:"flex-1 bg-slate-800 hover:bg-slate-700 text-white font-bold py-3 px-4 rounded-lg transition-colors border border-slate-600",children:"Cancel"}),a.jsx("button",{onClick:b,disabled:!r.trim(),className:"flex-1 bg-gradient-to-r from-red-600 to-amber-600 hover:from-red-500 hover:to-amber-500 text-white font-bold py-3 px-4 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:"Authenticate"})]})]}),a.jsx("p",{className:"text-center text-xs text-slate-600 mt-6",children:"All authentication attempts are logged with timestamp and IP address."})]})]})}):null},Rs=(new Date).toISOString().split("T")[0],Os=({user:t})=>{var r,c,d,o,h,p,u,g,j,v,_,C;const[S,A]=pe.useState("analytics"),[I,T]=pe.useState(!1),[z,M]=pe.useState(!1),[R,O]=pe.useState(!0),[E,L]=pe.useState(!1),[D,F]=pe.useState(!1),[$,U]=pe.useState(""),[B,G]=pe.useState(2.5),[q,J]=pe.useState(.5),[ge,be]=pe.useState(!1),[je,fe]=pe.useState({stripe:{pk:"pk_live_51P...",sk:"sk_live_v920...",wh:"whsec_920a..."},supabase:{url:"https://nexus-core.supabase.co",anon:"eyJhbGciOiJIUzI1Ni...",svc:"eyJhbGciOiJIUzI1Ni..."},gemini:{key:"AIzaSyB2UCRyekL4mmj7ShgD4ILZ1IvPjl8Jj64",model:"gemini-3-pro-preview"},github:{appId:"920831",secret:"ghs_820v...",repo:"eventnexus/backbone"},mapbox:{token:"pk.ey...v920",styleId:"dark-v11"},email:{provider:"Resend",key:"RESEND_API_KEY",from:"noreply@mail.eventnexus.eu"}}),[Ne,ve]=pe.useState(""),[_e,Ce]=pe.useState("all"),[Se,Me]=pe.useState([]),[Pe,Ee]=pe.useState(!1),[De,Fe]=pe.useState(!1),[qe,Je]=pe.useState(""),[We,Ke]=pe.useState("attendees"),[Ze,Xe]=pe.useState(null),[Qe,et]=pe.useState(!0),[tt,at]=pe.useState(!1),[rt,ct]=pe.useState(null),[ot,xt]=pe.useState(null),[mt,ut]=pe.useState(""),[jt,ft]=pe.useState(""),[vt,Ct]=pe.useState(!1),[Tt,zt]=pe.useState("all"),[Pt,Rt]=pe.useState(""),[Dt,Ft]=pe.useState([]),[$t,Ut]=pe.useState(!0),[Bt,Gt]=pe.useState(null),[qt,Jt]=pe.useState(!0),[Wt,Ht]=pe.useState(null),[Zt,Xt]=pe.useState(!0),[Qt,es]=pe.useState([]),[ts,ss]=pe.useState(!0),[as,rs]=pe.useState(!1),[is,ns]=pe.useState(null),[cs,ds]=pe.useState(!1),[os,ms]=pe.useState(!1),[hs,ps]=pe.useState(!1),[us,gs]=pe.useState(""),[bs,ys]=pe.useState(null),[Ns,vs]=pe.useState([]),ws=pe.useMemo(()=>Dt.filter(e=>{const t=e.name.toLowerCase().includes(Ne.toLowerCase())||e.email.toLowerCase().includes(Ne.toLowerCase()),s="all"===_e||e.role===_e||"organizer"===_e&&"admin"===e.role;return t&&s}),[Dt,Ne,_e]);pe.useEffect(()=>{(async()=>{Ut(!0),Jt(!0),Xt(!0),et(!0),ss(!0);try{const[e,t,s,a,l,r]=await Promise.all([X(),Q(),H(),ee(),te(),se()]);Ft(e),Gt(t),Ht(s),Me(a),es(r),l.global_ticket_fee&&G(parseFloat(l.global_ticket_fee)),l.credit_value&&J(parseFloat(l.credit_value)),l.maintenance_mode&&be("true"===l.maintenance_mode),(l.stripe_pk||l.stripe_sk||l.stripe_wh)&&fe(e=>({...e,stripe:{pk:l.stripe_pk||e.stripe.pk,sk:l.stripe_sk||e.stripe.sk,wh:l.stripe_wh||e.stripe.wh}})),(l.supabase_url||l.supabase_anon||l.supabase_svc)&&fe(e=>({...e,supabase:{url:l.supabase_url||e.supabase.url,anon:l.supabase_anon||e.supabase.anon,svc:l.supabase_svc||e.supabase.svc}})),(l.gemini_key||l.gemini_model)&&fe(e=>({...e,gemini:{key:l.gemini_key||e.gemini.key,model:l.gemini_model||e.gemini.model}})),(l.mapbox_token||l.mapbox_styleId)&&fe(e=>({...e,mapbox:{token:l.mapbox_token||e.mapbox.token,styleId:l.mapbox_styleId||e.mapbox.styleId}})),(l.github_appId||l.github_secret||l.github_repo)&&fe(e=>({...e,github:{appId:l.github_appId||e.github.appId,secret:l.github_secret||e.github.secret,repo:l.github_repo||e.github.repo}})),(l.email_provider||l.email_key||l.email_from)&&fe(e=>({...e,email:{provider:l.email_provider||e.email.provider,key:l.email_key||e.email.key,from:l.email_from||e.email.from}}))}catch(e){}finally{Ut(!1),Jt(!1),Xt(!1),et(!1),ss(!1)}})();const e=setInterval(async()=>{if("infrastructure"===S)try{const e=await H();Ht(e)}catch(e){}},1e4);return()=>clearInterval(e)},[S]);const ks=e=>{U(e),L(!0)},_s=(e,t)=>{const[s,a]=e.split(".");fe(e=>({...e,[s]:{...e[s],[a]:t}}))},Cs=[{id:"analytics",label:"Global Insights",icon:a.jsx(yt,{})},{id:"analytics-dashboard",label:"GA & Meta Analytics",icon:a.jsx(i,{})},{id:"users",label:"User Governance",icon:a.jsx(k,{})},{id:"inbox",label:"Email Inbox",icon:a.jsx(x,{})},{id:"marketing",label:"Campaign Engine",icon:a.jsx(ht,{})},{id:"analytics-campaign",label:"Campaign Analytics",icon:a.jsx(Et,{})},{id:"ai-learning",label:"AI Learning",icon:a.jsx(b,{})},{id:"autonomous",label:"Autonomous Ops",icon:a.jsx(lt,{})},{id:"social-media",label:"Social Media Hub",icon:a.jsx(nt,{})},{id:"brand-protection",label:"Brand Protection",icon:a.jsx(l,{})},{id:"beta-invitations",label:"Beta Invitations",icon:a.jsx(V,{})},{id:"landing-content",label:"Landing Content",icon:a.jsx(Mt,{})},{id:"platform-media",label:"Platform Media",icon:a.jsx(y,{})},{id:"financials",label:"Nexus Economy",icon:a.jsx(K,{})},{id:"settings",label:"System Matrix",icon:a.jsx(w,{})},{id:"infrastructure",label:"System Health",icon:a.jsx(Ye,{})}],Ss=()=>tt?a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",children:a.jsxs("div",{className:"bg-slate-950 border border-slate-800 rounded-[40px] w-full max-w-4xl shadow-2xl",children:[a.jsxs("div",{className:"p-6 border-b border-slate-800 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-black tracking-tight",children:"Smart Campaign Scheduler"}),a.jsx("p",{className:"text-sm text-slate-400",children:"Schedule posts at optimal times for maximum engagement"})]}),a.jsx("button",{onClick:()=>{at(!1),ct(null)},className:"p-2 hover:bg-slate-800 rounded-xl transition-all",children:a.jsx(n,{size:24,className:"text-slate-400"})})]}),a.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:a.jsx(ls,{campaignId:rt||void 0,onScheduled:e=>{at(!1),ct(null),alert("✅ Campaign scheduled successfully!")}})})]})}):null;return"admin"!==t.role?a.jsx("div",{className:"p-20 text-center font-black bg-slate-950 min-h-screen text-red-500",children:"UNAUTHORIZED_ACCESS_DENIED"}):a.jsxs("div",{className:"flex flex-col lg:flex-row min-h-screen bg-slate-950 text-slate-50 overflow-hidden",children:[I&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-[90] lg:hidden",onClick:()=>T(!1)}),a.jsxs("aside",{className:`fixed inset-y-0 left-0 z-[100] w-72 bg-slate-900 border-r border-slate-800 transition-transform lg:relative lg:translate-x-0 ${I?"translate-x-0":"-translate-x-full"} flex flex-col`,children:[a.jsxs("div",{className:"p-8 border-b border-slate-800/50 flex items-center gap-3 flex-shrink-0",children:[a.jsx("div",{className:"w-10 h-10 bg-orange-600 rounded-xl flex items-center justify-center shadow-lg shadow-orange-600/20",children:a.jsx(Be,{className:"text-white",size:20})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-black text-xl tracking-tighter",children:"Nexus Core"}),a.jsx("p",{className:"text-[8px] font-black uppercase text-slate-500 tracking-[0.2em]",children:"Platform Management"})]})]}),a.jsx("nav",{className:"p-4 space-y-1 mt-4 flex-1 overflow-y-auto scrollbar-hide",children:Cs.map(e=>a.jsxs("button",{onClick:()=>{A(e.id),T(!1)},className:"w-full flex items-center gap-4 px-5 py-4 rounded-2xl transition-all "+(S===e.id?"bg-orange-600 text-white font-bold shadow-xl shadow-orange-600/10":"text-slate-400 hover:bg-slate-800"),children:[Ae.cloneElement(e.icon,{size:18}),a.jsx("span",{className:"text-sm",children:e.label})]},e.id))}),a.jsxs("div",{className:"p-6 space-y-3 border-t border-slate-800/50 flex-shrink-0",children:[a.jsxs("button",{onClick:async()=>{M(!0);try{const[e,t,s,a,l,r]=await Promise.all([X(),Q(),H(),ee(),te(),se()]);Ft(e),Gt(t),Ht(s),Me(a),es(r),l.global_ticket_fee&&G(parseFloat(l.global_ticket_fee)),l.credit_value&&J(parseFloat(l.credit_value)),l.maintenance_mode&&be("true"===l.maintenance_mode)}catch(e){alert("Failed to sync cluster data. Please try again.")}finally{setTimeout(()=>M(!1),500)}},disabled:z,className:"w-full py-3 bg-slate-800 hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 text-white transition-all",children:[a.jsx($e,{className:z?"animate-spin":"",size:14}),z?"Syncing...":"Sync Cluster"]}),a.jsxs("div",{className:"p-4 bg-slate-950 rounded-2xl border border-slate-800 space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-[8px] font-black text-slate-600 uppercase tracking-widest",children:"Build Info"}),a.jsx("span",{className:"text-[8px] font-black px-2 py-0.5 rounded-full bg-emerald-500/10 text-emerald-500",children:"stable"})]}),a.jsxs("div",{className:"flex items-baseline justify-between",children:[a.jsxs("p",{className:"text-[10px] font-bold text-slate-400",children:["v","1.0.0"]}),a.jsxs("p",{className:"text-[8px] text-slate-600 font-mono",children:["#","caf293a".substring(0,7)]})]}),a.jsx("p",{className:"text-[8px] text-slate-600",children:Rs}),a.jsx("div",{className:"w-full h-1 bg-slate-900 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-emerald-500 w-[94%]"})})]})]})]}),a.jsxs("main",{className:"flex-1 overflow-y-auto p-4 md:p-8 space-y-6 md:space-y-10 scrollbar-hide",children:[a.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 md:gap-6",children:[a.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[a.jsx("button",{onClick:()=>T(!I),className:"lg:hidden w-10 h-10 bg-slate-900 border border-slate-800 rounded-xl flex items-center justify-center hover:bg-slate-800 transition-colors","aria-label":"Toggle menu",children:a.jsx(Y,{size:20})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl md:text-4xl font-black tracking-tighter uppercase",children:S.replace("_"," ")}),a.jsxs("p",{className:"text-xs md:text-sm text-slate-500 font-bold",children:["Protocol Status: ",a.jsx("span",{className:"text-emerald-500",children:(null==Wt?void 0:Wt.protocolStatus)||"Loading..."})]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 md:gap-4 w-full md:w-auto",children:[a.jsxs("div",{className:"bg-slate-900 border border-slate-800 px-3 md:px-6 py-2 md:py-3 rounded-xl md:rounded-2xl flex items-center gap-2 md:gap-4 shadow-2xl flex-1 md:flex-none",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest",children:"Maintenance"}),a.jsx("p",{className:"text-xs md:text-sm font-black "+((null==Wt?void 0:Wt.maintenanceMode)||ge?"text-orange-500":"text-emerald-500"),children:(null==Wt?void 0:Wt.maintenanceMode)||ge?"ACTIVE":"OFF"})]}),a.jsxs("button",{disabled:R,onClick:()=>be(!ge),className:`w-8 h-8 md:w-10 md:h-10 rounded-lg md:rounded-xl flex items-center justify-center transition-all ${R?"opacity-20 cursor-not-allowed":""} ${(null==Wt?void 0:Wt.maintenanceMode)||ge?"bg-orange-600 text-white":"bg-slate-800 text-slate-500"}`,children:[a.jsx(Ot,{size:16,className:"md:hidden"}),a.jsx(Ot,{size:18,className:"hidden md:block"})]})]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 px-3 md:px-6 py-2 md:py-3 rounded-xl md:rounded-2xl flex items-center gap-2 md:gap-4 shadow-2xl relative flex-1 md:flex-none",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest",children:"Master Security"}),a.jsx("p",{className:"text-xs md:text-sm font-black "+(R?"text-yellow-500":"text-red-500"),children:(null==Wt?void 0:Wt.securityStatus)||"UNKNOWN"})]}),!R&&a.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping"}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest",children:"Master Security"}),a.jsx("p",{className:"text-xs md:text-sm font-black "+(R?"text-white":"text-orange-500"),children:R?"PROTECTED":"ELEVATED"})]}),a.jsxs("button",{onClick:()=>R?ks("Unlock Master Controls"):O(!0),className:"w-8 h-8 md:w-10 md:h-10 rounded-lg md:rounded-xl flex items-center justify-center transition-all "+(R?"bg-slate-800 text-slate-500 hover:bg-slate-700":"bg-red-500 text-white shadow-xl shadow-red-600/20 hover:bg-red-600"),title:R?"Unlock Master Controls":"Lock Master Controls",children:[R?a.jsx(W,{size:16,className:"md:hidden"}):a.jsx(Ge,{size:16,className:"md:hidden"}),R?a.jsx(W,{size:20,className:"hidden md:block"}):a.jsx(Ge,{size:20,className:"hidden md:block"})]})]})]})]}),"analytics"===S&&a.jsx("div",{className:"space-y-8 animate-in fade-in duration-500",children:qt?a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((e,t)=>a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 animate-pulse",children:[a.jsx("div",{className:"h-4 bg-slate-800 rounded mb-2"}),a.jsx("div",{className:"h-8 bg-slate-800 rounded mb-1"}),a.jsx("div",{className:"h-3 bg-slate-800 rounded w-1/2"})]},t))}):Bt?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(Ls,{label:"Monthly GPV",value:Bt.monthlyGPV,change:"+12%",trend:"up",icon:a.jsx(K,{}),color:"emerald"}),a.jsx(Ls,{label:"Platform Conversion",value:`${Bt.platformConversion}%`,change:"+0.4%",trend:"up",icon:a.jsx(Et,{}),color:"orange"}),a.jsx(Ls,{label:"Global Fee",value:`${Bt.globalFee}%`,change:"Stable",trend:"neutral",icon:a.jsx(it,{}),color:"blue"}),a.jsx(Ls,{label:"Credit Pool",value:Bt.creditPool,change:"+5%",trend:"neutral",icon:a.jsx(V,{}),color:"violet"})]}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4 md:gap-8",children:[a.jsxs("div",{className:"xl:col-span-2 bg-slate-900 border border-slate-800 rounded-3xl md:rounded-[48px] p-4 md:p-10 shadow-2xl space-y-4 md:space-y-8",children:[a.jsx("h3",{className:"text-lg md:text-xl font-black tracking-tight",children:"Revenue Stream Velocity"}),a.jsx("div",{className:"h-[250px] md:h-[350px]",children:a.jsx(ue,{width:"100%",height:"100%",children:a.jsxs(we,{data:Bt.revenueByTier,children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"colorTier",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.3}),a.jsx("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]})}),a.jsx(ke,{type:"monotone",dataKey:"value",stroke:"#6366f1",fill:"url(#colorTier)",strokeWidth:4}),a.jsx(ye,{contentStyle:{backgroundColor:"#0f172a",border:"none",borderRadius:"12px"}})]})})})]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl md:rounded-[48px] p-6 md:p-10 shadow-2xl flex flex-col justify-center items-center text-center space-y-4 md:space-y-6",children:[a.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 rounded-full border-8 border-indigo-500/20 border-t-indigo-500 flex items-center justify-center",children:a.jsxs("span",{className:"text-xl md:text-2xl font-black",children:[Bt.retentionRate,"%"]})}),a.jsx("h4",{className:"text-lg md:text-xl font-black",children:"Retention Rate"}),a.jsx("p",{className:"text-xs md:text-sm text-slate-500 font-medium",children:"User loyalty based on platform activity and engagement metrics."})]})]})]}):a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-slate-500",children:"Unable to load analytics data"})})}),"users"===S&&a.jsx("div",{className:"space-y-6 md:space-y-8 animate-in fade-in duration-500",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 md:gap-8",children:[a.jsxs("div",{className:"lg:col-span-3 bg-slate-900 border border-slate-800 rounded-3xl md:rounded-[48px] overflow-hidden shadow-2xl flex flex-col",children:[a.jsxs("div",{className:"p-4 md:p-8 border-b border-slate-800 flex flex-col md:flex-row gap-4 justify-between items-center bg-slate-900/50 backdrop-blur-md",children:[a.jsxs("div",{className:"relative flex-1 w-full max-w-md",children:[a.jsx(Le,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500",size:16}),a.jsx("input",{type:"text",placeholder:"Search by name, email or ID...",value:Ne,onChange:e=>ve(e.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded-xl md:rounded-2xl pl-12 pr-4 py-2.5 md:py-3 text-xs md:text-sm focus:border-indigo-500 outline-none"})]}),a.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[a.jsxs("select",{value:_e,onChange:e=>Ce(e.target.value),className:"flex-1 md:flex-none bg-slate-950 border border-slate-800 rounded-lg md:rounded-xl px-3 md:px-4 py-2 text-[10px] md:text-xs font-black uppercase tracking-widest text-slate-400 outline-none",children:[a.jsx("option",{value:"all",children:"All Roles"}),a.jsx("option",{value:"organizer",children:"Organizers"}),a.jsx("option",{value:"attendee",children:"Attendees"}),a.jsx("option",{value:"agency",children:"Agencies"})]}),a.jsx("button",{className:"p-2.5 md:p-3 bg-slate-800 rounded-lg md:rounded-xl text-slate-400 hover:text-white transition-all",children:a.jsx(wt,{size:16})})]})]}),a.jsx("div",{className:"flex-1 overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left min-w-[600px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest border-b border-slate-800",children:[a.jsx("th",{className:"px-4 md:px-8 py-3 md:py-4",children:"Identity"}),a.jsx("th",{className:"px-2 md:px-4 py-3 md:py-4",children:"Clearance"}),a.jsx("th",{className:"px-2 md:px-4 py-3 md:py-4",children:"Ledger"}),a.jsx("th",{className:"px-4 md:px-8 py-3 md:py-4 text-right",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-800/50",children:ws.map(e=>a.jsxs("tr",{className:"group hover:bg-slate-800/30 transition-all",children:[a.jsx("td",{className:"px-4 md:px-8 py-4 md:py-5",children:a.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[a.jsx("img",{src:e.avatar,className:"w-8 h-8 md:w-10 md:h-10 rounded-lg md:rounded-xl border border-slate-800",alt:""}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"font-bold text-white text-xs md:text-sm truncate",children:e.name}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate",children:e.email})]})]})}),a.jsx("td",{className:"px-2 md:px-4 py-4 md:py-5",children:a.jsx("span",{className:"text-[9px] md:text-[10px] font-black px-2 md:px-3 py-1 rounded-full uppercase border whitespace-nowrap "+("enterprise"===(e.subscription_tier||e.subscription)?"bg-orange-600/10 border-orange-500/20 text-orange-500":"premium"===(e.subscription_tier||e.subscription)?"bg-emerald-600/10 border-emerald-500/20 text-emerald-500":"bg-slate-800 border-slate-700 text-slate-500"),children:e.subscription_tier||e.subscription})}),a.jsx("td",{className:"px-2 md:px-4 py-4 md:py-5",children:a.jsxs("div",{className:"flex items-center gap-1 md:gap-2",children:[a.jsx(V,{size:12,className:"text-slate-500 flex-shrink-0"}),a.jsx("span",{className:"font-mono text-xs md:text-sm text-slate-300",children:e.credits})]})}),a.jsx("td",{className:"px-4 md:px-8 py-4 md:py-5 text-right",children:a.jsxs("div",{className:"flex justify-end gap-1 md:gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>xt(e),className:"p-1.5 md:p-2 bg-slate-800 hover:bg-indigo-600 text-slate-500 hover:text-white rounded-lg transition-all",title:"Message User",children:a.jsx(Ve,{size:14})}),a.jsx("button",{onClick:()=>(async e=>{if(R)return void ks("Suspend User");const t=prompt("Reason for suspension:");if(!t)return;await ae(e,t)&&(Ft(t=>t.map(t=>t.id===e?{...t,status:"suspended"}:t)),alert("User suspended successfully"))})(e.id),className:"p-1.5 md:p-2 bg-slate-800 hover:bg-yellow-600 text-slate-500 hover:text-white rounded-lg transition-all",title:"Suspend User",children:a.jsx(Ue,{size:14})}),a.jsx("button",{onClick:()=>(async e=>{if(R)return void ks("Ban User");const t=prompt("Reason for ban:");if(!t)return;if(!confirm("Are you sure you want to ban this user? This action is severe."))return;await le(e,t)&&(Ft(t=>t.map(t=>t.id===e?{...t,status:"banned"}:t)),alert("User banned successfully"))})(e.id),className:"p-1.5 md:p-2 bg-slate-800 hover:bg-red-600 text-slate-500 hover:text-white rounded-lg transition-all",title:"Ban User",children:a.jsx(gt,{size:14})})]})})]},e.id))})]})})]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl md:rounded-[48px] p-6 md:p-8 shadow-2xl flex flex-col gap-4 md:gap-6",children:[a.jsxs("h3",{className:"text-lg md:text-xl font-black tracking-tight flex items-center gap-3",children:[a.jsx(bt,{className:"text-indigo-500",size:20})," Broadcast"]}),a.jsxs("div",{className:"space-y-3 md:space-y-4",children:[a.jsx("div",{className:"flex bg-slate-950 rounded-xl p-1",children:["all","organizers","attendees"].map(e=>a.jsx("button",{onClick:()=>zt(e),className:"flex-1 py-2 text-[9px] md:text-[10px] font-black uppercase tracking-widest rounded-lg transition-all "+(Tt===e?"bg-indigo-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"),children:e},e))}),a.jsx("textarea",{placeholder:"Global message content...",value:Pt,onChange:e=>Rt(e.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded-xl md:rounded-2xl p-3 md:p-4 text-xs text-white outline-none focus:border-indigo-500 min-h-[120px] md:min-h-[150px] resize-none"}),a.jsxs("button",{onClick:async()=>{if(!Pt.trim())return;if(R)return void ks("Broadcast Platform Notification");const e=await re("Platform Announcement",Pt,Tt);e>0?(alert(`Successfully sent notification to ${e} users`),Rt("")):alert("Failed to send notifications")},disabled:!Pt.trim(),className:"w-full py-3 md:py-4 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl md:rounded-2xl font-black text-xs uppercase tracking-widest text-white flex items-center justify-center gap-2 md:gap-3 transition-all active:scale-95 shadow-xl shadow-indigo-600/20",children:[a.jsx(m,{size:14})," Send Global Push"]})]})]})]})}),"marketing"===S&&a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-black tracking-tighter",children:"Campaign Engine"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Manage platform growth campaigns with AI-powered generation."})]}),a.jsxs("button",{onClick:()=>{Xe(null),Ee(!0)},className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 rounded-2xl font-black text-xs uppercase tracking-widest text-white flex items-center gap-2 transition-all active:scale-95 shadow-xl shadow-indigo-600/20",children:[a.jsx(P,{size:14})," New Campaign"]})]}),Qe?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[...Array(3)].map((e,t)=>a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 animate-pulse",children:[a.jsx("div",{className:"h-40 bg-slate-800 rounded-xl mb-4"}),a.jsx("div",{className:"h-6 bg-slate-800 rounded mb-2"}),a.jsx("div",{className:"h-4 bg-slate-800 rounded w-3/4"})]},t))}):0===Se.length?a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[40px] p-16 text-center",children:[a.jsx(He,{size:48,className:"mx-auto mb-6 text-slate-600"}),a.jsx("h4",{className:"text-xl font-black text-white mb-2",children:"No Active Campaigns"}),a.jsx("p",{className:"text-slate-500 mb-8",children:"Create your first growth campaign to engage users and drive platform adoption."}),a.jsx("button",{onClick:()=>{Xe(null),Ee(!0)},className:"px-8 py-4 bg-indigo-600 hover:bg-indigo-700 rounded-2xl font-black text-xs uppercase tracking-widest text-white transition-all",children:"Create Campaign"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:Se.map(t=>{var s,l,r,i;return a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[40px] overflow-hidden hover:border-slate-700 transition-all shadow-2xl group",children:[(t.imageUrl||t.image_url)&&a.jsx("div",{className:"h-48 overflow-hidden bg-slate-950",children:a.jsx("img",{src:t.imageUrl||t.image_url,alt:t.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-lg font-black text-white mb-1",children:t.title}),a.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:t.copy})]}),a.jsx("span",{className:"text-[9px] font-black px-3 py-1.5 rounded-full uppercase "+("Active"===t.status?"bg-emerald-500/10 text-emerald-500":"Paused"===t.status?"bg-yellow-500/10 text-yellow-500":"Draft"===t.status?"bg-slate-700 text-slate-400":"bg-blue-500/10 text-blue-500"),children:t.status})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[a.jsxs("div",{className:"bg-slate-950 rounded-xl p-3",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-500 uppercase mb-1",children:"Views"}),a.jsx("p",{className:"text-lg font-black text-white",children:(null==(s=t.metrics)?void 0:s.views.toLocaleString())||0})]}),a.jsxs("div",{className:"bg-slate-950 rounded-xl p-3",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-500 uppercase mb-1",children:"Clicks"}),a.jsx("p",{className:"text-lg font-black text-indigo-400",children:(null==(l=t.metrics)?void 0:l.clicks.toLocaleString())||0})]}),a.jsxs("div",{className:"bg-slate-950 rounded-xl p-3",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-500 uppercase mb-1",children:"Signups"}),a.jsx("p",{className:"text-lg font-black text-emerald-400",children:(null==(r=t.metrics)?void 0:r.guestSignups)||0})]}),a.jsxs("div",{className:"bg-slate-950 rounded-xl p-3",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-500 uppercase mb-1",children:"Revenue"}),a.jsxs("p",{className:"text-lg font-black text-orange-400",children:["€",(((null==(i=t.metrics)?void 0:i.revenueValue)||0)/1e3).toFixed(1),"k"]})]})]}),t.incentive&&a.jsx("div",{className:"bg-violet-500/5 border border-violet-500/20 rounded-xl p-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(V,{size:14,className:"text-violet-400"}),a.jsx("span",{className:"text-[10px] font-black text-violet-400 uppercase",children:t.incentive.type})]}),a.jsxs("span",{className:"text-xs font-bold text-white",children:[t.incentive.value," × ",t.incentive.redeemed,"/",t.incentive.limit]})]})}),a.jsxs("div",{className:"bg-slate-950 border border-slate-800 rounded-xl p-3 space-y-2",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-500 uppercase mb-2",children:"📤 Publish to Social Media"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:async()=>{try{const{publishToConnectedPlatforms:s}=await e(async()=>{const{publishToConnectedPlatforms:e}=await import("./socialAuthHelper-CEhnL7SY.js");return{publishToConnectedPlatforms:e}},__vite__mapDeps([0,1,2,3,4]));await s({instagram:{caption:`${t.title}\n\n${t.copy}\n\n🔗 www.eventnexus.eu\n\n#EventNexus #Events`,imageUrl:t.imageUrl||t.image_url||""}}),alert("✅ Posted to Instagram!")}catch(s){alert("❌ Failed to post: "+s.message)}},className:"flex-1 py-2 bg-gradient-to-br from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 rounded-lg text-[10px] font-black uppercase text-white transition-all flex items-center justify-center gap-1",children:"📸 Instagram"}),a.jsx("button",{onClick:async()=>{try{const{publishToConnectedPlatforms:s}=await e(async()=>{const{publishToConnectedPlatforms:e}=await import("./socialAuthHelper-CEhnL7SY.js");return{publishToConnectedPlatforms:e}},__vite__mapDeps([0,1,2,3,4]));await s({facebook:{content:`${t.title}\n\n${t.copy}\n\n👉 ${t.cta||"Join us at EventNexus!"}`,imageUrl:t.imageUrl||t.image_url,eventUrl:"https://www.eventnexus.eu"}}),alert("✅ Posted to Facebook!")}catch(s){alert("❌ Failed to post: "+s.message)}},className:"flex-1 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-[10px] font-black uppercase text-white transition-all flex items-center justify-center gap-1",children:"📘 Facebook"})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 pt-2",children:[a.jsx("button",{onClick:()=>{Xe(t),Ee(!0)},className:"py-2.5 bg-slate-800 hover:bg-indigo-600 rounded-xl text-[10px] font-black uppercase text-slate-400 hover:text-white transition-all",children:"Edit"}),a.jsx("button",{onClick:()=>{ct(t.id),at(!0)},className:"py-2.5 bg-slate-800 hover:bg-orange-600 rounded-xl text-[10px] font-black uppercase text-slate-400 hover:text-white transition-all",children:"📅 Schedule"}),a.jsx("button",{onClick:()=>(async e=>{await ie(e)&&Me(t=>t.filter(t=>t.id!==e))})(t.id),className:"py-2.5 bg-slate-800 hover:bg-red-600 rounded-xl text-[10px] font-black uppercase text-slate-400 hover:text-white transition-all",children:"Delete"})]})]})]},t.id)})})]}),"analytics-campaign"===S&&a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[a.jsx("div",{className:"flex flex-col md:flex-row justify-between items-end gap-6",children:a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-black tracking-tighter",children:"Campaign Analytics"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Real-time performance tracking and insights for AI campaigns."})]})}),a.jsx(Vt,{})]}),"ai-learning"===S&&a.jsx("div",{className:"space-y-8 animate-in fade-in duration-500",children:a.jsx(xs,{})}),"autonomous"===S&&a.jsx("div",{className:"space-y-8 animate-in fade-in duration-500",children:a.jsx(js,{})}),"social-media"===S&&a.jsx("div",{className:"animate-in fade-in duration-500",children:a.jsx(dt,{user:t})}),"brand-protection"===S&&a.jsx("div",{className:"animate-in fade-in duration-500",children:a.jsx(Yt,{user:t})}),"inbox"===S&&a.jsx("div",{className:"animate-in fade-in duration-500",children:a.jsx(Kt,{})}),"beta-invitations"===S&&a.jsx("div",{className:"animate-in fade-in duration-500",children:a.jsx(fs,{})}),"landing-content"===S&&a.jsx("div",{className:"animate-in fade-in duration-500",children:a.jsx(zs,{userRole:t.role})}),"platform-media"===S&&a.jsx("div",{className:"animate-in fade-in duration-500",children:a.jsx(Ms,{userRole:t.role})}),"analytics-dashboard"===S&&a.jsx("div",{className:"animate-in fade-in duration-500",children:a.jsx(Ts,{})}),"settings"===S&&a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[a.jsx("div",{className:"bg-gradient-to-r from-red-500/10 via-amber-500/10 to-red-500/10 border border-red-500/30 rounded-3xl p-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Be,{className:"w-8 h-8 text-red-500"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h4",{className:"text-lg font-black text-white mb-2 flex items-center gap-2",children:["Master Authentication Required",R?a.jsx("span",{className:"text-xs font-bold px-3 py-1 bg-slate-800 text-slate-400 rounded-full",children:"LOCKED"}):a.jsx("span",{className:"text-xs font-bold px-3 py-1 bg-red-500 text-white rounded-full animate-pulse",children:"ELEVATED"})]}),a.jsx("p",{className:"text-sm text-slate-400 mb-3",children:"Critical platform operations require secondary authentication. This includes:"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[a.jsx(At,{className:"w-3 h-3 text-red-500"}),a.jsx("span",{children:"API Key Management"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[a.jsx(w,{className:"w-3 h-3 text-red-500"}),a.jsx("span",{children:"System Configuration"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[a.jsx(gt,{className:"w-3 h-3 text-red-500"}),a.jsx("span",{children:"User Suspension/Ban"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[a.jsx(bt,{className:"w-3 h-3 text-red-500"}),a.jsx("span",{children:"Platform Broadcasts"})]})]}),R&&a.jsxs("button",{onClick:()=>ks("Unlock Master Controls"),className:"mt-4 flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-500 text-white text-xs font-bold rounded-lg transition-all",children:[a.jsx(St,{className:"w-4 h-4"}),"Unlock Master Controls"]})]})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-black tracking-tighter",children:"System Matrix"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Manage global infrastructure and API integrations."})]}),a.jsxs("div",{className:"flex items-center gap-2 px-6 py-3 bg-red-500/10 border border-red-500/20 rounded-2xl",children:[a.jsx(Be,{className:"text-red-500",size:16}),a.jsx("p",{className:"text-[10px] font-black text-red-500 uppercase tracking-widest",children:"Master Clearance Required"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsx(Es,{icon:a.jsx(it,{}),title:"Finance Matrix (Stripe)",locked:R,onFieldChange:_s,fields:[{label:"Public Key",value:je.stripe.pk,key:"stripe.pk"},{label:"Secret Key",value:je.stripe.sk,key:"stripe.sk",type:"password"},{label:"Webhook Secret",value:je.stripe.wh,key:"stripe.wh",type:"password"}]}),a.jsx(Es,{icon:a.jsx(_t,{}),title:"Data Matrix (Supabase)",locked:R,onFieldChange:_s,fields:[{label:"Project URL",value:je.supabase.url,key:"supabase.url"},{label:"Anon Public Key",value:je.supabase.anon,key:"supabase.anon"},{label:"Service Role Key",value:je.supabase.svc,key:"supabase.svc",type:"password"}]}),a.jsx(Es,{icon:a.jsx(N,{}),title:"Intelligence Matrix (Gemini)",locked:R,onFieldChange:_s,fields:[{label:"API Key",value:je.gemini.key,key:"gemini.key",type:"password"},{label:"Primary Model",value:je.gemini.model,key:"gemini.model"}]}),a.jsx(Es,{icon:a.jsx(st,{}),title:"Map Shards (Mapbox)",locked:R,onFieldChange:_s,fields:[{label:"Access Token",value:je.mapbox.token,key:"mapbox.token"},{label:"Default Style ID",value:je.mapbox.styleId,key:"mapbox.styleId"}]}),a.jsx(Es,{icon:a.jsx(kt,{}),title:"Dev Matrix (GitHub)",locked:R,onFieldChange:_s,fields:[{label:"App ID",value:je.github.appId,key:"github.appId"},{label:"Client Secret",value:je.github.secret,key:"github.secret",type:"password"},{label:"Primary Repo",value:je.github.repo,key:"github.repo"}]}),a.jsx(Es,{icon:a.jsx(x,{}),title:"Communication Matrix (Email)",locked:R,onFieldChange:_s,fields:[{label:"Provider",value:je.email.provider,key:"email.provider"},{label:"API Key",value:je.email.key,key:"email.key",type:"password"},{label:"Sender Address",value:je.email.from,key:"email.from"}]})]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[40px] p-8 flex flex-col md:flex-row items-center justify-between gap-6 shadow-2xl",children:[a.jsxs("div",{className:"flex items-center gap-4 text-slate-400",children:[a.jsx(Z,{className:"text-emerald-500"}),a.jsx("p",{className:"text-xs font-medium max-w-md",children:"System updates propagate across the Nexus backbone instantly. All modifications are logged to the immutable admin ledger."})]}),a.jsx("button",{disabled:R,onClick:async()=>{R?ks("Update System Configuration"):(await Promise.all([ne("global_ticket_fee",B.toString()),ne("credit_value",q.toString()),ne("maintenance_mode",ge.toString()),ne("stripe_pk",je.stripe.pk),ne("stripe_sk",je.stripe.sk),ne("stripe_wh",je.stripe.wh),ne("supabase_url",je.supabase.url),ne("supabase_anon",je.supabase.anon),ne("supabase_svc",je.supabase.svc),ne("gemini_key",je.gemini.key),ne("gemini_model",je.gemini.model),ne("mapbox_token",je.mapbox.token),ne("mapbox_styleId",je.mapbox.styleId),ne("github_appId",je.github.appId),ne("github_secret",je.github.secret),ne("github_repo",je.github.repo),ne("email_provider",je.email.provider),ne("email_key",je.email.key),ne("email_from",je.email.from)]),alert("✅ Configuration saved successfully. Note: Some services may require restart to use new keys."),alert("System configuration updated successfully"))},className:"px-10 py-5 rounded-2xl font-black text-xs uppercase tracking-widest transition-all "+(R?"bg-slate-800 text-slate-600 opacity-50 cursor-not-allowed":"bg-emerald-600 text-white shadow-xl shadow-emerald-600/20 active:scale-95 hover:bg-emerald-700"),children:"Save Configuration"})]})]}),"infrastructure"===S&&a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-black tracking-tighter",children:"System Health"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Real-time infrastructure monitoring & diagnostics"})]}),a.jsxs("button",{onClick:async()=>{M(!0);try{const e=await H();Ht(e)}catch(e){}finally{setTimeout(()=>M(!1),500)}},disabled:z,className:"flex items-center gap-2 px-6 py-3 bg-slate-800 hover:bg-slate-700 disabled:opacity-50 rounded-2xl font-black text-xs uppercase tracking-widest text-white transition-all",children:[a.jsx($e,{size:16,className:z?"animate-spin":""}),z?"Refreshing...":"Refresh"]})]}),Zt?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((e,t)=>a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 animate-pulse",children:[a.jsx("div",{className:"h-4 bg-slate-800 rounded mb-2"}),a.jsx("div",{className:"h-8 bg-slate-800 rounded mb-1"}),a.jsx("div",{className:"h-3 bg-slate-800 rounded w-1/2"})]},t))}):Wt?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(Ls,{label:"Cluster Uptime",value:`${Wt.clusterUptime.toFixed(2)}%`,change:`${(Wt.clusterUptime-99.95).toFixed(2)}%`,trend:Wt.clusterUptime>99.95?"up":"neutral",icon:a.jsx(Nt,{}),color:"emerald"}),a.jsx(Ls,{label:"API Latency",value:`${Wt.apiLatency}ms`,change:Wt.apiLatency<15?"-optimal":"+slow",trend:Wt.apiLatency<15?"up":"down",icon:a.jsx(pt,{}),color:"blue"}),a.jsx(Ls,{label:"DB Connections",value:Wt.dbConnections.toLocaleString(),change:`${Wt.dbConnections} active`,trend:"neutral",icon:a.jsx(Ye,{}),color:"violet"}),a.jsx(Ls,{label:"Storage Burn",value:`${Wt.storageBurn} GB`,change:Wt.storageBurn<1?"optimal":"growing",trend:Wt.storageBurn<1?"up":"down",icon:a.jsx(It,{}),color:"orange"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 bg-slate-900 border border-slate-800 rounded-[40px] p-8 shadow-2xl overflow-hidden font-mono text-xs",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"font-bold flex items-center gap-2 text-slate-400",children:[a.jsx(Lt,{size:16})," Event Stream"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"})," ",a.jsx("span",{className:"text-[10px] text-slate-500 font-black uppercase",children:"Live"})]})]}),a.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto scrollbar-hide",children:Wt.systemLogs.map((e,t)=>{var s;return a.jsxs("p",{className:"text-slate-400",children:[a.jsx("span",{className:"font-bold "+(e.includes("[SYNC]")?"text-emerald-500":e.includes("[NET]")?"text-blue-500":e.includes("[AUTH]")?"text-yellow-500":e.includes("[WARN]")?"text-orange-500":e.includes("[INFO]")?"text-cyan-500":e.includes("[SYS]")?"text-purple-500":"text-red-500"),children:(null==(s=e.match(/\\[\\w+\\]/))?void 0:s[0])||"[LOG]"})," ",e.replace(/\\[\\w+\\]\\s*/,"")]},t)})})]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[40px] p-8 shadow-2xl flex flex-col items-center justify-center text-center space-y-6",children:[a.jsx("div",{className:"w-20 h-20 bg-emerald-500/10 rounded-3xl flex items-center justify-center text-emerald-500",children:a.jsx(Z,{size:40})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xl font-black text-white",children:"System Integrity"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium",children:Wt.systemIntegrity})]}),a.jsx("button",{onClick:async()=>{rs(!0);try{const{data:{session:e}}=await s.auth.getSession();if(!(null==e?void 0:e.access_token))throw new Error("Not authenticated");const{data:t,error:a}=await s.functions.invoke("diagnostic-scan",{body:{},headers:{Authorization:`Bearer ${e.access_token}`}});if(a)throw a;ns(t),ds(!0)}catch(e){alert("Failed to run diagnostic scan. Check console for details.")}finally{rs(!1)}},disabled:as,className:"w-full py-4 bg-slate-800 hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-2xl text-[10px] font-black uppercase tracking-widest text-white transition-all flex items-center justify-center gap-2",children:as?a.jsxs(a.Fragment,{children:[a.jsx(f,{size:14,className:"animate-spin"})," Scanning..."]}):"Run Diagnostic Scan"}),a.jsxs("button",{onClick:()=>ks("transition_to_production"),disabled:R,className:"w-full py-4 bg-red-500/10 hover:bg-red-500/20 disabled:opacity-50 disabled:cursor-not-allowed rounded-2xl text-[10px] font-black uppercase tracking-widest text-red-500 transition-all flex items-center justify-center gap-2 border border-red-500/30",children:[a.jsx(ht,{size:14})," Go Live Production"]})]})]})]}):a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-slate-500",children:"Unable to load infrastructure data"})})]}),"financials"===S&&a.jsx("div",{className:"space-y-8 animate-in fade-in duration-500",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[40px] p-8 space-y-8 shadow-2xl",children:[a.jsxs("h3",{className:"text-2xl font-black tracking-tight flex items-center gap-3",children:[a.jsx(K,{className:"text-emerald-500"})," Platform Ledger"]}),ts?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(f,{className:"w-8 h-8 animate-spin text-slate-600"})}):0===Qt.length?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-slate-500",children:"No financial transactions yet"})}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest border-b border-slate-800",children:[a.jsx("th",{className:"pb-4",children:"Transaction Source"}),a.jsx("th",{className:"pb-4 text-center",children:"Type"}),a.jsx("th",{className:"pb-4 text-center",children:"Volume"}),a.jsx("th",{className:"pb-4 text-right",children:"Status"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-800/50",children:Qt.map((e,t)=>a.jsx(Ds,{name:e.transaction_source,cat:e.transaction_type,amt:e.volume,status:e.status},t))})]})})]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[40px] p-10 shadow-2xl relative",children:[R&&a.jsxs("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-[2px] z-10 flex flex-col items-center justify-center rounded-[40px]",children:[a.jsx(W,{size:40,className:"text-slate-600 mb-4"}),a.jsx("p",{className:"text-slate-400 font-black uppercase text-[10px] tracking-[0.2em]",children:"Master Lock Active"})]}),a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsx("h3",{className:"text-xl font-black tracking-tight",children:"System Global Parameters"}),a.jsx("span",{className:"text-[8px] font-black text-orange-500 bg-orange-500/10 px-3 py-1 rounded-full uppercase",children:"Affects Global Backbone"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-end",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Ticket Fee (%)"}),a.jsxs("span",{className:"text-3xl font-black text-white",children:[B.toFixed(1),"%"]})]}),a.jsx("input",{type:"range",min:"0",max:"10",step:"0.1",value:B,onChange:e=>G(parseFloat(e.target.value)),className:"w-full h-2 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-indigo-500"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-end",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Credit Unit (€)"}),a.jsxs("span",{className:"text-3xl font-black text-emerald-500",children:["€",q.toFixed(2)]})]}),a.jsx("input",{type:"range",min:"0.1",max:"2.0",step:"0.05",value:q,onChange:e=>J(parseFloat(e.target.value)),className:"w-full h-2 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-emerald-500"})]})]})]})]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[40px] p-8 shadow-2xl flex flex-col",children:[a.jsx("h3",{className:"text-xl font-black tracking-tight mb-8",children:"Revenue Mix"}),a.jsx("div",{className:"flex-1 min-h-[300px]",children:a.jsx(ue,{width:"100%",height:"100%",children:a.jsxs(Ie,{children:[a.jsx(Te,{data:(null==Bt?void 0:Bt.revenueByTier)||[],dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,children:((null==Bt?void 0:Bt.revenueByTier)||[]).map((e,t)=>a.jsx(ze,{fill:e.color},`cell-${t}`))}),a.jsx(ye,{contentStyle:{backgroundColor:"#0f172a",border:"none",borderRadius:"12px"}})]})})}),a.jsx("div",{className:"space-y-3 mt-6",children:((null==Bt?void 0:Bt.revenueByTier)||[]).map(e=>a.jsxs("div",{className:"flex justify-between items-center px-4 py-3 bg-slate-950 border border-slate-800 rounded-2xl",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color}}),a.jsx("span",{className:"text-[10px] font-black uppercase text-slate-300",children:e.name})]}),a.jsxs("span",{className:"text-sm font-black text-white",children:["€",(e.value/1e3).toFixed(1),"k"]})]},e.name))})]})]})})]}),cs&&is&&a.jsx(Fs,{results:is,onClose:()=>ds(!1)}),ot&&a.jsxs("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4",onClick:()=>xt(null),children:[a.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),a.jsxs("div",{className:"relative w-full max-w-lg bg-slate-900 border border-slate-800 rounded-[32px] p-6 shadow-2xl",onClick:e=>e.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black tracking-tight",children:"Message User"}),a.jsxs("p",{className:"text-xs text-slate-500 font-medium",children:[ot.name," · ",ot.email]})]}),a.jsx("button",{className:"p-2 bg-slate-800 rounded-xl hover:bg-slate-700",onClick:()=>xt(null),children:a.jsx(n,{size:18,className:"text-slate-400"})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"text",placeholder:"Title (optional)",value:mt,onChange:e=>ut(e.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-3 text-sm text-white outline-none focus:border-indigo-500"}),a.jsx("textarea",{placeholder:"Write your message...",value:jt,onChange:e=>ft(e.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-3 text-sm text-white outline-none focus:border-indigo-500 min-h-[120px] resize-none"}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{onClick:()=>xt(null),className:"flex-1 py-3 bg-slate-800 hover:bg-slate-700 rounded-xl text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Cancel"}),a.jsx("button",{onClick:async()=>{if(ot)if(jt.trim())try{Ct(!0);const e=(new Date).toISOString();await ce({user_id:ot.id,title:mt.trim()||"Message from Admin",message:jt.trim(),type:"announcement",senderName:"EventNexus Admin",isRead:!1,timestamp:e})?(alert("✅ Message sent successfully"),xt(null),ut(""),ft("")):alert("❌ Failed to send message")}catch(e){alert("❌ Error sending message")}finally{Ct(!1)}else alert("Please enter a message.")},disabled:vt||!jt.trim(),className:"flex-1 py-3 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl text-[10px] font-black uppercase tracking-widest text-white flex items-center justify-center gap-2 shadow-xl shadow-indigo-600/20",children:vt?a.jsxs(a.Fragment,{children:[a.jsx(f,{size:14,className:"animate-spin"})," Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(m,{size:14})," Send Message"]})})]})]})]})]}),D&&a.jsxs("div",{className:"fixed inset-0 z-[3000] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-xl",onClick:()=>F(!1)}),a.jsxs("div",{className:"relative w-full max-w-md bg-slate-900 border border-red-500/50 rounded-[48px] p-10 shadow-2xl space-y-8 animate-in zoom-in-95",children:[a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"w-20 h-20 bg-red-500/10 rounded-[32px] flex items-center justify-center mx-auto text-red-500 border border-red-500/20",children:a.jsx(St,{size:40})}),a.jsx("h2",{className:"text-2xl font-black text-white tracking-tight",children:"Master Auth Required"}),a.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Entering modification mode. Secondary passkey is required for platform-wide changes."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("input",{type:"password",placeholder:"Enter Master Passkey",value:securityPass,onChange:e=>setSecurityPass(e.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded-2xl px-6 py-4 text-center font-mono text-lg tracking-widest text-white outline-none focus:border-red-500 transition-all"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:()=>F(!1),className:"flex-1 py-4 bg-slate-800 rounded-2xl font-black text-xs uppercase tracking-widest text-slate-400",children:"Abort"}),a.jsx("button",{onClick:handleVerifySecurity,className:"flex-1 py-4 bg-red-600 hover:bg-red-700 rounded-2xl font-black text-xs uppercase tracking-widest text-white shadow-xl shadow-red-600/20",children:"Authorize"})]})]})]})]}),Pe&&a.jsxs("div",{className:"fixed inset-0 z-[3000] flex items-center justify-center p-4 overflow-y-auto",children:[a.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-xl",onClick:()=>Ee(!1)}),a.jsxs("div",{className:"relative w-full max-w-4xl bg-slate-900 border border-slate-800 rounded-[48px] p-10 shadow-2xl space-y-8 my-8",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-black text-white tracking-tight",children:(null==Ze?void 0:Ze.id)?"Edit Campaign":"New Campaign"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Create engaging growth campaigns with AI assistance"})]}),a.jsx("button",{onClick:()=>Ee(!1),className:"p-3 bg-slate-800 hover:bg-slate-700 rounded-xl transition-all",children:a.jsx(n,{size:20,className:"text-slate-400"})})]}),a.jsxs("div",{className:"bg-indigo-500/5 border border-indigo-500/20 rounded-[32px] p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(b,{className:"text-indigo-400",size:20}),a.jsx("h3",{className:"text-lg font-black text-white",children:"AI Campaign Generator"})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("input",{type:"text",placeholder:"Campaign theme (e.g., 'Summer Festival Boost', 'Creator Onboarding')...",value:qe,onChange:e=>Je(e.target.value),className:"flex-1 bg-slate-950 border border-slate-800 rounded-2xl px-6 py-4 text-sm text-white outline-none focus:border-indigo-500 transition-all"}),a.jsxs("select",{value:We,onChange:e=>Ke(e.target.value),className:"bg-slate-950 border border-slate-800 rounded-2xl px-6 py-4 text-sm text-white outline-none",children:[a.jsxs("optgroup",{label:"User Acquisition",children:[a.jsx("option",{value:"attendees",children:"🎉 Event Attendees"}),a.jsx("option",{value:"creators",children:"🎨 Event Creators & Organizers"})]}),a.jsxs("optgroup",{label:"Platform Growth",children:[a.jsx("option",{value:"platform-growth",children:"🚀 Platform Discovery"}),a.jsx("option",{value:"new-features",children:"✨ New Features Announcement"}),a.jsx("option",{value:"community",children:"💬 Community Engagement"})]}),a.jsxs("optgroup",{label:"Campaigns",children:[a.jsx("option",{value:"seasonal",children:"🌞 Seasonal Campaign"}),a.jsx("option",{value:"retention",children:"💝 User Retention"}),a.jsx("option",{value:"referral",children:"🎁 Referral Program"})]})]}),a.jsx("button",{onClick:async()=>{if(qe.trim()){Fe(!0);try{const e=await Re(qe,We);if(e){const t=await Oe(e.visualPrompt,"16:9"),s=`AI-${Math.random().toString(36).substr(2,4).toUpperCase()}`,a=`https://www.eventnexus.eu?utm_source=campaign&utm_medium=social&utm_campaign=${s}&utm_content=${We}`;Xe({title:e.title,copy:e.copy,cta:`${e.cta} → ${a}`,imageUrl:t||void 0,status:"Draft",placement:"both",target:"creators"===We?"organizers":"attendees",trackingCode:s,incentive:{type:e.recommendedIncentiveType,value:e.recommendedIncentiveValue,limit:100,redeemed:0},metrics:{views:0,clicks:0,guestSignups:0,proConversions:0,revenueValue:0},tracking:{sources:{facebook:0,x:0,instagram:0,direct:0}}})}}catch(e){}finally{Fe(!1)}}},disabled:De||!qe.trim(),className:"px-8 py-4 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-2xl font-black text-xs uppercase tracking-widest text-white transition-all flex items-center gap-2",children:De?a.jsxs(a.Fragment,{children:[a.jsx(f,{size:14,className:"animate-spin"})," Generating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(b,{size:14})," Generate"]})})]})]}),Ze&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Campaign Title"}),a.jsx("input",{type:"text",value:Ze.title||"",onChange:e=>Xe({...Ze,title:e.target.value}),className:"w-full bg-slate-950 border border-slate-800 rounded-2xl px-6 py-3.5 text-sm text-white outline-none focus:border-indigo-500 transition-all",placeholder:"Campaign title..."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Tracking Code"}),a.jsx("input",{type:"text",value:Ze.trackingCode||"",onChange:e=>Xe({...Ze,trackingCode:e.target.value}),className:"w-full bg-slate-950 border border-slate-800 rounded-2xl px-6 py-3.5 text-sm font-mono text-indigo-400 outline-none focus:border-indigo-500 transition-all",placeholder:"TRACK-CODE"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Campaign Copy"}),a.jsx("textarea",{value:Ze.copy||"",onChange:e=>Xe({...Ze,copy:e.target.value}),className:"w-full bg-slate-950 border border-slate-800 rounded-2xl px-6 py-4 text-sm text-white outline-none focus:border-indigo-500 transition-all min-h-[100px] resize-none",placeholder:"Campaign message..."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Status"}),a.jsxs("select",{value:Ze.status||"Draft",onChange:e=>Xe({...Ze,status:e.target.value}),className:"w-full bg-slate-950 border border-slate-800 rounded-2xl px-6 py-3.5 text-sm text-white outline-none",children:[a.jsx("option",{value:"Draft",children:"Draft"}),a.jsx("option",{value:"Active",children:"Active"}),a.jsx("option",{value:"Paused",children:"Paused"}),a.jsx("option",{value:"Completed",children:"Completed"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Placement"}),a.jsxs("select",{value:Ze.placement||"both",onChange:e=>Xe({...Ze,placement:e.target.value}),className:"w-full bg-slate-950 border border-slate-800 rounded-2xl px-6 py-3.5 text-sm text-white outline-none",children:[a.jsx("option",{value:"landing_page",children:"Landing Page"}),a.jsx("option",{value:"dashboard",children:"Dashboard"}),a.jsx("option",{value:"both",children:"Both"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Target"}),a.jsxs("select",{value:Ze.target||"attendees",onChange:e=>Xe({...Ze,target:e.target.value}),className:"w-full bg-slate-950 border border-slate-800 rounded-2xl px-6 py-3.5 text-sm text-white outline-none",children:[a.jsx("option",{value:"attendees",children:"Attendees"}),a.jsx("option",{value:"organizers",children:"Organizers"}),a.jsx("option",{value:"all",children:"All Users"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Call to Action"}),a.jsx("input",{type:"text",value:Ze.cta||"",onChange:e=>Xe({...Ze,cta:e.target.value}),className:"w-full bg-slate-950 border border-slate-800 rounded-2xl px-6 py-3.5 text-sm text-white outline-none focus:border-indigo-500 transition-all",placeholder:"Learn More"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Image URL"}),a.jsx("input",{type:"text",value:Ze.imageUrl||Ze.image_url||"",onChange:e=>Xe({...Ze,imageUrl:e.target.value,image_url:e.target.value}),className:"w-full bg-slate-950 border border-slate-800 rounded-2xl px-6 py-3.5 text-sm text-indigo-400 font-mono outline-none focus:border-indigo-500 transition-all",placeholder:"https://..."})]})]}),a.jsxs("div",{className:"bg-orange-500/5 border border-orange-500/20 rounded-[32px] p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(V,{className:"text-orange-400",size:20}),a.jsx("h3",{className:"text-lg font-black text-white",children:"Incentive Configuration"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Type"}),a.jsxs("select",{value:(null==(r=Ze.incentive)?void 0:r.type)||"credits",onChange:e=>{var t,s,a;return Xe({...Ze,incentive:{...Ze.incentive,type:e.target.value,value:(null==(t=Ze.incentive)?void 0:t.value)||0,limit:(null==(s=Ze.incentive)?void 0:s.limit)||100,redeemed:(null==(a=Ze.incentive)?void 0:a.redeemed)||0}})},className:"w-full bg-slate-950 border border-slate-800 rounded-2xl px-4 py-3 text-sm text-white outline-none",children:[a.jsx("option",{value:"credits",children:"Credits"}),a.jsx("option",{value:"pro_discount",children:"Pro Discount"}),a.jsx("option",{value:"none",children:"None"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"pro_discount"===(null==(c=Ze.incentive)?void 0:c.type)?"Discount %":"Credits"}),a.jsx("input",{type:"number",value:(null==(d=Ze.incentive)?void 0:d.value)||0,onChange:e=>Xe({...Ze,incentive:{...Ze.incentive,value:parseInt(e.target.value)||0}}),className:"w-full bg-slate-950 border border-slate-800 rounded-2xl px-4 py-3 text-sm text-white outline-none focus:border-orange-500 transition-all",min:"0"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Limit"}),a.jsx("input",{type:"number",value:(null==(o=Ze.incentive)?void 0:o.limit)||100,onChange:e=>Xe({...Ze,incentive:{...Ze.incentive,limit:parseInt(e.target.value)||0}}),className:"w-full bg-slate-950 border border-slate-800 rounded-2xl px-4 py-3 text-sm text-white outline-none focus:border-orange-500 transition-all",min:"0"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Redeemed"}),a.jsx("input",{type:"number",value:(null==(h=Ze.incentive)?void 0:h.redeemed)||0,onChange:e=>Xe({...Ze,incentive:{...Ze.incentive,redeemed:parseInt(e.target.value)||0}}),className:"w-full bg-slate-950 border border-slate-800 rounded-2xl px-4 py-3 text-sm text-orange-400 outline-none focus:border-orange-500 transition-all",min:"0",max:(null==(p=Ze.incentive)?void 0:p.limit)||100})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-950 rounded-xl",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Spots Remaining"}),a.jsx("p",{className:"text-2xl font-black text-orange-400",children:((null==(u=Ze.incentive)?void 0:u.limit)||0)-((null==(g=Ze.incentive)?void 0:g.redeemed)||0)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Reward Value"}),a.jsx("p",{className:"text-2xl font-black text-emerald-400",children:"credits"===(null==(j=Ze.incentive)?void 0:j.type)?`€${(.5*((null==(v=Ze.incentive)?void 0:v.value)||0)).toFixed(2)}`:"pro_discount"===(null==(_=Ze.incentive)?void 0:_.type)?`${(null==(C=Ze.incentive)?void 0:C.value)||0}%`:"N/A"})]})]})]}),a.jsxs("div",{className:"flex gap-4 pt-4",children:[a.jsx("button",{onClick:()=>Ee(!1),className:"flex-1 py-4 bg-slate-800 hover:bg-slate-700 rounded-2xl font-black text-xs uppercase tracking-widest text-slate-400 transition-all",children:"Cancel"}),a.jsx("button",{onClick:async()=>{if(Ze&&Ze.title){if(Ze.id){const e=await de(Ze.id,Ze);e&&Me(t=>t.map(t=>t.id===e.id?e:t))}else{const e=await oe(Ze);e&&Me(t=>[...t,e])}Ee(!1),Xe(null)}},disabled:!Ze.title||!Ze.trackingCode,className:"flex-1 py-4 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-2xl font-black text-xs uppercase tracking-widest text-white transition-all shadow-xl shadow-indigo-600/20",children:Ze.id?"Update Campaign":"Create Campaign"})]})]})]})]}),a.jsx(Ps,{isOpen:E,onClose:()=>L(!1),onAuthenticate:e=>{e&&"transition_to_production"===$&&ms(!0),(e=>{e&&(O(!1),setTimeout(()=>O(!0),6e5)),U("")})(e)},operationName:$}),a.jsx(Ss,{}),a.jsx($s,{open:os,onClose:()=>{ms(!1),gs("")},onConfirm:async()=>{if("TRANSITION_TO_PRODUCTION"===us)if(R){ps(!0);try{const e=await xe(void 0,void 0,"Admin-initiated production transition");if(null==e?void 0:e.success){alert("✅ Platform successfully transitioned to production mode!\n\n🔴 All sandbox and beta features are now disabled.\n🔴 Stripe is now in LIVE mode.\n🔴 All beta testers have been deactivated."),ms(!1),gs("");const e=await me();ys(e);const t=await he();vs(t)}else alert("❌ Transition failed: "+((null==e?void 0:e.error)||"Unknown error"))}catch(e){alert("❌ Error: "+(e instanceof Error?e.message:"Unknown error"))}finally{ps(!1)}}else alert("⚠️ Master controls must be locked before proceeding");else alert("⚠️ Please type the exact confirmation message")},isProcessing:hs,transitionConfirmation:us,setTransitionConfirmation:gs})]})},Es=({icon:e,title:t,locked:s,fields:l,onFieldChange:r})=>a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl md:rounded-[40px] p-4 md:p-8 shadow-2xl relative overflow-hidden group",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6 md:mb-8",children:[a.jsxs("div",{className:"flex items-center gap-3 md:gap-4 min-w-0",children:[a.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-slate-800 rounded-xl md:rounded-2xl flex items-center justify-center text-slate-400 group-hover:text-white transition-colors flex-shrink-0",children:e}),a.jsx("h3",{className:"text-base md:text-lg font-black tracking-tight truncate",children:t})]}),a.jsxs("div",{className:"flex items-center gap-2 text-[8px] font-black uppercase tracking-widest flex-shrink-0 "+(s?"text-slate-500":"text-emerald-500"),children:[a.jsx($t,{size:10,className:"md:w-3 md:h-3"})," ",a.jsx("span",{className:"hidden sm:inline",children:s?"Standby":"Ready"})]})]}),a.jsx("div",{className:"space-y-4 md:space-y-6",children:l.map((e,t)=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between px-1",children:[a.jsx("label",{className:"text-[9px] md:text-[10px] font-black text-slate-500 uppercase tracking-widest",children:e.label}),s&&a.jsx(W,{size:8,className:"md:w-2.5 md:h-2.5 text-slate-700"})]}),a.jsx("input",{type:e.type||"text",disabled:s,value:s?"••••••••••••••••":e.value,onChange:t=>!s&&r&&r(e.key,t.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded-xl md:rounded-2xl px-3 md:px-5 py-2.5 md:py-3.5 text-[10px] md:text-xs font-mono tracking-wider outline-none transition-all "+(s?"text-slate-700 cursor-not-allowed":"text-indigo-400 focus:border-indigo-500"),placeholder:s?"":`Enter ${e.label.toLowerCase()}`})]},t))}),a.jsx("div",{className:"mt-6 md:mt-8 flex gap-2 md:gap-3",children:a.jsx("button",{disabled:s,className:"flex-1 py-2.5 md:py-3 rounded-lg md:rounded-xl text-[9px] md:text-[10px] font-black uppercase tracking-widest transition-all "+(s?"bg-slate-800 text-slate-600 opacity-50":"bg-slate-800 text-white hover:bg-slate-700"),children:"Test API Handshake"})})]}),Ls=({label:e,value:t,change:s,trend:l,icon:r,color:i})=>a.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-4 md:p-8 rounded-2xl md:rounded-[32px] hover:border-slate-700 transition-all shadow-xl group",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4 md:mb-6",children:[a.jsx("div",{className:`p-3 md:p-4 rounded-xl md:rounded-2xl group-hover:scale-110 transition-transform ${{orange:"bg-orange-600/10 text-orange-500",blue:"bg-indigo-600/10 text-indigo-400",emerald:"bg-emerald-600/10 text-emerald-500",violet:"bg-violet-600/10 text-violet-400"}[i]}`,children:Ae.cloneElement(r,{size:20,className:"md:w-6 md:h-6"})}),a.jsxs("div",{className:"flex items-center gap-1 text-[9px] md:text-[10px] font-black px-2 md:px-3 py-1 rounded-full uppercase tracking-tighter "+("up"===l?"bg-emerald-500/10 text-emerald-500":"down"===l?"bg-red-500/10 text-red-500":"bg-slate-800 text-slate-500"),children:[s," ","up"===l?a.jsx(We,{size:10,className:"md:w-3 md:h-3"}):a.jsx(ut,{size:10,className:"md:w-3 md:h-3"})]})]}),a.jsx("p",{className:"text-[9px] md:text-[10px] text-slate-500 font-bold uppercase tracking-widest mb-1",children:e}),a.jsx("h3",{className:"text-2xl md:text-3xl font-black tracking-tighter text-white",children:t})]}),Ds=({name:e,cat:t,amt:s,status:l})=>a.jsxs("tr",{className:"group hover:bg-slate-800/30 transition-all",children:[a.jsx("td",{className:"py-6 px-8",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-800 rounded-xl flex items-center justify-center text-slate-500",children:a.jsx(Ye,{className:"w-5 h-5"})}),a.jsx("span",{className:"font-bold text-white text-sm",children:e})]})}),a.jsx("td",{className:"py-6 text-center",children:a.jsx("span",{className:"text-[10px] font-black text-slate-500 bg-slate-800/50 px-3 py-1.5 rounded-lg border border-slate-700/50 uppercase tracking-widest",children:t})}),a.jsx("td",{className:"py-6 text-center font-black "+(s&&s.startsWith("+")?"text-emerald-500":"text-red-500"),children:s||"€0"}),a.jsx("td",{className:"py-6 text-right px-8",children:a.jsx("span",{className:"text-[9px] font-black px-4 py-2 rounded-full uppercase tracking-tighter "+("Complete"===l?"bg-emerald-500/10 text-emerald-500":"bg-orange-500/10 text-orange-500"),children:l})})]}),Fs=({results:e,onClose:t})=>a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[200] flex items-center justify-center p-4",onClick:t,children:a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[40px] max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl",onClick:e=>e.stopPropagation(),children:[a.jsxs("div",{className:"p-8 border-b border-slate-800 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-black tracking-tight",children:"System Diagnostic Report"}),a.jsxs("p",{className:"text-xs text-slate-500 font-medium mt-1",children:["Completed in ",e.scanDuration]})]}),a.jsx("button",{onClick:t,className:"w-10 h-10 bg-slate-800 hover:bg-slate-700 rounded-xl flex items-center justify-center transition-all",children:a.jsx(n,{size:18})})]}),a.jsxs("div",{className:"p-8 overflow-y-auto max-h-[calc(90vh-200px)] scrollbar-hide",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[a.jsxs("div",{className:"bg-slate-950 border border-slate-800 rounded-2xl p-4",children:[a.jsx("div",{className:"text-3xl font-black mb-1 "+("healthy"===e.overallStatus?"text-emerald-500":"warning"===e.overallStatus?"text-yellow-500":"text-red-500"),children:"healthy"===e.overallStatus?"✓":"warning"===e.overallStatus?"⚠":"✕"}),a.jsx("p",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Overall"}),a.jsx("p",{className:"text-xs font-bold capitalize",children:e.overallStatus})]}),a.jsxs("div",{className:"bg-slate-950 border border-emerald-900/20 rounded-2xl p-4",children:[a.jsx("div",{className:"text-3xl font-black text-emerald-500 mb-1",children:e.summary.healthy}),a.jsx("p",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Healthy"})]}),a.jsxs("div",{className:"bg-slate-950 border border-yellow-900/20 rounded-2xl p-4",children:[a.jsx("div",{className:"text-3xl font-black text-yellow-500 mb-1",children:e.summary.warnings}),a.jsx("p",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Warnings"})]}),a.jsxs("div",{className:"bg-slate-950 border border-red-900/20 rounded-2xl p-4",children:[a.jsx("div",{className:"text-3xl font-black text-red-500 mb-1",children:e.summary.critical}),a.jsx("p",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Critical"})]})]}),a.jsx("div",{className:"space-y-3",children:e.diagnostics.map((e,t)=>a.jsx("div",{className:"bg-slate-950 border rounded-2xl p-5 "+("healthy"===e.status?"border-emerald-900/20":"warning"===e.status?"border-yellow-900/20":"border-red-900/20"),children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[a.jsx("div",{className:"w-8 h-8 rounded-xl flex items-center justify-center text-sm font-black "+("healthy"===e.status?"bg-emerald-500/10 text-emerald-500":"warning"===e.status?"bg-yellow-500/10 text-yellow-500":"bg-red-500/10 text-red-500"),children:"healthy"===e.status?"✓":"warning"===e.status?"⚠":"✕"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-black text-sm",children:e.category}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:e.message}),e.details&&a.jsx("div",{className:"mt-2 p-3 bg-slate-900 rounded-xl",children:a.jsx("pre",{className:"text-[10px] text-slate-500 font-mono overflow-x-auto scrollbar-hide",children:JSON.stringify(e.details,null,2)})})]})]}),a.jsx("span",{className:"text-[8px] text-slate-600 font-mono whitespace-nowrap",children:new Date(e.timestamp).toLocaleTimeString()})]})},t))})]}),a.jsxs("div",{className:"p-6 border-t border-slate-800 flex justify-between items-center",children:[a.jsxs("p",{className:"text-xs text-slate-500 font-mono",children:["Timestamp: ",new Date(e.timestamp).toLocaleString()]}),a.jsx("button",{onClick:t,className:"px-6 py-3 bg-slate-800 hover:bg-slate-700 rounded-2xl text-xs font-black uppercase tracking-widest text-white transition-all",children:"Close Report"})]})]})}),$s=({open:e,onClose:t,onConfirm:s,isProcessing:l,transitionConfirmation:r,setTransitionConfirmation:i})=>e?a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/90 backdrop-blur-xl animate-in fade-in",children:a.jsxs("div",{className:"bg-slate-950 border-2 border-red-500/30 rounded-[40px] w-full max-w-2xl shadow-2xl shadow-red-600/20",children:[a.jsx("div",{className:"p-8 border-b border-red-500/20 bg-red-500/5",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("h2",{className:"text-3xl font-black tracking-tight text-red-500 flex items-center gap-2",children:[a.jsx(ht,{size:28})," Transition to Production"]}),a.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"This action will permanently switch the platform from development to production mode. This cannot be easily reversed."})]}),a.jsx("button",{onClick:()=>{t(),i("")},className:"p-2 hover:bg-slate-800 rounded-xl transition-all",children:a.jsx(n,{size:24,className:"text-slate-400"})})]})}),a.jsxs("div",{className:"p-8 space-y-6 max-h-[calc(90vh-300px)] overflow-y-auto",children:[a.jsxs("div",{className:"bg-red-500/10 border-2 border-red-500/30 rounded-2xl p-6 space-y-3",children:[a.jsxs("h3",{className:"font-black text-red-500 text-sm uppercase tracking-widest flex items-center gap-2",children:[a.jsx(zt,{size:18})," Critical Changes"]}),a.jsxs("ul",{className:"space-y-2 text-sm text-slate-300",children:[a.jsxs("li",{className:"flex gap-2",children:[a.jsx("span",{className:"text-red-500 font-black",children:"⚠️"})," ",a.jsxs("span",{children:["Stripe will switch from ",a.jsx("strong",{children:"SANDBOX"})," to ",a.jsx("strong",{children:"LIVE"})," mode"]})]}),a.jsxs("li",{className:"flex gap-2",children:[a.jsx("span",{className:"text-red-500 font-black",children:"⚠️"})," ",a.jsxs("span",{children:["All ",a.jsx("strong",{children:"beta tester features"})," will be permanently disabled"]})]}),a.jsxs("li",{className:"flex gap-2",children:[a.jsx("span",{className:"text-red-500 font-black",children:"⚠️"})," ",a.jsxs("span",{children:[a.jsx("strong",{children:"Development APIs"})," will be replaced with production endpoints"]})]}),a.jsxs("li",{className:"flex gap-2",children:[a.jsx("span",{className:"text-red-500 font-black",children:"⚠️"})," ",a.jsxs("span",{children:[a.jsx("strong",{children:"All active beta invitations"})," will be archived"]})]}),a.jsxs("li",{className:"flex gap-2",children:[a.jsx("span",{className:"text-red-500 font-black",children:"⚠️"})," ",a.jsxs("span",{children:["Production ",a.jsx("strong",{children:"safeguards"})," will be activated (2FA, audit logging, backups)"]})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"block text-sm font-black text-slate-400 uppercase tracking-widest",children:"Type to confirm transition:"}),a.jsx("input",{type:"text",value:r,onChange:e=>i(e.target.value.toUpperCase()),placeholder:"TRANSITION_TO_PRODUCTION",className:"w-full px-4 py-3 bg-slate-900 border border-slate-800 rounded-xl text-slate-50 font-mono text-sm placeholder-slate-600 focus:outline-none focus:border-red-500/50"}),a.jsxs("p",{className:"text-[10px] text-slate-500 font-mono",children:["Match case-sensitive text exactly: ",a.jsx("span",{className:"text-red-500 font-black",children:"TRANSITION_TO_PRODUCTION"})]})]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6 space-y-4",children:[a.jsx("h3",{className:"font-black text-slate-300 text-sm uppercase tracking-widest",children:"Current Configuration"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-500 font-bold mb-1",children:"Environment"}),a.jsx("p",{className:"text-slate-300 font-mono bg-slate-950 px-3 py-2 rounded",children:"Development"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-500 font-bold mb-1",children:"Stripe Mode"}),a.jsx("p",{className:"text-amber-500 font-mono font-black bg-slate-950 px-3 py-2 rounded",children:"TEST (Sandbox)"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-500 font-bold mb-1",children:"Beta Features"}),a.jsx("p",{className:"text-emerald-500 font-mono font-black bg-slate-950 px-3 py-2 rounded",children:"ENABLED"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-500 font-bold mb-1",children:"API Base URL"}),a.jsx("p",{className:"text-cyan-500 font-mono text-[9px] bg-slate-950 px-3 py-2 rounded truncate",children:"localhost:3000"})]})]}),a.jsx("div",{className:"border-t border-slate-800 pt-4",children:a.jsx("p",{className:"text-[10px] text-slate-500 font-mono",children:"Post-transition, all these values will update to production configuration. This action is audit-logged and cannot be undone."})})]})]}),a.jsxs("div",{className:"p-8 border-t border-red-500/20 bg-red-500/5 flex gap-4",children:[a.jsx("button",{onClick:()=>{t(),i("")},className:"flex-1 px-6 py-4 bg-slate-800 hover:bg-slate-700 rounded-2xl text-sm font-black uppercase tracking-widest text-white transition-all",children:"Cancel"}),a.jsx("button",{onClick:s,disabled:l||"TRANSITION_TO_PRODUCTION"!==r,className:"flex-1 px-6 py-4 bg-red-500 hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-2xl text-sm font-black uppercase tracking-widest text-white transition-all flex items-center justify-center gap-2 shadow-xl shadow-red-600/20",children:l?a.jsxs(a.Fragment,{children:[a.jsx(f,{size:16,className:"animate-spin"})," Processing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(ht,{size:16})," Go Live Now"]})})]})]})}):null;export{Os as default};
