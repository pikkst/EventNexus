const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-b309e1nc.js","assets/charts-0jYrCXCa.js","assets/qr-BITZ6EfA.js","assets/index-BHD_3q4q.css"])))=>i.map(i=>d[i]);
import{_ as e}from"./qr-BITZ6EfA.js";import{$ as s,u as t,g as a,a0 as l,a1 as i,j as r,a2 as n,h as d,G as c,a3 as o,w as m,T as x,a4 as h,a5 as p}from"./index-b309e1nc.js";import{b,R as g}from"./charts-0jYrCXCa.js";import{c as u,v as f,a as j,b as v}from"./stripeService-DPa5zaLD.js";import{C as N}from"./clock-Cnt1qgag.js";import{M as w}from"./map-pin-Zr57KGRe.js";import{P as y}from"./pen-line-BArdnww9.js";import{H as k}from"./heart-BBtaA7RC.js";import{S}from"./share-2-ytQz_KfA.js";import{U as F,a as C}from"./user-plus-BMrevrHM.js";const E=({user:E,onToggleFollow:_,onOpenAuth:z})=>{const{id:P}=s(),T=t(),[U,$]=b.useState(null),[q,A]=b.useState([]),[M,I]=b.useState(!0),[O,L]=b.useState(0),[D,R]=b.useState(!1),[V,B]=b.useState(1),[G,Y]=b.useState(!1),[H,W]=b.useState(!1),[X,J]=b.useState(!1),[K,Q]=b.useState("en"),[Z,ee]=b.useState("EventNexus User"),[se,te]=b.useState({}),[ae,le]=b.useState(!1),[ie,re]=b.useState(!0),ne=g.useMemo(()=>{if(!(null==U?void 0:U.translations))return[{code:"en",name:"English"}];const e={en:"English",es:"Español",fr:"Français",de:"Deutsch",pt:"Português",it:"Italiano"};return Object.keys(U.translations).map(s=>({code:s,name:e[s]||s.toUpperCase()}))},[null==U?void 0:U.translations]),de=g.useMemo(()=>U?U.translations&&0!==Object.keys(U.translations).length&&U.translations[K]||U.description:"",[U,K]),ce=g.useCallback(async()=>{if(P)try{const t=(await a()).find(e=>e.id===P);if(t){$(t),L(t.attendeesCount);const a=await l(P);A(a);try{const{getUser:s,checkConnectStatus:a}=await e(async()=>{const{getUser:e,checkConnectStatus:s}=await import("./index-b309e1nc.js").then(e=>e.be);return{getUser:e,checkConnectStatus:s}},__vite__mapDeps([0,1,2,3])),l=await s(t.organizerId);if(l){ee(l.company_name||l.name||"EventNexus User");const e=await a(t.organizerId),s=(null==e?void 0:e.onboardingComplete)&&(null==e?void 0:e.chargesEnabled);le(s||!1),re(!1)}}catch(s){re(!1)}}if(E&&P){const e=await i(E.id,P);W(e)}}catch(t){}finally{I(!1)}},[P,E]);if(b.useEffect(()=>{ce()},[ce]),b.useEffect(()=>{(async()=>{if(u()){const e=new URLSearchParams(window.location.hash.split("?")[1]).get("session_id");if(e){await f(e)&&(Y(!0),j(),ce())}else Y(!0),j(),ce()}})()},[ce]),M)return r.jsx("div",{className:"min-h-screen bg-slate-950 text-white flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-8 h-8 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-slate-400",children:"Loading event..."})]})});if(!U)return r.jsx("div",{className:"min-h-screen bg-slate-950 text-white flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Event not found"}),r.jsx("p",{className:"text-slate-400",children:"The event you're looking for doesn't exist."})]})});const oe=U.maxAttendees-O;U.price;const me=(null==E?void 0:E.followedOrganizers.includes(U.organizerId))??!1;return r.jsxs("div",{className:"min-h-screen bg-slate-950 text-white pb-32",children:[U.imageUrl&&r.jsxs("div",{className:"relative h-[300px] sm:h-[400px] md:h-[500px] w-full overflow-hidden",children:[r.jsx("img",{src:U.imageUrl,alt:U.name,className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-950 via-slate-950/60 to-transparent"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-slate-950/80 via-transparent to-transparent"}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 sm:p-6 md:p-8 pb-6 sm:pb-8 md:pb-12",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-3 sm:mb-4",children:[r.jsx("span",{className:"px-3 sm:px-4 py-1.5 sm:py-2 bg-indigo-600/90 backdrop-blur-sm rounded-full text-xs sm:text-sm font-bold uppercase tracking-wider",children:U.category}),U.isFeatured&&r.jsxs("span",{className:"px-3 sm:px-4 py-1.5 sm:py-2 bg-amber-600/90 backdrop-blur-sm rounded-full text-xs sm:text-sm font-bold uppercase tracking-wider flex items-center gap-2",children:[r.jsx(n,{className:"w-3 h-3 sm:w-4 sm:h-4 fill-current"}),"Premium"]})]}),r.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-black text-white mb-3 sm:mb-4 leading-tight",children:U.name}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 md:gap-6 text-sm sm:text-base text-white/90",children:[r.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[r.jsx(d,{className:"w-4 h-4 sm:w-5 sm:h-5"}),r.jsx("span",{className:"font-semibold",children:new Date(U.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),r.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[r.jsx(N,{className:"w-4 h-4 sm:w-5 sm:h-5"}),r.jsx("span",{className:"font-semibold",children:U.time})]}),r.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[r.jsx(w,{className:"w-4 h-4 sm:w-5 sm:h-5"}),r.jsx("span",{className:"font-semibold",children:U.location.city})]})]})]})})]}),r.jsx("div",{className:"max-w-6xl mx-auto px-4 py-6 sm:py-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8 lg:gap-12",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex gap-2",children:[E&&E.id===U.organizerId&&r.jsx("button",{onClick:()=>T(`/events/${U.id}/edit`),className:"p-3 sm:p-4 bg-slate-900 border border-slate-800 rounded-xl sm:rounded-2xl hover:bg-slate-800 transition-all shadow-xl text-indigo-400 hover:text-indigo-300",title:"Edit event",children:r.jsx(y,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),r.jsx("button",{onClick:async()=>{if(E){if(U&&!X){J(!0);try{if(H){await h(E.id,U.id)&&W(!1)}else{await p(E.id,U.id)&&W(!0)}}catch(e){}finally{J(!1)}}}else null==z||z()},disabled:X,className:"p-3 sm:p-4 bg-slate-900 border border-slate-800 rounded-xl sm:rounded-2xl hover:bg-slate-800 transition-all shadow-xl disabled:opacity-50 "+(H?"text-pink-500 bg-pink-500/10 border-pink-500/30":"text-pink-500"),title:H?"Unlike this event":"Like this event",children:r.jsx(k,{className:"w-5 h-5 sm:w-6 sm:h-6 "+(H?"fill-current":"")})}),r.jsx("button",{onClick:()=>{const e=window.location.href;navigator.share?navigator.share({title:U.name,text:U.description,url:e}).catch(()=>{navigator.clipboard.writeText(e),alert("Event link copied to clipboard!")}):(navigator.clipboard.writeText(e),alert("Event link copied to clipboard!"))},className:"p-3 sm:p-4 bg-slate-900 border border-slate-800 rounded-xl sm:rounded-2xl hover:bg-slate-800 transition-all text-indigo-400 shadow-xl",title:"Share this event",children:r.jsx(S,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})}),r.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl sm:rounded-3xl md:rounded-[32px] p-4 sm:p-6 md:p-8 space-y-4 sm:space-y-6 shadow-xl",children:[r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsx("h3",{className:"text-xl sm:text-2xl font-bold",children:"About this event"}),ne.length>1&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(c,{className:"w-4 h-4 text-indigo-400"}),r.jsx("select",{value:K,onChange:e=>Q(e.target.value),className:"bg-slate-800 border border-slate-700 rounded-lg px-3 py-1.5 text-sm font-medium text-slate-300 hover:border-indigo-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all outline-none cursor-pointer",children:ne.map(({code:e,name:s})=>r.jsx("option",{value:e,children:s},e))})]})]}),r.jsx("p",{className:"text-slate-400 leading-relaxed text-sm sm:text-base md:text-lg",children:de}),U.aboutText&&r.jsx("div",{className:"mt-6 pt-6 border-t border-slate-800",children:r.jsx("pre",{className:"text-slate-300 leading-relaxed text-sm sm:text-base whitespace-pre-wrap font-sans",children:U.aboutText})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-6 border-t border-slate-800",children:[r.jsxs("div",{className:"bg-slate-800/40 p-4 rounded-2xl border border-slate-700/50 flex items-center gap-4",children:[r.jsx("div",{className:"bg-indigo-600/10 p-3 rounded-xl text-indigo-400",children:r.jsx(c,{className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-sm",children:"Smart Translation"}),r.jsx("p",{className:"text-xs text-slate-500",children:ne.length>1?`Available in ${ne.length} languages`:"Auto-translated into 12+ languages."})]})]}),r.jsxs("div",{className:"bg-emerald-600/10 p-4 rounded-2xl border border-emerald-500/20 flex items-center gap-4",children:[r.jsx(o,{className:"w-6 h-6 text-emerald-400"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-sm",children:"Nexus Verified"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Guaranteed entry or money back."})]})]})]})]})]}),r.jsx("div",{className:"lg:col-span-1 space-y-4 sm:space-y-6",children:r.jsxs("div",{className:"lg:sticky lg:top-24 space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"border rounded-3xl md:rounded-[40px] p-4 sm:p-6 md:p-8 shadow-2xl relative overflow-hidden "+(U.isFeatured?"bg-gradient-to-br from-slate-900 via-slate-900 to-amber-500/5 border-amber-500/30":"bg-slate-900 border-slate-800"),children:[r.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-600/10 rounded-full blur-[80px] -mr-24 -mt-24 pointer-events-none"}),U.imageUrl&&r.jsx("div",{className:"absolute top-0 right-0 bottom-0 w-40 opacity-10 overflow-hidden rounded-[40px]",children:r.jsx("img",{src:U.imageUrl,alt:U.name,className:"w-full h-full object-cover"})}),U.isFeatured&&r.jsxs("div",{className:"mb-4 flex items-center gap-2 relative z-10",children:[r.jsx(n,{className:"w-4 h-4 text-amber-500 fill-amber-500"}),r.jsx("span",{className:"text-xs font-bold text-amber-500 uppercase tracking-widest",children:"Premium Event"})]}),r.jsxs("div",{className:"flex justify-between items-end mb-6 sm:mb-8 md:mb-10 relative z-10",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-[0.2em] mb-1 sm:mb-2",children:q.length>0?"Price Range":"Price per seat"}),r.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-black tracking-tighter",children:q.length>0?`€${Math.min(...q.map(e=>e.price))} - €${Math.max(...q.map(e=>e.price))}`:0===U.price?"Free":`€${U.price}`})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"flex items-center gap-1 text-orange-500 mb-1",children:[r.jsx(m,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-black",children:oe})]}),r.jsxs("p",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-widest leading-none",children:["Left of ",U.maxAttendees]})]})]}),q.length>0&&r.jsxs("div",{className:"space-y-3 mb-6 relative z-10",children:[r.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:"Available Tickets"}),!ie&&!ae&&r.jsx("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-xl p-4 mb-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-amber-500/20 flex items-center justify-center flex-shrink-0",children:r.jsx(o,{className:"w-4 h-4 text-amber-500"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-bold text-amber-400 text-sm mb-1",children:"Ticket Sales Not Available Yet"}),r.jsx("p",{className:"text-xs text-amber-300/80 leading-relaxed",children:"The event organizer is still completing their payment setup. Tickets will be available for purchase once the setup is complete. Please check back later or contact the organizer for updates."})]})]})}),q.filter(e=>e.is_active&&e.quantity_available>0).map(e=>{const s=se[e.id]||0;return r.jsxs("div",{className:"border rounded-2xl p-4 space-y-4 "+(U.isFeatured?"bg-gradient-to-r from-slate-800/50 to-amber-500/5 border-amber-500/20":"bg-slate-800/50 border-slate-700/50"),children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center "+(U.isFeatured?"bg-amber-600/20":"bg-indigo-600/20"),children:r.jsx(x,{className:"w-5 h-5 "+(U.isFeatured?"text-amber-500":"text-indigo-400")})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-white",children:e.name}),r.jsx("p",{className:"text-xs text-slate-500 capitalize",children:e.type.replace("_"," ")}),e.description&&r.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:e.description})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-black text-xl text-white",children:["€",e.price]}),r.jsxs("p",{className:"text-xs text-slate-500",children:[e.quantity_available," left"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>te(s=>({...s,[e.id]:Math.max(0,(s[e.id]||0)-1)})),disabled:0===s,className:"w-9 h-9 rounded-lg bg-slate-700 hover:bg-slate-600 disabled:opacity-30 disabled:cursor-not-allowed flex items-center justify-center font-bold text-sm transition-colors",children:"-"}),r.jsx("span",{className:"font-bold text-lg w-8 text-center",children:s}),r.jsx("button",{onClick:()=>te(s=>({...s,[e.id]:Math.min(e.quantity_available,Math.min(10,(s[e.id]||0)+1))})),disabled:s>=Math.min(10,e.quantity_available),className:"w-9 h-9 rounded-lg flex items-center justify-center font-bold text-sm transition-all disabled:opacity-30 disabled:cursor-not-allowed "+(U.isFeatured?"bg-amber-600 hover:bg-amber-700":"bg-indigo-600 hover:bg-indigo-700"),children:"+"})]}),r.jsx("button",{onClick:()=>(async e=>{if(!E)return alert("Please sign in to purchase tickets. It only takes a moment!"),void(null==z||z());if(!ae)return void alert("⚠️ Ticket sales are not yet available for this event.\n\nThe event organizer needs to complete their payment setup first. Please check back later or contact the organizer.");const s=se[e.id]||0;if(0!==s)if(e.quantity_available<s)alert(`Only ${e.quantity_available} tickets remaining. Please reduce your quantity.`);else{R(!0);try{const t=await v(E.id,U.id,s,e.price,`${U.name} - ${e.name}`,e.id,e.type,e.name);if(!t)throw new Error("Failed to create checkout session");window.location.href=t}catch(t){alert("Failed to start checkout. Please try again or contact support."),R(!1)}}else alert("Please select a quantity first.")})(e),disabled:D||0===s||!ae,className:"flex-1 py-3 px-4 rounded-xl font-bold text-sm transition-all shadow-lg active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed "+(U.isFeatured?"bg-gradient-to-r from-amber-600 to-amber-500 hover:from-amber-700 hover:to-amber-600":"bg-indigo-600 hover:bg-indigo-700"),children:ae?0===s?"Select quantity":D?"Processing...":`Buy ${s} for €${(e.price*s).toFixed(2)}`:"Not Available"})]})]},e.id)})]}),G&&r.jsx("div",{className:"mt-8 p-6 bg-emerald-500/10 border border-emerald-500/20 rounded-3xl",children:r.jsxs("p",{className:"text-emerald-500 text-sm font-bold flex items-center gap-3",children:[r.jsx(o,{className:"w-6 h-6 shrink-0"}),r.jsx("span",{children:"Booking confirmed!"})]})})]}),r.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[32px] p-6 flex items-center gap-4 shadow-xl group",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:"https://picsum.photos/seed/org/100",className:"w-14 h-14 rounded-2xl object-cover",alt:"org"}),r.jsx("div",{className:"absolute -bottom-1 -right-1 bg-indigo-600 rounded-full p-1 border-2 border-slate-900",children:r.jsx(o,{className:"w-3 h-3 text-white"})})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mb-0.5",children:"Organized by"}),r.jsx("h4",{className:"font-bold truncate text-slate-100",children:Z})]}),r.jsx("button",{onClick:()=>{E?null==_||_(U.organizerId):null==z||z()},className:"px-4 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 "+(me?"bg-slate-800 text-slate-400":"bg-indigo-600 text-white"),children:me?r.jsxs(r.Fragment,{children:[r.jsx(F,{className:"w-4 h-4"})," Following"]}):r.jsxs(r.Fragment,{children:[r.jsx(C,{className:"w-4 h-4"})," Follow"]})})]})]})})]})})]})};export{E as default};
