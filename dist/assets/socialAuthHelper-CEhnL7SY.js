const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/socialMediaService-CadkJn-5.js","assets/index-b309e1nc.js","assets/charts-0jYrCXCa.js","assets/qr-BITZ6EfA.js","assets/index-BHD_3q4q.css","assets/geminiService-DURgciVI.js"])))=>i.map(i=>d[i]);
import{_ as t}from"./qr-BITZ6EfA.js";import{s as o}from"./index-b309e1nc.js";import"./charts-0jYrCXCa.js";const e=async()=>{try{const{data:t,error:e}=await o.from("social_media_accounts").select("*").eq("is_connected",!0);if(e)throw e;return(t||[]).map(t=>({platform:t.platform,accountId:t.account_id,accountName:t.account_name,accessToken:t.access_token,refreshToken:t.refresh_token,expiresAt:t.expires_at,isConnected:t.is_connected}))}catch(t){return[]}},a=async o=>{const a={},n=await e();for(const e of n){const n=o[e.platform];if(n)try{const{postToFacebook:o,postToInstagram:c,postToTwitter:s,postToLinkedIn:r}=await t(async()=>{const{postToFacebook:t,postToInstagram:o,postToTwitter:e,postToLinkedIn:a}=await import("./socialMediaService-CadkJn-5.js");return{postToFacebook:t,postToInstagram:o,postToTwitter:e,postToLinkedIn:a}},__vite__mapDeps([0,1,2,3,4,5]));switch(e.platform){case"facebook":"content"in n&&(a.facebook=await o(e.accessToken,e.accountId,n.content,n.imageUrl,"eventUrl"in n?n.eventUrl:void 0));break;case"instagram":"caption"in n&&n.imageUrl&&(a.instagram=await c(e.accessToken,e.accountId,n.caption,n.imageUrl));break;case"twitter":"tweet"in n&&(a.twitter=await s(e.accessToken,n.tweet,n.imageUrl));break;case"linkedin":"content"in n&&(a.linkedin=await r(e.accessToken,e.accountId,n.content,n.imageUrl))}}catch(c){a[e.platform]={success:!1,error:c instanceof Error?c.message:"Unknown error"}}}return a};export{e as getConnectedAccounts,a as publishToConnectedPlatforms};
