import{c as e,u as t,j as l,R as a,C as s,X as i,g as o}from"./index-b309e1nc.js";import{b as n}from"./charts-0jYrCXCa.js";import{u as r,c as d,l as c,a as x,e as h,L as u,M as m,T as p,b as g}from"./TileLayer-DQ8zY-q8.js";import{S as b}from"./search-Bhl9FGOw.js";import"./qr-BITZ6EfA.js";
/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=e("LocateFixed",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const w=d(function({center:e,children:t,...l},a){const s=new c.Circle(e,l);return x(s,h(a,{overlayContainer:s}))},function(e,t,l){t.center!==l.center&&e.setLatLng(t.center),null!=t.radius&&t.radius!==l.radius&&e.setRadius(t.radius)}),v=d(function({positions:e,...t},l){const a=new c.Polyline(e,t);return x(a,h(l,{overlayContainer:a}))},function(e,t,l){t.positions!==l.positions&&e.setLatLngs(t.positions)}),j=(e,t,l,a)=>{const s=(l-e)*Math.PI/180,i=(a-t)*Math.PI/180,o=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e*Math.PI/180)*Math.cos(l*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))},y=({center:e,isFollowing:t})=>{const l=r().map;return n.useEffect(()=>{setTimeout(()=>{l.invalidateSize()},100)},[l]),n.useEffect(()=>{t&&l.setView(e,l.getZoom(),{animate:!0})},[e,t,l]),null},k=()=>{const e=t(),[r,d]=n.useState([]),[c,x]=n.useState(!0),[h,k]=n.useState(null),[N,M]=n.useState(25),[z,C]=n.useState([40.7128,-74.006]),[S,L]=n.useState(null),[A,$]=n.useState(!0),[I,E]=n.useState(null);n.useEffect(()=>{(async()=>{try{const e=await o();d(e)}catch(e){}finally{x(!1)}})()},[]),n.useEffect(()=>{if("geolocation"in navigator){const e=navigator.geolocation.watchPosition(e=>{const{latitude:t,longitude:l}=e.coords;C([t,l])},e=>{},{enableHighAccuracy:!0});return()=>navigator.geolocation.clearWatch(e)}},[]);const F=n.useMemo(()=>r.filter(e=>j(z[0],z[1],e.location.lat,e.location.lng)<=N&&(!h||e.category===h)),[r,h,N,z]),P=n.useMemo(()=>0===F.length?null:[...F].sort((e,t)=>j(z[0],z[1],e.location.lat,e.location.lng)-j(z[0],z[1],t.location.lat,t.location.lng))[0],[F,z]),T=u.divIcon({className:"custom-marker",html:'\n      <div class="relative w-10 h-10">\n        <div class="absolute inset-0 bg-indigo-500 rounded-full animate-ping opacity-30"></div>\n        <div class="relative w-10 h-10 bg-indigo-600 border-4 border-white rounded-full flex items-center justify-center shadow-2xl">\n          <div class="w-2 h-2 bg-white rounded-full animate-pulse"></div>\n        </div>\n      </div>\n    ',iconSize:[40,40],iconAnchor:[20,20]});return l.jsxs("div",{className:"relative flex flex-col h-[calc(100vh-64px)] w-full bg-slate-950 overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 z-0",children:[l.jsxs(m,{center:z,zoom:13,style:{height:"100%",width:"100%"},zoomControl:!1,attributionControl:!1,children:[l.jsx(p,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"}),l.jsx(y,{center:z,isFollowing:A}),l.jsx(w,{center:z,radius:1e3*N,pathOptions:{fillColor:"#6366f1",fillOpacity:.03,color:"#6366f1",weight:1,dashArray:"8, 12"}}),l.jsx(g,{position:z,icon:T}),F.map(e=>{return l.jsx(g,{position:[e.location.lat,e.location.lng],icon:(t=e.price,a=e.isFeatured||!1,u.divIcon({className:"custom-marker",html:`\n      <div class="flex flex-col items-center gap-1">\n        <div class="p-2.5 rounded-2xl ${a?"bg-gradient-to-br from-yellow-400 to-orange-500 animate-pulse":"bg-indigo-600"} border-2 border-white text-white shadow-2xl relative">\n          ${a?'<div class="absolute -top-1 -right-1 bg-yellow-400 rounded-full p-1"><svg width="10" height="10" viewBox="0 0 24 24" fill="white"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg></div>':""}\n          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>\n        </div>\n        <div class="${a?"bg-gradient-to-r from-yellow-400 to-orange-500 text-white":"bg-white text-indigo-600"} text-[9px] font-black uppercase tracking-widest px-2 py-0.5 rounded-full shadow-lg border ${a?"border-yellow-200":"border-indigo-100"}">\n          ${a?"⭐ ":""}$${t}\n        </div>\n      </div>\n    `,iconSize:[40,50],iconAnchor:[20,50]})),eventHandlers:{click:()=>{L(e),$(!1)}}},e.id);var t,a}),I&&l.jsx(v,{positions:[z,[I.location.lat,I.location.lng]],pathOptions:{color:"#6366f1",weight:4,opacity:.8,dashArray:"10, 15"}})]}),l.jsx("div",{className:"leaflet-vignette"})]}),P&&!S&&l.jsx("div",{className:"absolute left-4 md:left-6 bottom-6 md:bottom-10 z-[500] animate-in slide-in-from-left duration-700",children:l.jsxs("button",{onClick:()=>L(P),className:"bg-slate-900 border border-slate-800 p-3 md:p-4 rounded-2xl md:rounded-[32px] shadow-2xl flex items-center gap-3 md:gap-4 group hover:border-indigo-500 transition-all",children:[l.jsxs("div",{className:"w-12 h-12 rounded-2xl bg-indigo-600 flex items-center justify-center text-white relative",children:[l.jsx(a,{className:"w-6 h-6 animate-pulse"}),l.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-emerald-500 rounded-full border-2 border-slate-900"})]}),l.jsxs("div",{className:"text-left",children:[l.jsx("p",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest",children:"Nearest Vibe"}),l.jsxs("p",{className:"text-xs font-black text-white",children:[j(z[0],z[1],P.location.lat,P.location.lng).toFixed(1)," km away"]})]})]})}),l.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 w-full max-w-4xl px-2 sm:px-4 z-[400] space-y-3",children:[l.jsxs("div",{className:"bg-slate-900/90 border border-slate-800 backdrop-blur-xl rounded-2xl md:rounded-[24px] shadow-2xl p-2 flex flex-col md:flex-row items-center gap-2",children:[l.jsxs("div",{className:"relative flex-1 w-full",children:[l.jsx(b,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),l.jsx("input",{type:"text",placeholder:"Explore events...",className:"w-full bg-slate-800/50 md:bg-transparent pl-12 pr-4 py-3 text-sm focus:outline-none rounded-xl text-white"})]}),l.jsx("div",{className:"flex items-center gap-2 w-full md:w-auto",children:l.jsxs("div",{className:"px-6 py-3 bg-indigo-600 rounded-xl font-black text-[10px] uppercase tracking-widest text-white shadow-lg shadow-indigo-600/30",children:[F.length," Events Found"]})})]}),l.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide justify-center",children:["All",...s].map(e=>l.jsx("button",{onClick:()=>k("All"===e?null:e),className:"px-5 py-2 rounded-2xl text-[10px] font-black uppercase tracking-widest whitespace-nowrap transition-all border shrink-0 "+(h===e||"All"===e&&!h?"bg-white border-white text-slate-950 shadow-xl":"bg-slate-900/80 border-slate-800 text-slate-400 hover:border-slate-600"),children:e},e))})]}),l.jsxs("div",{className:"absolute right-4 md:right-6 bottom-6 md:bottom-10 flex flex-col gap-2 md:gap-3 z-[400]",children:[l.jsx("button",{onClick:()=>$(!A),className:"p-3 md:p-4 rounded-xl md:rounded-2xl shadow-2xl transition-all border "+(A?"bg-indigo-600 text-white border-indigo-500":"bg-slate-900 text-slate-400 border-slate-800"),children:l.jsx(f,{className:"w-5 h-5 md:w-6 md:h-6"})}),l.jsx("div",{className:"bg-slate-900/90 border border-slate-800 backdrop-blur-md p-4 rounded-3xl flex flex-col items-center gap-3",children:l.jsx("input",{type:"range",min:"5",max:"100",step:"5",value:N,onChange:e=>M(Number(e.target.value)),className:"appearance-none w-1 h-32 bg-slate-800 rounded-lg accent-indigo-500 vertical-range cursor-pointer"})})]}),S&&l.jsx("div",{className:"absolute bottom-4 md:bottom-10 left-1/2 -translate-x-1/2 w-full max-w-lg px-2 sm:px-4 z-[400] animate-in slide-in-from-bottom-10 duration-500",children:l.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl md:rounded-[40px] shadow-2xl overflow-hidden flex flex-col sm:flex-row p-2 gap-2",children:[l.jsx("div",{className:"w-full sm:w-1/3 h-32 sm:h-auto relative shrink-0",children:l.jsx("img",{src:S.imageUrl,className:"w-full h-full object-cover rounded-[32px]",alt:""})}),l.jsxs("div",{className:"p-4 flex-1 flex flex-col justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-black text-lg text-white leading-tight tracking-tighter",children:S.name}),l.jsxs("p",{className:"text-slate-400 text-[10px] font-bold mt-1 uppercase tracking-widest",children:[S.location.city," • ",S.date]})]}),l.jsxs("div",{className:"flex items-center gap-2 pt-4",children:[l.jsx("button",{onClick:()=>e(`/event/${S.id}`),className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white py-3 rounded-2xl font-black text-[10px] uppercase tracking-widest transition-all shadow-xl active:scale-95",children:"Book Access"}),l.jsx("button",{onClick:()=>L(null),className:"p-3 bg-slate-800 hover:bg-slate-700 rounded-2xl text-slate-400",children:l.jsx(i,{size:20})})]})]})]})}),l.jsx("style",{dangerouslySetInnerHTML:{__html:"\n        .vertical-range { -webkit-appearance: slider-vertical; width: 8px; height: 120px; }\n        .custom-marker { background: transparent; border: none; }\n      "}})]})};export{k as default};
